var $e=Object.defineProperty,Pe=Object.defineProperties;var er=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var rr=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable;var we=(l,u,g)=>u in l?$e(l,u,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[u]=g,N=(l,u)=>{for(var g in u||(u={}))rr.call(u,g)&&we(l,g,u[g]);if(Re)for(var g of Re(u))tr.call(u,g)&&we(l,g,u[g]);return l},ee=(l,u)=>Pe(l,er(u));(function(l,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(l=typeof globalThis!="undefined"?globalThis:l||self,u(l["@rvision/use-form"]={},l.react))})(this,function(l,u){"use strict";function g(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var Se=g(u);const re=r=>!Number.isNaN(r),Ne=r=>parseInt(r,10),te=r=>typeof r=="function",{isArray:x}=Array,se=r=>JSON.stringify(r,(t,o)=>o instanceof Set?[...o]:o),ne=Object.keys,D={},M=()=>D;let ke=9999;const A=new WeakMap,Te=r=>{let t=A.get(r);return t||(t=(++ke).toString(36).split("").reduce((o,c)=>c+o,""),A.set(r,t)),t},j=r=>{let t;return r instanceof Set?t=new Set([...r]):t=x(r)?[...r]:N({},r),A.has(r)&&(A.set(t,A.get(r)),A.delete(r)),t},Oe=/\[([^\]]+)\]/g;let L=new Map;const V=r=>{if(!r)return[];let t=L.get(r);return t||(t=r.replace(Oe,".$1").split("."),L.set(r,t),t)},be=()=>{L=new Map},z=(r,t)=>{if(t!==void 0)return r.length===0?t:z(r.slice(1),t[r[0]])},v=(r,t)=>z(V(r),t),K=(r,t,o)=>{const{length:c}=r;if(c>0){const i=r[0];if(c===1){t[i]=o;return}const _=t[i]===void 0,m=Ne(r[1]);if(re(m))return t[i]=_?[]:j(t[i]),t[i][m]=t[i][m]===void 0?{}:j(t[i][m]),K(r.slice(2),t[i][m],o);t[i]=_?{}:j(t[i]),K(r.slice(1),t[i],o)}},k=(r,t,o)=>{const c=N({},t);return K(V(r),c,o),c},I=(r,t)=>{const{length:o}=r;if(o===0||t===void 0)return;const c=r[0];if(o===1){delete t[c];return}I(r.slice(1),t[c])},oe=r=>ne(r||D).length===0,Ce=(r,t)=>{I(r,t),r.map((c,i)=>i===0?[...r]:[...r].slice(0,-1*i)).forEach(c=>{const i=z(c,t);i!==void 0&&(x(i)?(i.length===0||i.every(oe))&&(i.message||I(c,t)):oe(i)&&I(c,t))})},U=(r,t)=>{const o=N({},t);return Ce(V(r),o),o},Me=r=>{const{value:t,type:o,checked:c,options:i,files:_,multiple:m,valueAsNumber:w,valueAsDate:y}=r.target;switch(o){case"checkbox":return c;case"range":return w;case"date":return y;case"number":{if(t==="")return null;const S=Number.parseFloat(t);return re(S)?S:void 0}case"file":return m?_:_.item(0);case"select-multiple":return[...i].filter(S=>S.selected).map(S=>S.value);default:return t}},ce=(r,t,o)=>{const c=v(r,t);return c&&x(c)?k(r,t,o(c)):t},ie=(r,t,o)=>{if(x(r)){const c=[...r];return[c[t],c[o]]=[c[o],c[t]],c}return r},W=(r,t,o)=>`${o||""} ${t||""} ${r.type?`error-${r.type}`:""}`.trim();var ue={exports:{}},J={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae=Se.default,he=Symbol.for("react.element"),De=Symbol.for("react.fragment"),Be=Object.prototype.hasOwnProperty,Fe=Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xe={key:!0,ref:!0,__self:!0,__source:!0};function ae(r,t,o){var c,i={},_=null,m=null;o!==void 0&&(_=""+o),t.key!==void 0&&(_=""+t.key),t.ref!==void 0&&(m=t.ref);for(c in t)Be.call(t,c)&&!xe.hasOwnProperty(c)&&(i[c]=t[c]);if(r&&r.defaultProps)for(c in t=r.defaultProps,t)i[c]===void 0&&(i[c]=t[c]);return{$$typeof:he,type:r,key:_,ref:m,props:i,_owner:Fe.current}}J.Fragment=De,J.jsx=ae,J.jsxs=ae,ue.exports=J;const Y=ue.exports.jsx,p=r=>{const t=u.useRef(r);return t.current=r,u.useCallback((...o)=>t.current(...o),[])},R={key:"",name:"","aria-invalid":!1,className:"",onChange:M,onBlur:M,ref:M,value:"",checked:!1},Ie=({defaultValues:r,mode:t,classNameError:o,shouldFocusError:c=!1,resolver:i=M})=>{const[_,m]=u.useState({values:r||D,errors:{}}),{values:w,errors:y}=_,S=u.useRef(!1),H=u.useRef(!1),G=u.useRef(!1),O=u.useRef(new Map),fe=u.useRef(),Q=t==="onSubmit",de=t==="onBlur",pe=t==="onChange",Le=!Q&&!de&&!pe,b=e=>m(s=>ee(N({},s),{errors:e})),X=u.useCallback(e=>{const s=e||D;fe.current=se(s),m(n=>ee(N({},n),{values:N({},s)}))},[]);u.useEffect(()=>(X(r),be),[r,X]);const Z=e=>{const s=O.current.get(e);return s&&s.focus?(s.focus(),!0):!1},q=p((e="")=>(O.current.has(e)||O.current.set(e,null),v(e,w))),le=p((e="",s=y)=>v(e,s)),T=p((e="",s=y)=>e===""?ne(s).length>0:v(e,s)!==void 0),$=p((e,s=y)=>{let n=s;return T(e,s)&&(n=U(e,s)),n}),me=p((e="",s=w)=>new Promise((n=M)=>{const a=i(s);if(e===""){b(a),n(a);return}const f=isArray(e)?e:[e];let d=N({},y);f.forEach(E=>{const F=v(E,a);d=U(E,d),F!==void 0&&(d=k(E,d,F))}),b(d),n(d)})),ye=pe||G.current&&Le,B=ye&&!Q,h=p((e,s)=>{let n=y;if((ye||T(e))&&(n=U(e,n),!Q)){const a=v(e,i(s));a&&(n=k(e,n,a))}return n}),P=p((e,s,n)=>{const a=v(e,i(n)),f=v(e,s);return f&&(delete f.message,delete f.type,(a==null?void 0:a.message)&&(f.message=a.message,f.type=a.type)),s}),C=p((e,s,n=h)=>new Promise((a=M)=>{m(f=>{const d=k(e,N({},e===""?s:w),s);S.current=!0,H.current=fe.current!==se(d);const E=n(e,d),F={values:d,errors:E};return a(F),F})})),Ve=p(e=>C(e,[],B?h:()=>[])),ze=p((e,s)=>{const n=B?h:()=>y;return C(e,[...v(e,w),s],n)}),Ke=p((e,s)=>{const n=B?h:(a,f)=>{let d=ce(e,y,E=>[void 0,...E]);return P(e,d,f)};return C(e,[s,...v(e,w)],n)}),Ue=p((e,s)=>{const n=B?h:(a,f)=>{let d=$(`${e}.${s}`,N({},y));return d=ce(e,d,E=>(E.splice(s,1),E)),P(e,d,f)};return C(e,v(e,w).filter((a,f)=>f!==s),n)}),We=p((e,s,n)=>{const a=B?h:(f,d)=>{let E=ie(v(e,y),s,n);return E=E?k(e,y,E):y,P(e,E,d)};return C(e,ie(q(e),s,n),a)}),Ye=p(e=>O.current.get(e)),_e=p((e,s)=>{s&&O.current.set(e,s)}),He=p(e=>e&&_e(e.name,e)),ve=p(e=>C(e.target.name,Me(e))),Ee=p(e=>{const{name:s}=e.target,n=v(s,i(w));n?(b(k(s,y,n)),c&&Z(s)):b($(s))}),Ge=p((e,s="")=>{const n=q(e),a=T(e);return R.name=e,R["aria-invalid"]=a,R.className=W(D,a?o:"",s),R.onChange=ve,R.ref=He,R.onBlur=de?Ee:void 0,n===!0||n===!1?(R.checked=n,R.value=void 0):(R.value=`${n}`=="0"?n:n||"",R.checked=void 0),R}),Qe=e=>s=>{s&&(s==null||s.preventDefault());const n=i(w);if(b(n),T("",n)){if(c){let a=!1;O.current.forEach((f,d)=>{!a&&T(d,n)&&(a=Z(d))})}return G.current=!0,!1}return e(w),!0},Xe=p((e=r,s=!0)=>{X(e),S.current=!1,H.current=!1,s&&me("",e)}),Ze=p(({for:e,children:s})=>{const n=le(e,y);return(n==null?void 0:n.message)?te(s)?s(n):Y("span",{className:W(n,o),children:n.message}):!1}),ge=!T(),qe=p(({children:e,focusable:s=!1})=>{if(ge)return!1;const a=Array.from(O.current).filter(f=>!!f[1]).map(f=>f[0]).filter(f=>T(f,y)).sort().map(f=>{const d=v(f,y);return Y("li",{className:W(d,o),children:s?Y("a",{onClick:()=>Z(f),children:d.message}):d.message},f)});return te(e)?e(a):a});return{getValue:q,setValue:C,register:Ge,onChange:ve,onBlur:Ee,getRef:Ye,setRef:_e,trigger:me,handleSubmit:Qe,hasError:T,getError:le,clearError:e=>b($(e)),setErrors:e=>{G.current=!0,b(e)},array:{append:ze,prepend:Ke,remove:Ue,swap:We,clear:Ve},key:Te,reset:Xe,Error:Ze,Errors:qe,formState:{errors:y,isValid:ge,isTouched:S.current,isDirty:H.current}}},Je=r=>t=>{let o={};try{r.validateSync(t,{abortEarly:!1})}catch(c){for(const i of c.inner){const _=v(i.path,o)||{};_.message=i.message,_.type=i.type,o=k(i.path,o,_)}}return o},je=r=>t=>{let o={};const c=r.safeParse(t);return c.success||c.error.errors.forEach(i=>{const _=i.path.join("."),m=v(_,o)||{};m.message=i.message,m.type=i.type,o=k(i.path,o,m)}),o};l.default=Ie,l.yupResolver=Je,l.zodResolver=je,Object.defineProperty(l,"__esModule",{value:!0}),l[Symbol.toStringTag]="Module"});
