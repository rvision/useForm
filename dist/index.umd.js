var he=Object.defineProperty;var se=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var oe=(f,l,_)=>l in f?he(f,l,{enumerable:!0,configurable:!0,writable:!0,value:_}):f[l]=_,g=(f,l)=>{for(var _ in l||(l={}))Je.call(l,_)&&oe(f,_,l[_]);if(se)for(var _ of se(l))Le.call(l,_)&&oe(f,_,l[_]);return f};(function(f,l){typeof exports=="object"&&typeof module!="undefined"?module.exports=l(require("react")):typeof define=="function"&&define.amd?define(["react"],l):(f=typeof globalThis!="undefined"?globalThis:f||self,f["@rvision/use-form"]=l(f.react))})(this,function(f){"use strict";function l(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var _=l(f);const ce=["object","function"];let ie=Date.now();const ue=()=>{const e=f.useRef(new WeakMap);return f.useEffect(()=>()=>{e&&e.current&&(e.current=new WeakMap)},[]),f.useCallback((t={})=>{const s=e.current;if(s.has(t))return s.get(t);if(!ce.includes(typeof t))return`key-${t}`;const o=(++ie).toString(36);return s.set(t,o),o},[e])};var Y={exports:{}},j={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var z=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;function pe(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function de(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;var s=Object.getOwnPropertyNames(n).map(function(u){return n[u]});if(s.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(u){o[u]=u}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}de();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var le=_.default,G=60103;if(j.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var H=Symbol.for;G=H("react.element"),j.Fragment=H("react.fragment")}var me=le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ye=Object.prototype.hasOwnProperty,we={key:!0,ref:!0,__self:!0,__source:!0};function Q(e,n,t){var s,o={},u=null,w=null;t!==void 0&&(u=""+t),n.key!==void 0&&(u=""+n.key),n.ref!==void 0&&(w=n.ref);for(s in n)ye.call(n,s)&&!we.hasOwnProperty(s)&&(o[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps,n)o[s]===void 0&&(o[s]=n[s]);return{$$typeof:G,type:e,key:u,ref:w,props:o,_owner:me.current}}j.jsx=Q,j.jsxs=Q,Y.exports=j;const M=Y.exports.jsx,h=e=>!Number.isNaN(e),X=e=>parseInt(e,10),Z=e=>typeof e=="function",{isArray:E}=Array,q=JSON.stringify,T=Object.keys,ve="true",be="false",O={key:"",name:"","aria-invalid":"",className:"",onChange:()=>{},onBlur:()=>{},ref:()=>{},value:"",checked:!1},_e=/\[([^\]]+)\]/g;let F={};const x=e=>{if(!e)return[];if(F[e])return F[e];const n=e.replace(_e,".$1").split(".");return F[e]=n,n},J=e=>typeof e!="object"||e===null?e:e instanceof Date?new Date(e.getTime()):E(e)?e.reduce((n,t,s)=>(n[s]=J(t),n),[]):e instanceof Object?T(e).reduce((n,t)=>(n[t]=J(e[t]),n),{}):e,m=(e,n)=>{if(!E(e))return m(x(e),n);if(n!==void 0)switch(e.length){case 0:return n;case 1:return n[e[0]];default:return m(e.slice(1),n[e[0]])}},k=(e,n,t)=>{if(!E(e)){k(x(e),n,t);return}if(e.length===0)return;const s=e[0];if(e.length===1){n[s]=t;return}const o=X(e[1]);h(o)?(n[s]=n[s]===void 0?[]:n[s],n[s][o]=n[s][o]===void 0?{}:n[s][o],e.length===2?n[s][o]=t:k(e.slice(2),n[s][o],t)):(n[s]=n[s]===void 0?{}:g({},n[s]),k(e.slice(1),n[s],t))},S=(e,n)=>{if(!E(e)){S(x(e),n);return}if(e.length===0||n===void 0)return;const t=e[0];if(e.length===1){delete n[t];return}if(n[t]===void 0)return;const s=e[1],o=X(s);h(o)?e.length===2?delete n[t][o]:S(e.slice(2),n[t][o]):S(e.slice(1),n[t][o])},A=(e,n)=>{if(!E(e)){A(x(e),n);return}S(e,n);const t=e.map((s,o)=>o===0?[...e]:[...e].slice(0,-1*o));for(const s of t){const o=m(s,n);o!==void 0&&(E(o)?(o.length===0||o.every(u=>T(u||{}).length===0))&&S(s,n):T(o||{}).length===0&&S(s,n))}},Oe=e=>{const{value:n,type:t,checked:s,options:o,files:u,multiple:w,valueAsNumber:d}=e.target;switch(t){default:return n;case"checkbox":return s;case"range":return d;case"number":if(n==="")return null;const y=Number.parseFloat(n);return h(y)?y:void 0;case"file":return w?u:u.item(0);case"select-multiple":return[...o].filter(N=>N.selected).map(N=>N.value)}},L=(e,n)=>{const t=m(e,n);if(t&&!E(t)){const s=g({},n);return A(e,s),s}return n},$=(e,n,t)=>{const s=m(e,n);if(s&&E(s)){const o=g({},n),u=t([...s]);return k(e,o,u),o}return n},P=(e,n,t,s)=>{const o=m(n,e);if(E(o)){const u=[...o],w=u[t];return u[t]=u[s],u[s]=w,u}return o},K=(e,n,t)=>`${t||""} ${n||""} ${e.type?`error-${e.type}`:""}`.trim(),U=e=>e&&e.focus?(e.focus(),!0):!1;return({defaultValues:e={},mode:n="onSubmit",classNameError:t=null,shouldFocusError:s=!1,resolver:o=u=>({})})=>{const[u,w]=f.useState(e),[d,y]=f.useState({}),N=f.useRef(!1),V=f.useRef(!1),C=f.useRef(new Map),ee=f.useRef(""),W=ue(),Ee=n==="onBlur",ke=n==="onChange",D=f.useCallback(r=>{ee.current=q(r),w(J(r))},[]);f.useEffect(()=>(D(e),()=>{F={}}),[e,D]);const v=f.useCallback((r=null,i=d)=>r===null?T(i||{}).length>0:m(r,i)!==void 0,[d]),I=f.useCallback((r,i=d)=>{if(v(r)){const c=g({},i);return A(r,c),y(c),c}return i},[d,v]),ge=f.useCallback(r=>{const i=g({},d);for(const c of T(r))v(c)&&A(c,i),k(c,i,r[c]);return y(i),i},[d,v]),Ce=(r="",i=u)=>{const c=o(i),a=m(r,c),p=g({},c);return A(r,p),a!==void 0&&k(r,p,a),y(p),p},ne=(r="")=>m(r,u),R=(r,i,c=!0)=>{w(a=>{const p=g({},r===""?i:a);if(k(r,p,i),V.current=ee.current!==q(p),c&&(v(r)||ke)){const b=I(r),B=m(r,o(p));B&&(k(r,b,B),y(b))}return p}),N.current=!0},Ne=(r,i)=>{const c=[...m(r,u),i];R(r,c,!1);const a=L(r,d);return y(a),c},Se=(r,i)=>{const c=[i,...m(r,u)];R(r,c,!1);let a=L(r,d);return a=$(r,a,p=>[void 0,...p]),y(a),c},Re=(r,i)=>{const c=m(r,u).filter((p,b)=>i!==b);R(r,c,!1);let a=L(r,d);return a=I(`${r}.${i}`,a),a=$(r,a,p=>(p.splice(i,1),p)),y(a),c},je=(r,i,c)=>{const a=P(u,r,i,c);R(r,a);const p=P(d,r,i,c),b=g({},d);return k(r,b,p),y(b),a},Te=f.useCallback(r=>{r&&C.current.set(r.name,r)},[C]),Ae=f.useCallback(r=>C.current.get(r),[C]),Fe=f.useCallback((r,i)=>{i&&C.current.set(r,i)},[C]),re=r=>{R(r.target.name,Oe(r))},te=r=>{const{name:i}=r.target,c=m(i,o(u));if(c){const a=g({},d);k(i,a,c),y(a),s&&U(C.current.get(i))}else I(i)},xe=(r,i="")=>{const c=ne(r),a=v(r);return O.key=O.name=r,O["aria-invalid"]=a?ve:be,O.className=K({},a?t:!1,i),O.onChange=re,O.onBlur=Ee?te:void 0,O.ref=Te,c===!0||c===!1?(O.checked=c,O.value=void 0):(O.value=`${c}`=="0"?c:c||"",O.checked=void 0),O},De=r=>i=>{i&&i.preventDefault&&i.preventDefault();const c=o(u);if(y(c),v(null,c)){if(s){let a=!1;C.current.forEach((p,b)=>{!a&&v(b,c)&&(a=U(p))})}return!1}return r(u),!0},Ie=f.useCallback((r=e,i=!0)=>{D(r),N.current=!1,V.current=!1,i&&y(o(r))},[e,D,o]),Be=f.useCallback(({for:r,children:i})=>{const c=m(r,d);return!c||E(c)?!1:Z(i)?i(c):M("span",{className:K(c,t),children:c.message})},[d,t]),Me=f.useCallback(({children:r,focusable:i=!1})=>{if(!v())return!1;const c=Array.from(C.current).filter(p=>v(p[0])).map(p=>{const[b,B]=p;return{error:m(b,d),element:B}});if(c.length===0)return!1;const a=c.map(({error:p,element:b})=>M("li",{className:K(p,t),children:i?M("a",{onClick:()=>U(b),children:p.message}):p.message},W(p)));return Z(r)?r(a):a},[d,v,t,W]);return{getValue:ne,setValue:R,register:xe,onChange:re,onBlur:te,getRef:Ae,setRef:Fe,trigger:Ce,handleSubmit:De,hasError:v,clearError:I,setErrors:ge,append:Ne,prepend:Se,remove:Re,swap:je,key:W,reset:Ie,Error:Be,Errors:Me,formState:{errors:d,isValid:!v(),isTouched:N.current,isDirty:V.current}}}});
