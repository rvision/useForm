var Xe=Object.defineProperty,Ze=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var ve=(p,a,m)=>a in p?Xe(p,a,{enumerable:!0,configurable:!0,writable:!0,value:m}):p[a]=m,R=(p,a)=>{for(var m in a||(a={}))$e.call(a,m)&&ve(p,m,a[m]);if(Ee)for(var m of Ee(a))Pe.call(a,m)&&ve(p,m,a[m]);return p},V=(p,a)=>Ze(p,qe(a));(function(p,a){typeof exports=="object"&&typeof module!="undefined"?a(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],a):(p=typeof globalThis!="undefined"?globalThis:p||self,a(p["@rvision/use-form"]={},p.react))})(this,function(p,a){"use strict";function m(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var _e=m(a);const q=r=>typeof r=="function",b={},M=()=>b;let we=9999;const T=new WeakMap,Re=r=>{let s=T.get(r);return s||(s=(++we).toString(36).split("").reduce((o,c)=>c+o,""),T.set(r,s)),s},$=r=>{let s;return r instanceof Set?s=new Set([...r]):s=Array.isArray(r)?[...r]:R({},r),T.has(r)&&(T.set(s,T.get(r)),T.delete(r)),s},Ne=/\[([^\]]+)\]/g;let j=new Map;const z=r=>{if(!r)return[];let s=j.get(r);return s||(s=r.replace(Ne,".$1").split(".").map(o=>isNaN(parseInt(o,10))?o:+o),j.set(r,s),s)},Se=()=>{j=new Map},U=(r,s)=>{if(s!==void 0)return r.length===0?s:U(r.slice(1),s[r[0]])},N=(r,s)=>U(z(r),s),P=(r,s,o)=>{const{length:c}=r;if(c===0)return;const i=r[0];if(c===1){s[i]=o;return}const y=s[i]!==void 0,l=r[1],_=!isNaN(l);s[i]=y?$(s[i]):_?[]:{},_&&(s[i][l]=s[i][l]===void 0?{}:$(s[i][l])),P(r.slice(1),s[i],o)},k=(r,s,o)=>{const c=R({},s);return P(z(r),c,o),c},I=(r,s)=>{const{length:o}=r;if(o===0||s===void 0)return;const c=r[0];if(o===1){delete s[c];return}I(r.slice(1),s[c])},W=r=>Object.keys(r||b).length===0,ke=(r,s)=>{I(r,s),r.map((c,i)=>i===0?[...r]:[...r].slice(0,-1*i)).forEach(c=>{const i=U(c,s);i!==void 0&&(Array.isArray(i)?(i.length===0||i.every(W))&&(i.message||I(c,s)):W(i)&&I(c,s))})},B=(r,s)=>{const o=R({},s);return ke(z(r),o),o},Ae=r=>{const{value:s,type:o,checked:c,options:i,files:y,multiple:l,valueAsNumber:_,valueAsDate:g}=r.target;switch(o){case"checkbox":return c;case"range":return _;case"date":return g;case"number":{if(s==="")return null;const v=Number.parseFloat(s);return isNaN(v)?void 0:+v}case"file":return l?y:y.item(0);case"select-multiple":return[...i].filter(v=>v.selected).map(v=>v.value);default:return s}},ee=(r,s,o)=>{if(Array.isArray(r)){const c=[...r];return[c[s],c[o]]=[c[o],c[s]],c}return r},Y=(r,s,o)=>`${o||""} ${s||""} ${r.type?`error-${r.type}`:""}`.trim(),Oe=r=>s=>{let o={};try{r.validateSync(s,{abortEarly:!1})}catch(c){for(const i of c.inner){const y=N(i.path,o)||{};y.message=i.message,y.type=i.type,o=k(i.path,o,y)}}return o},Te=r=>s=>{let o={};const c=r.safeParse(s);return c.success||c.error.errors.forEach(i=>{const y=i.path.join("."),l=N(y,o)||{};l.message=i.message,l.type=i.type,o=k(y,o,l)}),o};var re={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ce=_e.default,be=Symbol.for("react.element"),Me=Symbol.for("react.fragment"),he=Object.prototype.hasOwnProperty,xe=Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,De={key:!0,ref:!0,__self:!0,__source:!0};function se(r,s,o){var c,i={},y=null,l=null;o!==void 0&&(y=""+o),s.key!==void 0&&(y=""+s.key),s.ref!==void 0&&(l=s.ref);for(c in s)he.call(s,c)&&!De.hasOwnProperty(c)&&(i[c]=s[c]);if(r&&r.defaultProps)for(c in s=r.defaultProps,s)i[c]===void 0&&(i[c]=s[c]);return{$$typeof:be,type:r,key:y,ref:l,props:i,_owner:xe.current}}F.Fragment=Me,F.jsx=se,F.jsxs=se,re.exports=F;const H=re.exports.jsx,te="aria-invalid",ne=r=>JSON.stringify(r,(s,o)=>o instanceof Set?[...o].sort():o),d=r=>{const s=a.useRef(r);return s.current=r,a.useCallback((...o)=>s.current(...o),[])},E={name:"",[te]:!1,className:"",onChange:M,onBlur:M,ref:M,value:"",checked:!1},Ie=({defaultValues:r,mode:s,classNameError:o,shouldFocusError:c=!1,resolver:i=M})=>{const[y,l]=a.useState({values:r||b,errors:{}}),{values:_,errors:g}=y,v=a.useRef(!1),K=a.useRef(!1),J=a.useRef(!1),A=a.useRef(new Map),oe=a.useRef(),G=s==="onSubmit",ce=s==="onBlur",ie=s==="onChange",Be=!G&&!ce&&!ie,h=e=>l(t=>V(R({},t),{errors:e})),Q=a.useCallback(e=>{const t=e||b;oe.current=ne(t),l(n=>V(R({},n),{values:R({},t)}))},[]);a.useEffect(()=>(Q(r),Se),[r,Q]);const X=e=>{const t=A.current.get(e);return t&&t.focus?(t.focus(),!0):!1},C=d((e="")=>(A.current.has(e)||A.current.set(e,null),N(e,_))),L=d((e="",t=g)=>N(e,t)),S=d((e="",t=g)=>e===""?!W(t):N(e,t)!==void 0),ae=d((e,t=g)=>{let n=t;return S(e,t)&&(n=B(e,t)),n}),ue=d((e="")=>new Promise((t=M)=>{l(n=>{let u=i(n.values);if(e!==""){const w=Array.isArray(e)?e:[e];let D=R({},n.errors);w.forEach(Z=>{const ge=N(Z,u);D=B(Z,D),ge!==void 0&&(D=k(Z,D,ge))}),u=D}const f=V(R({},n),{errors:u});return t(f),f})})),fe=ie||J.current&&Be,Fe=fe&&!G,de=d((e,t)=>{let n=g;if((fe||S(e))&&(n=B(e,n),!G)){const u=N(e,i(t));u&&(n=k(e,n,u))}return n}),O=d((e,t,n=de)=>l(u=>{const f=k(e,u.values,t);return v.current=!0,K.current=oe.current!==ne(f),{values:f,errors:n(e,f)}})),x=d((e,t)=>Fe?de:()=>{let n=g;const u=L(e);if(Array.isArray(u)){const f=t(u);u.message&&(f.message=u.message,f.type=u.type),n=f.length>0?k(e,g,f):B(e,n)}return n}),Je=d(e=>O(e,[],x(e,()=>[]))),Le=d((e,t)=>O(e,[...C(e),t],x(e,n=>n))),Ve=d((e,t)=>O(e,[t,...C(e)],x(e,n=>[void 0,...n]))),je=d((e,t)=>O(e,C(e).filter((n,u)=>u!==t),x(e,n=>n.filter((u,f)=>f!==t)))),ze=d((e,t,n)=>O(e,ee(C(e),t,n),x(e,u=>ee(u,t,n)))),Ue=d(e=>A.current.get(e)),pe=d((e,t)=>{t&&A.current.set(e,t)}),We=d(e=>e&&pe(e.name,e)),le=d(e=>O(e.target.name,Ae(e))),ye=d(e=>{const{name:t}=e.target,n=N(t,i(_));n?(h(k(t,g,n)),c&&X(t)):h(ae(t))}),Ye=d((e,t="")=>{const n=C(e),u=S(e);return E.name=e,E[te]=u,E.className=Y(b,u?o:"",t),E.onChange=le,E.ref=We,E.onBlur=ce?ye:void 0,n===!0||n===!1?(E.checked=n,E.value=void 0):(E.value=`${n}`=="0"?n:n||"",E.checked=void 0),E}),He=d((e=r,t=!0)=>{Q(e),v.current=!1,K.current=!1,t&&ue("",e)}),Ke=e=>t=>{t&&t.preventDefault();const n=i(_);if(h(n),S("",n)){if(c){let u=!1;A.current.forEach((f,w)=>{!u&&S(w,n)&&(u=X(w))})}return J.current=!0,!1}return e(_),!0},Ge=d(({for:e,children:t})=>{const n=L(e,g);return!n||!n.message?!1:q(t)?t(n):H("span",{className:Y(n,o),children:n.message})}),me=!S(),Qe=d(({children:e,focusable:t=!1})=>{if(me)return!1;const u=Array.from(A.current).filter(f=>!!f[1]).map(f=>f[0]).filter(f=>S(f,g)).sort().map(f=>{const w=L(f);return H("li",{className:Y(w,o),children:t?H("a",{onClick:()=>X(f),children:w.message}):w.message},f)});return q(e)?e(u):u});return{getValue:C,setValue:O,register:Ye,onChange:le,onBlur:ye,getRef:Ue,setRef:pe,trigger:ue,handleSubmit:Ke,hasError:S,getError:L,clearError:e=>h(ae(e)),setErrors:e=>{J.current=!0,h(e)},array:{clear:Je,append:Le,prepend:Ve,remove:je,swap:ze},key:Re,Error:Ge,Errors:Qe,formState:{errors:g,isValid:me,isTouched:v.current,isDirty:K.current,hadError:J.current,reset:He}}};p.default=Ie,p.yupResolver=Oe,p.zodResolver=Te,Object.defineProperty(p,"__esModule",{value:!0}),p[Symbol.toStringTag]="Module"});
