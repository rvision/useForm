var Ze=Object.defineProperty,qe=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,er=Object.prototype.propertyIsEnumerable;var _e=(l,u,v)=>u in l?Ze(l,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):l[u]=v,N=(l,u)=>{for(var v in u||(u={}))Pe.call(u,v)&&_e(l,v,u[v]);if(ge)for(var v of ge(u))er.call(u,v)&&_e(l,v,u[v]);return l},Z=(l,u)=>qe(l,$e(u));(function(l,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(l=typeof globalThis!="undefined"?globalThis:l||self,u(l["@rvision/use-form"]={},l.react))})(this,function(l,u){"use strict";function v(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var we=v(u);const q=r=>!Number.isNaN(r),$=r=>typeof r=="function",{isArray:A}=Array,P=r=>JSON.stringify(r,(s,o)=>o instanceof Set?[...o].sort():o),ee=Object.keys,x={},h=()=>x;let Re=9999;const C=new WeakMap,Se=r=>{let s=C.get(r);return s||(s=(++Re).toString(36).split("").reduce((o,c)=>c+o,""),C.set(r,s)),s},re=r=>{let s;return r instanceof Set?s=new Set([...r]):s=A(r)?[...r]:N({},r),C.has(r)&&(C.set(s,C.get(r)),C.delete(r)),s},Ne=/\[([^\]]+)\]/g;let z=new Map;const K=r=>{if(!r)return[];let s=z.get(r);return s||(s=r.replace(Ne,".$1").split("."),z.set(r,s),s)},ke=()=>{z=new Map},U=(r,s)=>{if(s!==void 0)return r.length===0?s:U(r.slice(1),s[r[0]])},R=(r,s)=>U(K(r),s),se=(r,s,o)=>{const{length:c}=r;if(c===0)return;const i=r[0];if(c===1){s[i]=o;return}const m=s[i]!==void 0,y=parseInt(r[1],10),_=q(y);s[i]=m?re(s[i]):_?[]:{},_&&(s[i][y]=s[i][y]===void 0?{}:re(s[i][y])),se(r.slice(1),s[i],o)},k=(r,s,o)=>{const c=N({},s);return se(K(r),c,o),c},I=(r,s)=>{const{length:o}=r;if(o===0||s===void 0)return;const c=r[0];if(o===1){delete s[c];return}I(r.slice(1),s[c])},te=r=>ee(r||x).length===0,Oe=(r,s)=>{I(r,s),r.map((c,i)=>i===0?[...r]:[...r].slice(0,-1*i)).forEach(c=>{const i=U(c,s);i!==void 0&&(A(i)?(i.length===0||i.every(te))&&(i.message||I(c,s)):te(i)&&I(c,s))})},J=(r,s)=>{const o=N({},s);return Oe(K(r),o),o},Te=r=>{const{value:s,type:o,checked:c,options:i,files:m,multiple:y,valueAsNumber:_,valueAsDate:E}=r.target;switch(o){case"checkbox":return c;case"range":return _;case"date":return E;case"number":{if(s==="")return null;const w=Number.parseFloat(s);return q(w)?w:void 0}case"file":return y?m:m.item(0);case"select-multiple":return[...i].filter(w=>w.selected).map(w=>w.value);default:return s}},ne=(r,s,o)=>{if(A(r)){const c=[...r];return[c[s],c[o]]=[c[o],c[s]],c}return r},W=(r,s,o)=>`${o||""} ${s||""} ${r.type?`error-${r.type}`:""}`.trim();var oe={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var be=we.default,he=Symbol.for("react.element"),Ce=Symbol.for("react.fragment"),Me=Object.prototype.hasOwnProperty,Ae=be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xe={key:!0,ref:!0,__self:!0,__source:!0};function ce(r,s,o){var c,i={},m=null,y=null;o!==void 0&&(m=""+o),s.key!==void 0&&(m=""+s.key),s.ref!==void 0&&(y=s.ref);for(c in s)Me.call(s,c)&&!xe.hasOwnProperty(c)&&(i[c]=s[c]);if(r&&r.defaultProps)for(c in s=r.defaultProps,s)i[c]===void 0&&(i[c]=s[c]);return{$$typeof:he,type:r,key:m,ref:y,props:i,_owner:Ae.current}}j.Fragment=Ce,j.jsx=ce,j.jsxs=ce,oe.exports=j;const Y=oe.exports.jsx,p=r=>{const s=u.useRef(r);return s.current=r,u.useCallback((...o)=>s.current(...o),[])},g={key:"",name:"","aria-invalid":!1,className:"",onChange:h,onBlur:h,ref:h,value:"",checked:!1},De=({defaultValues:r,mode:s,classNameError:o,shouldFocusError:c=!1,resolver:i=h})=>{const[m,y]=u.useState({values:r||x,errors:{}}),{values:_,errors:E}=m,w=u.useRef(!1),H=u.useRef(!1),L=u.useRef(!1),O=u.useRef(new Map),ie=u.useRef(),G=s==="onSubmit",ae=s==="onBlur",ue=s==="onChange",Ie=!G&&!ae&&!ue,T=e=>y(t=>Z(N({},t),{errors:e})),Q=u.useCallback(e=>{const t=e||x;ie.current=P(t),y(n=>Z(N({},n),{values:N({},t)}))},[]);u.useEffect(()=>(Q(r),ke),[r,Q]);const X=e=>{const t=O.current.get(e);return t&&t.focus?(t.focus(),!0):!1},M=p((e="")=>(O.current.has(e)||O.current.set(e,null),R(e,_))),V=p((e="",t=E)=>R(e,t)),S=p((e="",t=E)=>e===""?ee(t).length>0:R(e,t)!==void 0),fe=p((e,t=E)=>{let n=t;return S(e,t)&&(n=J(e,t)),n}),de=p((e="",t=_)=>new Promise((n=h)=>{const a=i(t);if(e===""){T(a),n(a);return}const f=A(e)?e:[e];let d=N({},E);f.forEach(B=>{const F=R(B,a);d=J(B,d),F!==void 0&&(d=k(B,d,F))}),T(d),n(d)})),pe=ue||L.current&&Ie,Je=pe&&!G,le=p((e,t)=>{let n=E;if((pe||S(e))&&(n=J(e,n),!G)){const a=R(e,i(t));a&&(n=k(e,n,a))}return n}),b=p((e,t,n=le)=>new Promise((a=h)=>{y(f=>{const d=k(e,f.values,t);w.current=!0,H.current=ie.current!==P(d);const B=n(e,d),F={values:d,errors:B};return a(F),F})})),D=p((e,t,n)=>Je&&t?le:()=>{let a=E;const f=V(e);if(A(f)){const d=n(f);f.message&&(d.message=f.message,d.type=f.type),a=d.length>0?k(e,E,d):J(e,a)}return a}),je=p((e,t=!1)=>b(e,[],D(e,t,()=>[]))),Le=p((e,t,n=!1)=>b(e,[...M(e),t],D(e,n,a=>a))),Ve=p((e,t,n=!1)=>b(e,[t,...M(e)],D(e,n,a=>[void 0,...a]))),ze=p((e,t,n=!1)=>b(e,M(e).filter((a,f)=>f!==t),D(e,n,a=>a.filter((f,d)=>d!==t)))),Ke=p((e,t,n,a=!1)=>b(e,ne(M(e),t,n),D(e,a,f=>ne(f,t,n)))),Ue=p(e=>O.current.get(e)),me=p((e,t)=>{t&&O.current.set(e,t)}),We=p(e=>e&&me(e.name,e)),ye=p(e=>b(e.target.name,Te(e))),Ee=p(e=>{const{name:t}=e.target,n=R(t,i(_));n?(T(k(t,E,n)),c&&X(t)):T(fe(t))}),Ye=p((e,t="")=>{const n=M(e),a=S(e);return g.name=e,g["aria-invalid"]=a,g.className=W(x,a?o:"",t),g.onChange=ye,g.ref=We,g.onBlur=ae?Ee:void 0,n===!0||n===!1?(g.checked=n,g.value=void 0):(g.value=`${n}`=="0"?n:n||"",g.checked=void 0),g}),He=p((e=r,t=!0)=>{Q(e),w.current=!1,H.current=!1,t&&de("",e)}),Ge=e=>t=>{t&&t.preventDefault();const n=i(_);if(T(n),S("",n)){if(c){let a=!1;O.current.forEach((f,d)=>{!a&&S(d,n)&&(a=X(d))})}return L.current=!0,!1}return e(_),!0},Qe=p(({for:e,children:t})=>{const n=V(e,E);return!n||!n.message?!1:$(t)?t(n):Y("span",{className:W(n,o),children:n.message})}),ve=!S(),Xe=p(({children:e,focusable:t=!1})=>{if(ve)return!1;const a=Array.from(O.current).filter(f=>!!f[1]).map(f=>f[0]).filter(f=>S(f,E)).sort().map(f=>{const d=V(f);return Y("li",{className:W(d,o),children:t?Y("a",{onClick:()=>X(f),children:d.message}):d.message},f)});return $(e)?e(a):a});return{getValue:M,setValue:b,register:Ye,onChange:ye,onBlur:Ee,getRef:Ue,setRef:me,trigger:de,handleSubmit:Ge,hasError:S,getError:V,clearError:e=>T(fe(e)),setErrors:e=>{L.current=!0,T(e)},array:{clear:je,append:Le,prepend:Ve,remove:ze,swap:Ke},key:Se,reset:He,Error:Qe,Errors:Xe,formState:{errors:E,isValid:ve,isTouched:w.current,isDirty:H.current,hadError:L.current}}},Be=r=>s=>{let o={};try{r.validateSync(s,{abortEarly:!1})}catch(c){for(const i of c.inner){const m=R(i.path,o)||{};m.message=i.message,m.type=i.type,o=k(i.path,o,m)}}return o},Fe=r=>s=>{let o={};const c=r.safeParse(s);return c.success||c.error.errors.forEach(i=>{const m=i.path.join("."),y=R(m,o)||{};y.message=i.message,y.type=i.type,o=k(m,o,y)}),o};l.default=De,l.yupResolver=Be,l.zodResolver=Fe,Object.defineProperty(l,"__esModule",{value:!0}),l[Symbol.toStringTag]="Module"});
