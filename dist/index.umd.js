var $e=Object.defineProperty,Pe=Object.defineProperties;var er=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var rr=Object.prototype.hasOwnProperty,sr=Object.prototype.propertyIsEnumerable;var we=(l,u,E)=>u in l?$e(l,u,{enumerable:!0,configurable:!0,writable:!0,value:E}):l[u]=E,N=(l,u)=>{for(var E in u||(u={}))rr.call(u,E)&&we(l,E,u[E]);if(Re)for(var E of Re(u))sr.call(u,E)&&we(l,E,u[E]);return l},ee=(l,u)=>Pe(l,er(u));(function(l,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(l=typeof globalThis!="undefined"?globalThis:l||self,u(l["@rvision/use-form"]={},l.react))})(this,function(l,u){"use strict";function E(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var Se=E(u);const re=r=>!Number.isNaN(r),Ne=r=>parseInt(r,10),se=r=>typeof r=="function",{isArray:F}=Array,te=r=>JSON.stringify(r,(s,o)=>o instanceof Set?[...o]:o),ne=Object.keys,D={},M=()=>D;let ke=9999;const A=new WeakMap,Oe=r=>{let s=A.get(r);return s||(s=(++ke).toString(36).split("").reduce((o,c)=>c+o,""),A.set(r,s)),s},j=r=>{let s;return r instanceof Set?s=new Set([...r]):s=F(r)?[...r]:N({},r),A.has(r)&&(A.set(s,A.get(r)),A.delete(r)),s},Te=/\[([^\]]+)\]/g;let L=new Map;const V=r=>{if(!r)return[];let s=L.get(r);return s||(s=r.replace(Te,".$1").split("."),L.set(r,s),s)},be=()=>{L=new Map},z=(r,s)=>{if(s!==void 0)return r.length===0?s:z(r.slice(1),s[r[0]])},v=(r,s)=>z(V(r),s),K=(r,s,o)=>{const{length:c}=r;if(c>0){const i=r[0];if(c===1){s[i]=o;return}const m=s[i]===void 0,y=Ne(r[1]);if(re(y))return s[i]=m?[]:j(s[i]),s[i][y]=s[i][y]===void 0?{}:j(s[i][y]),K(r.slice(2),s[i][y],o);s[i]=m?{}:j(s[i]),K(r.slice(1),s[i],o)}},k=(r,s,o)=>{const c=N({},s);return K(V(r),c,o),c},I=(r,s)=>{const{length:o}=r;if(o===0||s===void 0)return;const c=r[0];if(o===1){delete s[c];return}I(r.slice(1),s[c])},oe=r=>ne(r||D).length===0,Ce=(r,s)=>{I(r,s),r.map((c,i)=>i===0?[...r]:[...r].slice(0,-1*i)).forEach(c=>{const i=z(c,s);i!==void 0&&(F(i)?(i.length===0||i.every(oe))&&(i.message||I(c,s)):oe(i)&&I(c,s))})},U=(r,s)=>{const o=N({},s);return Ce(V(r),o),o},Me=r=>{const{value:s,type:o,checked:c,options:i,files:m,multiple:y,valueAsNumber:w,valueAsDate:_}=r.target;switch(o){case"checkbox":return c;case"range":return w;case"date":return _;case"number":{if(s==="")return null;const S=Number.parseFloat(s);return re(S)?S:void 0}case"file":return y?m:m.item(0);case"select-multiple":return[...i].filter(S=>S.selected).map(S=>S.value);default:return s}},ce=(r,s,o)=>{const c=v(r,s);return c&&F(c)?k(r,s,o(c)):s},ie=(r,s,o)=>{if(F(r)){const c=[...r];return[c[s],c[o]]=[c[o],c[s]],c}return r},W=(r,s,o)=>`${o||""} ${s||""} ${r.type?`error-${r.type}`:""}`.trim();var ue={exports:{}},J={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae=Se.default,he=Symbol.for("react.element"),De=Symbol.for("react.fragment"),xe=Object.prototype.hasOwnProperty,Be=Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fe={key:!0,ref:!0,__self:!0,__source:!0};function ae(r,s,o){var c,i={},m=null,y=null;o!==void 0&&(m=""+o),s.key!==void 0&&(m=""+s.key),s.ref!==void 0&&(y=s.ref);for(c in s)xe.call(s,c)&&!Fe.hasOwnProperty(c)&&(i[c]=s[c]);if(r&&r.defaultProps)for(c in s=r.defaultProps,s)i[c]===void 0&&(i[c]=s[c]);return{$$typeof:he,type:r,key:m,ref:y,props:i,_owner:Be.current}}J.Fragment=De,J.jsx=ae,J.jsxs=ae,ue.exports=J;const Y=ue.exports.jsx,p=r=>{const s=u.useRef(r);return s.current=r,u.useCallback((...o)=>s.current(...o),[])},R={key:"",name:"","aria-invalid":!1,className:"",onChange:M,onBlur:M,ref:M,value:"",checked:!1},Ie=({defaultValues:r,mode:s,classNameError:o,shouldFocusError:c=!1,resolver:i=M})=>{const[m,y]=u.useState({values:r||D,errors:{}}),{values:w,errors:_}=m,S=u.useRef(!1),H=u.useRef(!1),G=u.useRef(!1),T=u.useRef(new Map),fe=u.useRef(),Q=s==="onSubmit",de=s==="onBlur",pe=s==="onChange",Le=!Q&&!de&&!pe,b=e=>y(t=>ee(N({},t),{errors:e})),X=u.useCallback(e=>{const t=e||D;fe.current=te(t),y(n=>ee(N({},n),{values:N({},t)}))},[]);u.useEffect(()=>(X(r),be),[r,X]);const Z=e=>{const t=T.current.get(e);return t&&t.focus?(t.focus(),!0):!1},q=p((e="")=>(T.current.has(e)||T.current.set(e,null),v(e,w))),le=p((e="",t=_)=>v(e,t)),O=p((e="",t=_)=>e===""?ne(t).length>0:v(e,t)!==void 0),$=p((e,t=_)=>{let n=t;return O(e,t)&&(n=U(e,t)),n}),me=p((e="",t=w)=>new Promise((n=M)=>{const a=i(t);if(e===""){b(a),n(a);return}const f=isArray(e)?e:[e];let d=N({},_);f.forEach(g=>{const B=v(g,a);d=U(g,d),B!==void 0&&(d=k(g,d,B))}),b(d),n(d)})),ye=pe||G.current&&Le,x=ye&&!Q,h=p((e,t)=>{let n=_;if((ye||O(e))&&(n=U(e,n),!Q)){const a=v(e,i(t));a&&(n=k(e,n,a))}return n}),P=p((e,t,n)=>{const a=v(e,i(n)),f=v(e,t);return f&&(delete f.message,delete f.type,(a==null?void 0:a.message)&&(f.message=a.message,f.type=a.type)),t}),C=p((e,t,n=h)=>new Promise((a=M)=>{y(f=>{const d=k(e,N({},e===""?t:w),t);S.current=!0,H.current=fe.current!==te(d);const g=n(e,d),B={values:d,errors:g};return a(B),B})})),Ve=p(e=>C(e,[],x?h:()=>[])),ze=p((e,t)=>{const n=x?h:()=>_;return C(e,[...v(e,w),t],n)}),Ke=p((e,t)=>{const n=x?h:(a,f)=>{let d=ce(e,_,g=>[void 0,...g]);return P(e,d,f)};return C(e,[t,...v(e,w)],n)}),Ue=p((e,t)=>{const n=x?h:(a,f)=>{let d=$(`${e}.${t}`,N({},_));return d=ce(e,d,g=>(g.splice(t,1),g)),P(e,d,f)};return C(e,v(e,w).filter((a,f)=>f!==t),n)}),We=p((e,t,n)=>{const a=x?h:(f,d)=>{let g=ie(v(e,_),t,n);return g=g?k(e,_,g):_,P(e,g,d)};return C(e,ie(q(e),t,n),a)}),Ye=p(e=>T.current.get(e)),_e=p((e,t)=>{t&&T.current.set(e,t)}),He=p(e=>e&&_e(e.name,e)),ve=p(e=>C(e.target.name,Me(e))),ge=p(e=>{const{name:t}=e.target,n=v(t,i(w));n?(b(k(t,_,n)),c&&Z(t)):b($(t))}),Ge=p((e,t="")=>{const n=q(e),a=O(e);return R.name=e,R["aria-invalid"]=a,R.className=W(D,a?o:"",t),R.onChange=ve,R.ref=He,R.onBlur=de?ge:void 0,n===!0||n===!1?(R.checked=n,R.value=void 0):(R.value=`${n}`=="0"?n:n||"",R.checked=void 0),R}),Qe=e=>t=>{t&&(t==null||t.preventDefault());const n=i(w);if(b(n),O("",n)){if(c){let a=!1;T.current.forEach((f,d)=>{!a&&O(d,n)&&(a=Z(d))})}return G.current=!0,!1}return e(w),!0},Xe=p((e=r,t=!0)=>{X(e),S.current=!1,H.current=!1,t&&me("",e)}),Ze=p(({for:e,children:t})=>{const n=le(e,_);return(n==null?void 0:n.message)?se(t)?t(n):Y("span",{className:W(n,o),children:n.message}):!1}),Ee=!O(),qe=p(({children:e,focusable:t=!1})=>{if(Ee)return!1;const a=Array.from(T.current).filter(f=>!!f[1]).map(f=>f[0]).filter(f=>O(f,_)).sort().map(f=>{const d=v(f,_);return Y("li",{className:W(d,o),children:t?Y("a",{onClick:()=>Z(f),children:d.message}):d.message},f)});return se(e)?e(a):a});return{getValue:q,setValue:C,register:Ge,onChange:ve,onBlur:ge,getRef:Ye,setRef:_e,trigger:me,handleSubmit:Qe,hasError:O,getError:le,clearError:e=>b($(e)),setErrors:e=>{G.current=!0,b(e)},array:{append:ze,prepend:Ke,remove:Ue,swap:We,clear:Ve},key:Oe,reset:Xe,Error:Ze,Errors:qe,formState:{errors:_,isValid:Ee,isTouched:S.current,isDirty:H.current}}},Je=r=>s=>{let o={};try{r.validateSync(s,{abortEarly:!1})}catch(c){for(const i of c.inner){const m=v(i.path,o)||{};m.message=i.message,m.type=i.type,o=k(i.path,o,m)}}return o},je=r=>s=>{let o={};const c=r.safeParse(s);return c.success||c.error.errors.forEach(i=>{const m=i.path.join("."),y=v(m,o)||{};y.message=i.message,y.type=i.type,o=k(m,o,y)}),o};l.default=Ie,l.yupResolver=Je,l.zodResolver=je,Object.defineProperty(l,"__esModule",{value:!0}),l[Symbol.toStringTag]="Module"});
