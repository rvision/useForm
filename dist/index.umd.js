var qe=Object.defineProperty,$e=Object.defineProperties;var Pe=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var er=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable;var ge=(l,u,E)=>u in l?qe(l,u,{enumerable:!0,configurable:!0,writable:!0,value:E}):l[u]=E,k=(l,u)=>{for(var E in u||(u={}))er.call(u,E)&&ge(l,E,u[E]);if(ve)for(var E of ve(u))rr.call(u,E)&&ge(l,E,u[E]);return l},q=(l,u)=>$e(l,Pe(u));(function(l,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(l=typeof globalThis!="undefined"?globalThis:l||self,u(l["@rvision/use-form"]={},l.react))})(this,function(l,u){"use strict";function E(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var we=E(u);const $=r=>!Number.isNaN(r),Re=r=>parseInt(r,10),P=r=>typeof r=="function",{isArray:A}=Array,ee=r=>JSON.stringify(r,(s,o)=>o instanceof Set?[...o].sort():o),re=Object.keys,x={},h=()=>x;let Se=9999;const C=new WeakMap,ke=r=>{let s=C.get(r);return s||(s=(++Se).toString(36).split("").reduce((o,c)=>c+o,""),C.set(r,s)),s},se=r=>{let s;return r instanceof Set?s=new Set([...r]):s=A(r)?[...r]:k({},r),C.has(r)&&(C.set(s,C.get(r)),C.delete(r)),s},Ne=/\[([^\]]+)\]/g;let z=new Map;const K=r=>{if(!r)return[];let s=z.get(r);return s||(s=r.replace(Ne,".$1").split("."),z.set(r,s),s)},Oe=()=>{z=new Map},U=(r,s)=>{if(s!==void 0)return r.length===0?s:U(r.slice(1),s[r[0]])},R=(r,s)=>U(K(r),s),W=(r,s,o)=>{const{length:c}=r,i=r[0];switch(c){case 0:s=o;return;case 1:s[i]=o;return;default:{const y=s[i]===void 0,m=r[1],g=$(Re(m)),_=g?[]:{};s[i]=y?_:se(s[i]),g?(s[i][m]=s[i][m]===void 0?{}:se(s[i][m]),W(r.slice(2),s[i][m],o)):W(r.slice(1),s[i],o)}break}},N=(r,s,o)=>{const c=k({},s);return W(K(r),c,o),c},I=(r,s)=>{const{length:o}=r;if(o===0||s===void 0)return;const c=r[0];if(o===1){delete s[c];return}I(r.slice(1),s[c])},te=r=>re(r||x).length===0,Te=(r,s)=>{I(r,s),r.map((c,i)=>i===0?[...r]:[...r].slice(0,-1*i)).forEach(c=>{const i=U(c,s);i!==void 0&&(A(i)?(i.length===0||i.every(te))&&(i.message||I(c,s)):te(i)&&I(c,s))})},j=(r,s)=>{const o=k({},s);return Te(K(r),o),o},be=r=>{const{value:s,type:o,checked:c,options:i,files:y,multiple:m,valueAsNumber:g,valueAsDate:_}=r.target;switch(o){case"checkbox":return c;case"range":return g;case"date":return _;case"number":{if(s==="")return null;const w=Number.parseFloat(s);return $(w)?w:void 0}case"file":return m?y:y.item(0);case"select-multiple":return[...i].filter(w=>w.selected).map(w=>w.value);default:return s}},ne=(r,s,o)=>{if(A(r)){const c=[...r];return[c[s],c[o]]=[c[o],c[s]],c}return r},Y=(r,s,o)=>`${o||""} ${s||""} ${r.type?`error-${r.type}`:""}`.trim();var oe={exports:{}},J={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he=we.default,Ce=Symbol.for("react.element"),Me=Symbol.for("react.fragment"),Ae=Object.prototype.hasOwnProperty,xe=he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,De={key:!0,ref:!0,__self:!0,__source:!0};function ce(r,s,o){var c,i={},y=null,m=null;o!==void 0&&(y=""+o),s.key!==void 0&&(y=""+s.key),s.ref!==void 0&&(m=s.ref);for(c in s)Ae.call(s,c)&&!De.hasOwnProperty(c)&&(i[c]=s[c]);if(r&&r.defaultProps)for(c in s=r.defaultProps,s)i[c]===void 0&&(i[c]=s[c]);return{$$typeof:Ce,type:r,key:y,ref:m,props:i,_owner:xe.current}}J.Fragment=Me,J.jsx=ce,J.jsxs=ce,oe.exports=J;const H=oe.exports.jsx,p=r=>{const s=u.useRef(r);return s.current=r,u.useCallback((...o)=>s.current(...o),[])},v={key:"",name:"","aria-invalid":!1,className:"",onChange:h,onBlur:h,ref:h,value:"",checked:!1},Be=({defaultValues:r,mode:s,classNameError:o,shouldFocusError:c=!1,resolver:i=h})=>{const[y,m]=u.useState({values:r||x,errors:{}}),{values:g,errors:_}=y,w=u.useRef(!1),G=u.useRef(!1),L=u.useRef(!1),O=u.useRef(new Map),ie=u.useRef(),Q=s==="onSubmit",ae=s==="onBlur",ue=s==="onChange",je=!Q&&!ae&&!ue,T=e=>m(t=>q(k({},t),{errors:e})),X=u.useCallback(e=>{const t=e||x;ie.current=ee(t),m(n=>q(k({},n),{values:k({},t)}))},[]);u.useEffect(()=>(X(r),Oe),[r,X]);const Z=e=>{const t=O.current.get(e);return t&&t.focus?(t.focus(),!0):!1},M=p((e="")=>(O.current.has(e)||O.current.set(e,null),R(e,g))),V=p((e="",t=_)=>R(e,t)),S=p((e="",t=_)=>e===""?re(t).length>0:R(e,t)!==void 0),fe=p((e,t=_)=>{let n=t;return S(e,t)&&(n=j(e,t)),n}),de=p((e="",t=g)=>new Promise((n=h)=>{const a=i(t);if(e===""){T(a),n(a);return}const f=A(e)?e:[e];let d=k({},_);f.forEach(B=>{const F=R(B,a);d=j(B,d),F!==void 0&&(d=N(B,d,F))}),T(d),n(d)})),pe=ue||L.current&&je,Je=pe&&!Q,le=p((e,t)=>{let n=_;if((pe||S(e))&&(n=j(e,n),!Q)){const a=R(e,i(t));a&&(n=N(e,n,a))}return n}),b=p((e,t,n=le)=>new Promise((a=h)=>{m(f=>{const d=N(e,f.values,t);w.current=!0,G.current=ie.current!==ee(d);const B=n(e,d),F={values:d,errors:B};return a(F),F})})),D=p((e,t,n)=>Je&&t?le:()=>{let a=_;const f=V(e);if(A(f)){const d=n(f);f.message&&(d.message=f.message,d.type=f.type),a=d.length>0?N(e,_,d):j(e,a)}return a}),Le=p((e,t=!1)=>b(e,[],D(e,t,()=>[]))),Ve=p((e,t,n=!1)=>b(e,[...M(e),t],D(e,n,a=>a))),ze=p((e,t,n=!1)=>b(e,[t,...M(e)],D(e,n,a=>[void 0,...a]))),Ke=p((e,t,n=!1)=>b(e,M(e).filter((a,f)=>f!==t),D(e,n,a=>a.filter((f,d)=>d!==t)))),Ue=p((e,t,n,a=!1)=>b(e,ne(M(e),t,n),D(e,a,f=>ne(f,t,n)))),We=p(e=>O.current.get(e)),me=p((e,t)=>{t&&O.current.set(e,t)}),Ye=p(e=>e&&me(e.name,e)),ye=p(e=>b(e.target.name,be(e))),_e=p(e=>{const{name:t}=e.target,n=R(t,i(g));n?(T(N(t,_,n)),c&&Z(t)):T(fe(t))}),He=p((e,t="")=>{const n=M(e),a=S(e);return v.name=e,v["aria-invalid"]=a,v.className=Y(x,a?o:"",t),v.onChange=ye,v.ref=Ye,v.onBlur=ae?_e:void 0,n===!0||n===!1?(v.checked=n,v.value=void 0):(v.value=`${n}`=="0"?n:n||"",v.checked=void 0),v}),Ge=p((e=r,t=!0)=>{X(e),w.current=!1,G.current=!1,t&&de("",e)}),Qe=e=>t=>{t&&t.preventDefault();const n=i(g);if(T(n),S("",n)){if(c){let a=!1;O.current.forEach((f,d)=>{!a&&S(d,n)&&(a=Z(d))})}return L.current=!0,!1}return e(g),!0},Xe=p(({for:e,children:t})=>{const n=V(e,_);return!n||!n.message?!1:P(t)?t(n):H("span",{className:Y(n,o),children:n.message})}),Ee=!S(),Ze=p(({children:e,focusable:t=!1})=>{if(Ee)return!1;const a=Array.from(O.current).filter(f=>!!f[1]).map(f=>f[0]).filter(f=>S(f,_)).sort().map(f=>{const d=V(f);return H("li",{className:Y(d,o),children:t?H("a",{onClick:()=>Z(f),children:d.message}):d.message},f)});return P(e)?e(a):a});return{getValue:M,setValue:b,register:He,onChange:ye,onBlur:_e,getRef:We,setRef:me,trigger:de,handleSubmit:Qe,hasError:S,getError:V,clearError:e=>T(fe(e)),setErrors:e=>{L.current=!0,T(e)},array:{clear:Le,append:Ve,prepend:ze,remove:Ke,swap:Ue},key:ke,reset:Ge,Error:Xe,Errors:Ze,formState:{errors:_,isValid:Ee,isTouched:w.current,isDirty:G.current,hadError:L.current}}},Fe=r=>s=>{let o={};try{r.validateSync(s,{abortEarly:!1})}catch(c){for(const i of c.inner){const y=R(i.path,o)||{};y.message=i.message,y.type=i.type,o=N(i.path,o,y)}}return o},Ie=r=>s=>{let o={};const c=r.safeParse(s);return c.success||c.error.errors.forEach(i=>{const y=i.path.join("."),m=R(y,o)||{};m.message=i.message,m.type=i.type,o=N(y,o,m)}),o};l.default=Be,l.yupResolver=Fe,l.zodResolver=Ie,Object.defineProperty(l,"__esModule",{value:!0}),l[Symbol.toStringTag]="Module"});
