var er=Object.defineProperty,rr=Object.defineProperties;var sr=Object.getOwnPropertyDescriptors;var _e=Object.getOwnPropertySymbols;var nr=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable;var Re=(p,a,E)=>a in p?er(p,a,{enumerable:!0,configurable:!0,writable:!0,value:E}):p[a]=E,k=(p,a)=>{for(var E in a||(a={}))nr.call(a,E)&&Re(p,E,a[E]);if(_e)for(var E of _e(a))tr.call(a,E)&&Re(p,E,a[E]);return p},z=(p,a)=>rr(p,sr(a));(function(p,a){typeof exports=="object"&&typeof module!="undefined"?a(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],a):(p=typeof globalThis!="undefined"?globalThis:p||self,a(p["@rvision/use-form"]={},p.react))})(this,function(p,a){"use strict";function E(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var ke=E(a);const se=e=>typeof e=="function",b={},I=()=>b;let Ae=2e9;const C=new WeakMap,Se=e=>{let r=C.get(e);return r||(r=(Ae++).toString(36),C.set(e,r)),r},ne=e=>{let r;if(e instanceof Set)r=new Set([...e]);else{const t=Array.isArray(e);r=t?[...e]:k({},e),t&&e.message&&(r.message=e.message,r.type=e.type)}return C.has(e)&&(C.set(r,C.get(e)),C.delete(e)),r},Ne=/\[([^\]]+)\]/g;let U=new Map;const W=e=>{if(!e)return[];let r=U.get(e);return r||(r=e.replace(Ne,".$1").split(".").map(t=>+t-+t<1?+t:t),U.set(e,r),r)},Oe=()=>{U=new Map},Y=(e,r)=>{if(r!==void 0)return e.length===0?r:Y(e.slice(1),r[e[0]])},v=(e,r)=>Y(W(e),r),te=(e,r,t)=>{const{length:o}=e;if(o===0)return;const i=e[0];if(o===1){r[i]=t;return}const d=r[i]!==void 0,m=e[1],R=+m-+m<1;r[i]=d?ne(r[i]):R?[]:{},R&&(r[i][m]=r[i][m]===void 0?{}:ne(r[i][m])),te(e.slice(1),r[i],t)},A=(e,r,t)=>{const o=k({},r);return te(W(e),o,t),o},x=(e,r)=>{const{length:t}=e;if(t===0||r===void 0)return;const o=e[0];if(t===1){delete r[o];return}x(e.slice(1),r[o])},j=e=>Object.keys(e||b).length===0,Te=(e,r)=>{x(e,r),e.map((o,i)=>i===0?[...e]:[...e].slice(0,-1*i)).forEach(o=>{const i=Y(o,r);i!==void 0&&(Array.isArray(i)?(i.length===0||i.every(j))&&!i.message&&x(o,r):j(i)&&x(o,r))})},B=(e,r)=>{const t=k({},r);return Te(W(e),t),t},Ce=e=>{const{value:r,type:t,checked:o,options:i,files:d,multiple:m,valueAsNumber:R,valueAsDate:M}=e.target;switch(t){case"checkbox":return o;case"range":return R;case"date":return M;case"number":{if(r==="")return null;const g=Number.parseFloat(r);return+g-+g<1?+g:void 0}case"file":return m?d:d.item(0);case"select-multiple":return[...i].filter(g=>g.selected).map(g=>g.value);default:return r}},Me=(e,r,t)=>{const o=[...e];for(;o.length<Math.max(r,t);)o.push(void 0);return[o[r],o[t]]=[o[t],o[r]],o},oe=(e,r,t)=>{const o=[...e];for(;o.length<r;)o.push(void 0);return o.splice(r,0,t),o},H=(e,r,t)=>`${t||""} ${r||""} ${e.type?`error-${e.type}`:""}`.trim(),be=e=>r=>{let t={};try{e.validateSync(r,{abortEarly:!1})}catch(o){for(const i of o.inner){const d=v(i.path,t)||{};d.message=i.message,d.type=i.type,t=A(i.path,t,d)}}return t},Ie=e=>r=>{let t={};const o=e.safeParse(r);return o.success||o.error.errors.forEach(i=>{const d=i.path.join("."),m=v(d,t)||{};m.message=i.message,m.type=i.type,t=A(d,t,m)}),t};var ce={exports:{}},D={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he=ke.default,xe=Symbol.for("react.element"),Be=Symbol.for("react.fragment"),De=Object.prototype.hasOwnProperty,Fe=he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ve={key:!0,ref:!0,__self:!0,__source:!0};function ie(e,r,t){var o,i={},d=null,m=null;t!==void 0&&(d=""+t),r.key!==void 0&&(d=""+r.key),r.ref!==void 0&&(m=r.ref);for(o in r)De.call(r,o)&&!Ve.hasOwnProperty(o)&&(i[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps,r)i[o]===void 0&&(i[o]=r[o]);return{$$typeof:xe,type:e,key:d,ref:m,props:i,_owner:Fe.current}}D.Fragment=Be,D.jsx=ie,D.jsxs=ie,ce.exports=D;const K=ce.exports.jsx,ae="aria-invalid",G=e=>JSON.stringify(e,(r,t)=>t instanceof Set?[...t].sort():t),Q=new Map,Je=(e,r)=>(Q.set(e,r),a.useEffect(()=>()=>Q.delete(e),[e]),a.useCallback((...t)=>Q.get(e)(...t),[e])),w={name:"",[ae]:!1,className:"",onChange:I,onBlur:I,ref:I,value:"",checked:!1},Le=({id:e="",defaultValues:r,mode:t,classNameError:o,shouldFocusError:i=!1,resolver:d=I})=>{const[m,R]=a.useState({values:r||b,errors:{}}),{values:M,errors:g}=m,F=a.useRef(!1),V=a.useRef(!1),J=a.useRef(!1),O=a.useRef(new Map),X=a.useRef(),ue=t==="onSubmit",fe=t==="onBlur",le=t==="onChange",ze=!ue&&!fe&&!le;let Ue=1;const y=s=>Je(e+Ue++,s),h=s=>R(n=>z(k({},n),{errors:s})),Z=a.useCallback(s=>{const n=s||b;X.current=G(n),R(c=>z(k({},c),{values:k({},n)}))},[]);a.useEffect(()=>(Z(r),()=>{Oe()}),[r,Z]);const q=a.useCallback(s=>{const n=O.current.get(s);return n&&n.focus?(n.focus(),!0):!1},[]),$=y((s="")=>(O.current.has(s)||O.current.set(s,null),v(s,M))),P=y((s="",n=g)=>v(s,n)),S=y((s="",n=g)=>s===""?!j(n):v(s,n)!==void 0),de=y((s,n=g)=>{let c=n;return S(s,n)&&(c=B(s,n)),c}),pe=y((s="")=>new Promise((n=I)=>{R(c=>{let u=d(c.values);if(s!==""){const l=Array.isArray(s)?s:[s];let N=k({},c.errors);l.forEach(_=>{const T=v(_,u);N=B(_,N),T!==void 0&&(N=A(_,N,T))}),u=N}const f=z(k({},c),{errors:u});return n(f),f})})),ye=le||J.current&&ze,me=y((s,n)=>R(c=>{const u=A(s,c.values,n);F.current=!0,V.current=X.current!==G(u);let f=g;if((ye||S(s))&&(f=B(s,f),!ue)){const l=v(s,d(u));l&&(f=A(s,f,l))}return{values:u,errors:f}})),L=y((s,n,c)=>{R(u=>{const f=A(s,u.values,n(v(s,u.values)));F.current=!0,V.current=X.current!==G(f);let l=u.errors;const N=v(s,l);let _=[];if(Array.isArray(N)&&(_=c(N)),ye){const T=v(s,d(f));if(T&&T.message){const re=_.length>0?_:{};re.message=T.message,re.type=T.type,_=re}}return l=B(s,l),(_.length>0||_.message)&&(l=A(s,l,_)),{values:f,errors:l}})}),ee=y((s,n,c)=>{L(s,l=>oe(l,n,c),l=>oe(l,n,void 0))}),We=y((s,n)=>ee(s,$(s).length,n)),Ye=(s,n)=>ee(s,0,n),je=y(s=>{const n=()=>[];L(s,n,n)}),He=y((s,n)=>{const c=u=>[...u].filter((f,l)=>l!==n);L(s,c,c)}),Ke=y((s,n,c)=>{const u=f=>Me(f,n,c);L(s,u,u)}),Ge=y(s=>O.current.get(s)),ge=y((s,n)=>{n&&O.current.set(s,n)}),Qe=s=>s&&ge(s.name,s),Ee=y(s=>me(s.target.name,Ce(s))),ve=y(s=>{const{name:n}=s.target,c=v(n,d(M));c?(h(A(n,g,c)),i&&q(n)):h(de(n))}),Xe=y((s,n="")=>{const c=$(s),u=S(s);return w.name=s,w[ae]=u,w.className=H(b,u?o:"",n),w.onChange=Ee,w.ref=Qe,w.onBlur=fe?ve:void 0,c===!0||c===!1?(w.checked=c,w.value=void 0):(w.value=`${c}`=="0"?c:c||"",w.checked=void 0),w}),Ze=y((s=r,n=!0)=>{Z(s),F.current=!1,V.current=!1,n&&pe("",s)}),qe=s=>n=>{n&&n.preventDefault();const c=d(M);if(h(c),S("",c)){if(i){let u=!1;O.current.forEach((f,l)=>{!u&&S(l,c)&&(u=q(l))})}return J.current=!0,!1}return s(M),!0},$e=y(({for:s,children:n})=>{const c=P(s,g);return(c==null?void 0:c.message)?se(n)?n(c):K("span",{className:H(c,o),children:c.message}):!1}),we=!S(),Pe=y(({children:s,focusable:n=!1})=>{if(we)return!1;const u=Array.from(O.current).map(f=>f[0]).filter(f=>S(f,g)).sort().map(f=>{const l=P(f);return K("li",{className:H(l,o),children:n?K("a",{onClick:()=>q(f),children:l.message}):l.message},f)});return se(s)?s(u):u});return{getValue:$,setValue:me,register:Xe,onChange:Ee,onBlur:ve,getRef:Ge,setRef:ge,trigger:pe,handleSubmit:qe,hasError:S,getError:P,clearError:s=>h(de(s)),setErrors:s=>{J.current=!0,h(s)},array:{clear:je,append:We,prepend:Ye,remove:He,swap:Ke,insert:ee},key:Se,Error:$e,Errors:Pe,formState:{errors:g,isValid:we,isTouched:F.current,isDirty:V.current,hadError:J.current,reset:Ze}}};p.default=Le,p.yupResolver=be,p.zodResolver=Ie,Object.defineProperty(p,"__esModule",{value:!0}),p[Symbol.toStringTag]="Module"});
