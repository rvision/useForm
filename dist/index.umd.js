var qe=Object.defineProperty,$e=Object.defineProperties;var Pe=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var er=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable;var Re=(l,u,g)=>u in l?qe(l,u,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[u]=g,N=(l,u)=>{for(var g in u||(u={}))er.call(u,g)&&Re(l,g,u[g]);if(we)for(var g of we(u))rr.call(u,g)&&Re(l,g,u[g]);return l},ee=(l,u)=>$e(l,Pe(u));(function(l,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(l=typeof globalThis!="undefined"?globalThis:l||self,u(l["@rvision/use-form"]={},l.react))})(this,function(l,u){"use strict";function g(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var Se=g(u);const re=r=>!Number.isNaN(r),Ne=r=>parseInt(r,10),te=r=>typeof r=="function",{isArray:h}=Array,ne=r=>JSON.stringify(r,(t,c)=>c instanceof Set?[...c]:c),se=Object.keys,x={},M=()=>x;let ke=9999;const A=new WeakMap,Oe=r=>{let t=A.get(r);return t||(t=(++ke).toString(36).split("").reduce((c,o)=>o+c,""),A.set(r,t)),t},L=r=>{let t;return r instanceof Set?t=new Set([...r]):t=h(r)?[...r]:N({},r),A.has(r)&&(A.set(t,A.get(r)),A.delete(r)),t},Te=/\[([^\]]+)\]/g;let j=new Map;const V=r=>{if(!r)return[];let t=j.get(r);return t||(t=r.replace(Te,".$1").split("."),j.set(r,t),t)},be=()=>{j=new Map},K=(r,t)=>{if(t!==void 0)return r.length===0?t:K(r.slice(1),t[r[0]])},y=(r,t)=>K(V(r),t),U=(r,t,c)=>{const{length:o}=r;if(o>0){const i=r[0];if(o===1){t[i]=c;return}const _=t[i]===void 0,E=Ne(r[1]);if(re(E))return t[i]=_?[]:L(t[i]),t[i][E]=t[i][E]===void 0?{}:L(t[i][E]),U(r.slice(2),t[i][E],c);t[i]=_?{}:L(t[i]),U(r.slice(1),t[i],c)}},O=(r,t,c)=>{const o=N({},t);return U(V(r),o,c),o},I=(r,t)=>{const{length:c}=r;if(c===0||t===void 0)return;const o=r[0];if(c===1){delete t[o];return}I(r.slice(1),t[o])},oe=r=>se(r||x).length===0,Ce=(r,t)=>{I(r,t),r.map((o,i)=>i===0?[...r]:[...r].slice(0,-1*i)).forEach(o=>{const i=K(o,t);i!==void 0&&(h(i)?(i.length===0||i.every(oe))&&(i.message||I(o,t)):oe(i)&&I(o,t))})},W=(r,t)=>{const c=N({},t);return Ce(V(r),c),c},Me=r=>{const{value:t,type:c,checked:o,options:i,files:_,multiple:E,valueAsNumber:R,valueAsDate:m}=r.target;switch(c){case"checkbox":return o;case"range":return R;case"date":return m;case"number":{if(t==="")return null;const S=Number.parseFloat(t);return re(S)?S:void 0}case"file":return E?_:_.item(0);case"select-multiple":return[...i].filter(S=>S.selected).map(S=>S.value);default:return t}},ce=(r,t,c)=>{const o=y(r,t);return o&&h(o)?O(r,t,c(o)):t},ie=(r,t,c)=>{if(h(r)){const o=[...r];return[o[t],o[c]]=[o[c],o[t]],o}return r},Y=(r,t,c="")=>`${c} ${t} ${r.type?`error-${r.type}`:""}`.trim();var ue={exports:{}},J={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae=Se.default,De=Symbol.for("react.element"),xe=Symbol.for("react.fragment"),Be=Object.prototype.hasOwnProperty,Fe=Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,he={key:!0,ref:!0,__self:!0,__source:!0};function ae(r,t,c){var o,i={},_=null,E=null;c!==void 0&&(_=""+c),t.key!==void 0&&(_=""+t.key),t.ref!==void 0&&(E=t.ref);for(o in t)Be.call(t,o)&&!he.hasOwnProperty(o)&&(i[o]=t[o]);if(r&&r.defaultProps)for(o in t=r.defaultProps,t)i[o]===void 0&&(i[o]=t[o]);return{$$typeof:De,type:r,key:_,ref:E,props:i,_owner:Fe.current}}J.Fragment=xe,J.jsx=ae,J.jsxs=ae,ue.exports=J;const H=ue.exports.jsx,p=r=>{const t=u.useRef(r);return t.current=r,u.useCallback((...c)=>t.current(...c),[])},w={key:"",name:"","aria-invalid":!1,className:"",onChange:M,onBlur:M,ref:M,value:"",checked:!1},Ie=({defaultValues:r,mode:t,classNameError:c,shouldFocusError:o=!1,resolver:i=M})=>{const[_,E]=u.useState({values:r||x,errors:{}}),{values:R,errors:m}=_,S=u.useRef(!1),z=u.useRef(!1),G=u.useRef(!1),T=u.useRef(new Map),fe=u.useRef(),Q=t==="onSubmit",de=t==="onBlur",pe=t==="onChange",Le=!Q&&!de&&!pe,b=e=>E(n=>ee(N({},n),{errors:e})),X=u.useCallback(e=>{const n=e||x;fe.current=ne(n),E(s=>ee(N({},s),{values:N({},n)}))},[]);u.useEffect(()=>(X(r),be),[r,X]);const Z=e=>{const n=T.current.get(e);return n&&n.focus?(n.focus(),!0):!1},q=p((e="")=>(T.current.has(e)||T.current.set(e,null),y(e,R))),le=p((e="",n=m)=>y(e,n)),k=p((e="",n=m)=>e===""?se(n).length>0:y(e,n)!==void 0),$=p((e,n=m)=>{let s=n;return k(e,n)&&(s=W(e,n)),s}),me=p((e="",n=R)=>new Promise((s=M)=>{const a=i(n);if(e===""){b(a),s(a);return}const f=isArray(e)?e:[e];let d=N({},m);f.forEach(v=>{const F=y(v,a);d=W(v,d),F!==void 0&&(d=O(v,d,F))}),b(d),s(d)})),ye=pe||G.current&&Le,B=ye&&!Q,D=p((e,n)=>{let s=m;if((ye||k(e))&&(s=W(e,s),!Q)){const a=y(e,i(n));a&&(s=O(e,s,a))}return s}),P=p((e,n,s)=>{const a=y(e,i(s)),f=y(e,n);return f&&(delete f.message,delete f.type,(a==null?void 0:a.message)&&(f.message=a.message,f.type=a.type)),n}),C=p((e,n,s=D)=>new Promise((a=M)=>{E(f=>{const d=O(e,N({},e===""?n:R),n);S.current=!0,z.current=fe.current!==ne(d);const v=s(e,d),F={values:d,errors:v};return a(F),F})})),je=p(e=>C(e,[],B?D:()=>[])),Ve=p((e,n)=>{const s=B?D:()=>m;return C(e,[...y(e,R),n],s)}),Ke=p((e,n)=>{const s=B?D:(a,f)=>{let d=ce(e,m,v=>[void 0,...v]);return P(e,d,f)};return C(e,[n,...y(e,R)],s)}),Ue=p((e,n)=>{const s=B?D:(a,f)=>{let d=$(`${e}.${n}`,N({},m));return d=ce(e,d,v=>(v.splice(n,1),v)),P(e,d,f)};return C(e,y(e,R).filter((a,f)=>f!==n),s)}),We=p((e,n,s)=>{const a=B?D:(f,d)=>{let v=ie(y(e,m),n,s);return v=v?O(e,m,v):m,P(e,v,d)};return C(e,ie(q(e),n,s),a)}),Ye=p(e=>T.current.get(e)),_e=p((e,n)=>{n&&T.current.set(e,n)}),He=p(e=>e&&_e(e.name,e)),ve=p(e=>C(e.target.name,Me(e))),Ee=p(e=>{const{name:n}=e.target,s=y(n,i(R));s?(b(O(n,m,s)),o&&Z(n)):b($(n))}),ze=p((e,n="")=>{const s=q(e),a=k(e);return w.name=e,w["aria-invalid"]=a,w.className=Y(x,a?c:"",n),w.onChange=ve,w.ref=He,w.onBlur=de?Ee:void 0,s===!0||s===!1?(w.checked=s,w.value=void 0):(w.value=`${s}`=="0"?s:s||"",w.checked=void 0),w}),Ge=e=>n=>{n&&(n==null||n.preventDefault());const s=i(R);if(b(s),k("",s)){if(o){let a=!1;T.current.forEach((f,d)=>{!a&&k(d,s)&&(a=Z(d))})}return G.current=!0,!1}return e(R),!0},Qe=p((e=r,n=!0)=>{X(e),S.current=!1,z.current=!1,n&&me("",e)}),Xe=p(({for:e,children:n})=>{const s=le(e,m);return(s==null?void 0:s.message)?te(n)?n(s):H("span",{className:Y(s,c),children:s.message}):!1}),ge=!k(),Ze=p(({children:e,focusable:n=!1})=>{if(ge)return!1;const a=Array.from(T.current).filter(f=>!!f[1]).map(f=>f[0]).filter(f=>k(f,m)).sort().map(f=>{const d=y(f,m);return H("li",{className:Y(d,c),children:n?H("a",{onClick:()=>Z(f),children:d.message}):d.message},f)});return te(e)?e(a):a});return{getValue:q,setValue:C,register:ze,onChange:ve,onBlur:Ee,getRef:Ye,setRef:_e,trigger:me,handleSubmit:Ge,hasError:k,getError:le,clearError:e=>b($(e)),setErrors:e=>{G.current=!0,b(e)},array:{append:Ve,prepend:Ke,remove:Ue,swap:We,clear:je},key:Oe,reset:Qe,Error:Xe,Errors:Ze,formState:{errors:m,isValid:ge,isTouched:S.current,isDirty:z.current}}},Je=r=>t=>{let c={};try{r.validateSync(t,{abortEarly:!1})}catch(o){for(const i of o.inner){const _=y(i.path,c)||{};_.message=i.message,_.type=i.type,c=O(i.path,c,_)}}return c};l.default=Ie,l.yupResolver=Je,Object.defineProperty(l,"__esModule",{value:!0}),l[Symbol.toStringTag]="Module"});
