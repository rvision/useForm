var Ve=Object.defineProperty;var ie=Object.getOwnPropertySymbols;var Ke=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var ue=(d,u,v)=>u in d?Ve(d,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):d[u]=v,S=(d,u)=>{for(var v in u||(u={}))Ke.call(u,v)&&ue(d,v,u[v]);if(ie)for(var v of ie(u))We.call(u,v)&&ue(d,v,u[v]);return d};(function(d,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(d=typeof globalThis!="undefined"?globalThis:d||self,u(d["@rvision/use-form"]={},d.react))})(this,function(d,u){"use strict";function v(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var fe=v(u);const ae=()=>{throw new ReferenceError("useEvent called while rendering.")},E=e=>{const r=u.useRef(ae);return u.useLayoutEffect(()=>{r.current=e}),u.useCallback((...c)=>r.current(...c),[])},pe=["object","function"];let de=Date.now();const me=()=>{const e=u.useRef(new WeakMap);return u.useEffect(()=>()=>{(e==null?void 0:e.current)&&(e.current=new WeakMap)},[]),u.useCallback((r={})=>{const c=e.current;if(c.has(r))return c.get(r);if(!pe.includes(typeof r))return`key-${r}`;const t=(++de).toString(36);return c.set(r,t),t},[e])};var Q={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ye=fe.default,le=Symbol.for("react.element"),ve=Symbol.for("react.fragment"),we=Object.prototype.hasOwnProperty,Ee=ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_e={key:!0,ref:!0,__self:!0,__source:!0};function X(e,r,c){var t,i={},a=null,C=null;c!==void 0&&(a=""+c),r.key!==void 0&&(a=""+r.key),r.ref!==void 0&&(C=r.ref);for(t in r)we.call(r,t)&&!_e.hasOwnProperty(t)&&(i[t]=r[t]);if(e&&e.defaultProps)for(t in r=e.defaultProps,r)i[t]===void 0&&(i[t]=r[t]);return{$$typeof:le,type:e,key:a,ref:C,props:i,_owner:Ee.current}}F.Fragment=ve,F.jsx=X,F.jsxs=X,Q.exports=F;const W=Q.exports.jsx,h=e=>!Number.isNaN(e),Z=e=>parseInt(e,10),j=e=>typeof e=="function",{isArray:_}=Array,q=JSON.stringify,M=Object.keys,g={},b=()=>g,w={key:"",name:"","aria-invalid":!1,className:"",onChange:b,onBlur:b,ref:b,value:"",checked:!1},ke=/\[([^\]]+)\]/g;let I={};const L=e=>{if(!e)return[];if(I[e])return I[e];const r=e.replace(ke,".$1").split(".");return I[e]=r,r},J=e=>!e||typeof e!="object"?e:e instanceof Date?new Date(e.getTime()):_(e)?e.reduce((r,c,t)=>(r[t]=J(c),r),[]):e instanceof Object?M(e).reduce((r,c)=>(r[c]=J(e[c]),r),{}):e instanceof Set?new Set(J([...e])):e,m=(e,r)=>{if(r!==void 0){if(!_(e))return m(L(e),r);switch(e.length){case 0:return r;default:return m(e.slice(1),r[e[0]])}}},k=(e,r,c)=>{if(!_(e)){k(L(e),r,c);return}if(e.length===0)return;const t=e[0];if(e.length===1){r[t]=c;return}const i=Z(e[1]);h(i)?(r[t]=r[t]===void 0?[]:r[t],r[t][i]=r[t][i]===void 0?{}:r[t][i],e.length===2?r[t][i]=c:k(e.slice(2),r[t][i],c)):(r[t]=r[t]===void 0?{}:S({},r[t]),k(e.slice(1),r[t],c))},D=(e,r)=>{if(!_(e)){D(L(e),r);return}if(e.length===0||r===void 0)return;const c=e[0];if(e.length===1){delete r[c];return}if(r[c]===void 0)return;const t=Z(e[1]);h(t)?e.length===2?delete r[c][t]:D(e.slice(2),r[c][t]):D(e.slice(1),r[c])},A=(e,r)=>{if(!_(e)){A(L(e),r);return}D(e,r);const c=e.map((t,i)=>i===0?[...e]:[...e].slice(0,-1*i));for(const t of c){const i=m(t,r);i!==void 0&&(_(i)?(i.length===0||i.every(a=>M(a||g).length===0))&&D(t,r):M(i||g).length===0&&D(t,r))}},Re=e=>{const{value:r,type:c,checked:t,options:i,files:a,multiple:C,valueAsNumber:l}=e.target;switch(c){case"checkbox":return t;case"range":return l;case"number":if(r==="")return null;const R=Number.parseFloat(r);return h(R)?R:void 0;case"file":return C?a:a.item(0);case"select-multiple":return[...i].filter(T=>T.selected).map(T=>T.value);default:return r}},Ne=(e,r)=>{const c=m(e,r);if(c&&!_(c)){const t=S({},r);return A(e,t),t}return r},$=(e,r,c)=>{const t=m(e,r);if(t&&_(t)){const i=S({},r),a=c([...t]);return k(e,i,a),i}return r},P=(e,r,c,t)=>{const i=m(r,e);if(_(i)){const a=[...i],C=a[c];return a[c]=a[t],a[t]=C,a}return i},U=(e,r,c)=>`${c||""} ${r||""} ${e.type?`error-${e.type}`:""}`.trim(),Se=({defaultValues:e,mode:r="onSubmit",classNameError:c=null,shouldFocusError:t=!1,resolver:i=b})=>{const[a,C]=u.useState(e||g),[l,R]=u.useState({}),T=u.useRef(!1),Y=u.useRef(!1),x=u.useRef(new Map),ee=u.useRef(""),re=me(),Oe=r==="onBlur",be=r==="onChange",z=u.useCallback(n=>{const s=n||g;ee.current=q(s),C(J(s))},[]);u.useEffect(()=>(z(e),()=>{I={}}),[e,z]);const G=u.useCallback(n=>{const s=x.current.get(n);return s&&s.focus?(s.focus(),!0):!1},[]),ne=(n="")=>m(n,a),Te=(n="",s=l)=>m(n,s),N=(n="",s=l)=>n===""?M(s).length>0:m(n,s)!==void 0,V=E((n,s=l)=>{if(N(n,s)){const o=S({},s);return A(n,o),R(o),o}return s}),ge=E(n=>{const s=S({},l);for(const o of M(n))N(o)&&A(o,s),k(o,s,n[o]);return R(s),s}),se=E((n="",s=a)=>new Promise((o=b)=>{const f=i(s);n===""&&(R(f),o(f));const y=_(n)?n:[n],p=S({},l);y.forEach(O=>{const B=m(O,f);A(O,p),B!==void 0&&k(O,p,B)}),R(p),o(p)})),H=E((n,s,o=!0)=>new Promise((f=b)=>{C(y=>{T.current=!0;const p=S({},n===""?s:y);k(n,p,s),Y.current=ee.current!==q(p);let O=l;if(o&&(N(n)||be)){O=V(n);const B=m(n,i(p));B&&(k(n,O,B),R(O))}return f({values:p,errors:O}),p})})),K=(n,s,o)=>new Promise((f=b)=>{Promise.resolve(H(n,s,!1)).then(({values:y})=>{const p=o(Ne(n,l));R(p),f({values:y,errors:p})})}),De=E((n,s)=>K(n,[...m(n,a),s],o=>o)),Me=E((n,s)=>K(n,[s,...m(n,a)],o=>$(n,o,f=>[void 0,...f]))),Ae=E((n,s)=>K(n,m(n,a).filter((o,f)=>s!==f),o=>(o=V(`${n}.${s}`,o),$(n,o,f=>(f.splice(s,1),f))))),xe=E((n,s,o)=>K(n,P(a,n,s,o),f=>{const y=P(f,n,s,o),p=S({},l);return k(n,p,y),p})),Be=u.useCallback(n=>x.current.get(n),[]),te=u.useCallback((n,s)=>{s&&x.current.set(n,s)},[]),Fe=u.useCallback(n=>n&&te(n.name,n),[]),oe=E(n=>{H(n.target.name,Re(n))}),ce=E(n=>{const{name:s}=n.target,o=m(s,i(a));if(o){const f=S({},l);k(s,f,o),R(f),t&&G(s)}else V(s)}),Ie=(n,s="")=>{const o=ne(n),f=N(n);return w.key=w.name=n,w["aria-invalid"]=f,w.className=U(g,f?c:!1,s),w.onChange=oe,w.onBlur=Oe?ce:void 0,w.ref=Fe,o===!0||o===!1?(w.checked=o,w.value=void 0):(w.value=`${o}`=="0"?o:o||"",w.checked=void 0),w},Le=n=>s=>{s&&(s==null||s.preventDefault());const o=i(a);if(R(o),N("",o)){if(t){let f=!1;x.current.forEach((y,p)=>{!f&&N(p,o)&&(f=G(p))})}return!1}return n(a),!0},Je=E((n=e,s=!0)=>{z(n),T.current=!1,Y.current=!1,s&&se("",n)});return{getValue:ne,setValue:H,register:Ie,onChange:oe,onBlur:ce,getRef:Be,setRef:te,trigger:se,handleSubmit:Le,hasError:N,getError:Te,clearError:V,setErrors:ge,append:De,prepend:Me,remove:Ae,swap:xe,key:re,reset:Je,Error:({for:n,children:s})=>{const o=m(n,l);return!o||_(o)?!1:j(s)?s(o):W("span",{className:U(o,c),children:o.message})},Errors:({children:n,focusable:s=!1})=>{if(!N())return!1;const f=Array.from(x.current).map(y=>y[0]).filter(y=>N(y)).sort().map(y=>{const p=m(y,l);return W("li",{className:U(p,c),children:s?W("a",{onClick:()=>G(y),children:p.message}):p.message},re(p))});return j(n)?n(f):f},formState:{errors:l,isValid:!N(),isTouched:T.current,isDirty:Y.current}}},Ce=e=>r=>{const c={};try{e.validateSync(r,{abortEarly:!1})}catch(t){for(const i of t.inner)k(i.path,c,{message:i.message,type:i.type})}return c};d.default=Se,d.yupResolver=Ce,Object.defineProperty(d,"__esModule",{value:!0}),d[Symbol.toStringTag]="Module"});
