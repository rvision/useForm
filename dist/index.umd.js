var Ze=Object.defineProperty,qe=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,er=Object.prototype.propertyIsEnumerable;var _e=(p,u,E)=>u in p?Ze(p,u,{enumerable:!0,configurable:!0,writable:!0,value:E}):p[u]=E,A=(p,u)=>{for(var E in u||(u={}))Pe.call(u,E)&&_e(p,E,u[E]);if(ve)for(var E of ve(u))er.call(u,E)&&_e(p,E,u[E]);return p},z=(p,u)=>qe(p,$e(u));(function(p,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(p=typeof globalThis!="undefined"?globalThis:p||self,u(p["@rvision/use-form"]={},p.react))})(this,function(p,u){"use strict";function E(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var we=E(u);const ee=e=>typeof e=="function",M={},b=()=>M;let Re=2e9;const C=new WeakMap,Ae=e=>{let r=C.get(e);return r||(r=(Re++).toString(36),C.set(e,r)),r},re=e=>{let r;if(e instanceof Set)r=new Set([...e]);else{const t=Array.isArray(e);r=t?[...e]:A({},e),t&&e.message&&(r.message=e.message,r.type=e.type)}return C.has(e)&&(C.set(r,C.get(e)),C.delete(e)),r},ke=/\[([^\]]+)\]/g;let U=new Map;const W=e=>{if(!e)return[];let r=U.get(e);return r||(r=e.replace(ke,".$1").split(".").map(t=>+t-+t===0?+t:t),U.set(e,r),r)},Ne=()=>{U=new Map},Y=(e,r)=>{if(r!==void 0)return e.length===0?r:Y(e.slice(1),r[e[0]])},v=(e,r)=>Y(W(e),r),se=(e,r,t)=>{const{length:c}=e;if(c===0)return;const a=e[0];if(c===1){r[a]=t;return}const l=r[a]!==void 0,m=e[1],R=+m-+m<1;r[a]=l?re(r[a]):R?[]:{},R&&(r[a][m]=r[a][m]===void 0?{}:re(r[a][m])),se(e.slice(1),r[a],t)},k=(e,r,t)=>{const c=A({},r);return se(W(e),c,t),c},B=(e,r)=>{const{length:t}=e;if(t===0||r===void 0)return;const c=e[0];if(t===1){delete r[c];return}B(e.slice(1),r[c])},j=e=>Object.keys(e||M).length===0,Oe=(e,r)=>{B(e,r),e.map((c,a)=>a===0?[...e]:[...e].slice(0,-1*a)).forEach(c=>{const a=Y(c,r);a!==void 0&&(Array.isArray(a)?(a.length===0||a.every(j))&&!a.message&&B(c,r):j(a)&&B(c,r))})},D=(e,r)=>{const t=A({},r);return Oe(W(e),t),t},Se=e=>{const{value:r,type:t,checked:c,options:a,files:l,multiple:m,valueAsNumber:R,valueAsDate:x}=e.target;switch(t){case"checkbox":return c;case"range":return R;case"date":return x;case"number":{if(r==="")return null;const g=Number.parseFloat(r);return+g-+g<1?+g:void 0}case"file":return m?l:l.item(0);case"select-multiple":return[...a].filter(g=>g.selected).map(g=>g.value);default:return r}},Te=(e,r,t)=>{if(Array.isArray(e)){const c=[...e];for(;c.length<r+1||c.length<t+1;)c.length++;return[c[r],c[t]]=[c[t],c[r]],c}return e},H=(e,r,t)=>`${t||""} ${r||""} ${e.type?`error-${e.type}`:""}`.trim(),Ce=e=>r=>{let t={};try{e.validateSync(r,{abortEarly:!1})}catch(c){for(const a of c.inner){const l=v(a.path,t)||{};l.message=a.message,l.type=a.type,t=k(a.path,t,l)}}return t},xe=e=>r=>{let t={};const c=e.safeParse(r);return c.success||c.error.errors.forEach(a=>{const l=a.path.join("."),m=v(l,t)||{};m.message=a.message,m.type=a.type,t=k(l,t,m)}),t};var ne={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Me=we.default,be=Symbol.for("react.element"),Ie=Symbol.for("react.fragment"),he=Object.prototype.hasOwnProperty,Be=Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,De={key:!0,ref:!0,__self:!0,__source:!0};function te(e,r,t){var c,a={},l=null,m=null;t!==void 0&&(l=""+t),r.key!==void 0&&(l=""+r.key),r.ref!==void 0&&(m=r.ref);for(c in r)he.call(r,c)&&!De.hasOwnProperty(c)&&(a[c]=r[c]);if(e&&e.defaultProps)for(c in r=e.defaultProps,r)a[c]===void 0&&(a[c]=r[c]);return{$$typeof:be,type:e,key:l,ref:m,props:a,_owner:Be.current}}F.Fragment=Ie,F.jsx=te,F.jsxs=te,ne.exports=F;const K=ne.exports.jsx,oe="aria-invalid",G=e=>JSON.stringify(e,(r,t)=>t instanceof Set?[...t].sort():t),Q=new Map,d=(e,r)=>(Q.set(e,r),u.useEffect(()=>()=>Q.delete(e),[e]),u.useCallback((...t)=>Q.get(e)(...t),[e])),_={name:"",[oe]:!1,className:"",onChange:b,onBlur:b,ref:b,value:"",checked:!1},Fe=({id:e="",defaultValues:r,mode:t,classNameError:c,shouldFocusError:a=!1,resolver:l=b})=>{const[m,R]=u.useState({values:r||M,errors:{}}),{values:x,errors:g}=m,V=u.useRef(!1),J=u.useRef(!1),L=u.useRef(!1),S=u.useRef(new Map),X=u.useRef(),ce=t==="onSubmit",ae=t==="onBlur",ue=t==="onChange",Ve=!ce&&!ae&&!ue,I=s=>R(n=>z(A({},n),{errors:s})),Z=u.useCallback(s=>{const n=s||M;X.current=G(n),R(o=>z(A({},o),{values:A({},n)}))},[]);u.useEffect(()=>(Z(r),()=>{Ne()}),[r,Z]);const q=u.useCallback(s=>{const n=S.current.get(s);return n&&n.focus?(n.focus(),!0):!1},[]),ie=d(e+1,(s="")=>(S.current.has(s)||S.current.set(s,null),v(s,x))),$=d(e+2,(s="",n=g)=>v(s,n)),N=d(e+3,(s="",n=g)=>s===""?!j(n):v(s,n)!==void 0),fe=d(e+4,(s,n=g)=>{let o=n;return N(s,n)&&(o=D(s,n)),o}),le=d(e+5,(s="")=>new Promise((n=b)=>{R(o=>{let i=l(o.values);if(s!==""){const y=Array.isArray(s)?s:[s];let O=A({},o.errors);y.forEach(w=>{const T=v(w,i);O=D(w,O),T!==void 0&&(O=k(w,O,T))}),i=O}const f=z(A({},o),{errors:i});return n(f),f})})),pe=ue||L.current&&Ve,de=d(e+6,(s,n)=>R(o=>{const i=k(s,o.values,n);V.current=!0,J.current=X.current!==G(i);let f=g;if((pe||N(s))&&(f=D(s,f),!ce)){const y=v(s,l(i));y&&(f=k(s,f,y))}return{values:i,errors:f}})),h=d(e+7,(s,n,o)=>{R(i=>{const f=k(s,i.values,n(v(s,i.values)));V.current=!0,J.current=X.current!==G(f);let y=i.errors;const O=v(s,y);let w=[];if(Array.isArray(O)&&(w=o(O)),pe){const T=v(s,l(f));if(T&&T.message){const P=w.length>0?w:{};P.message=T.message,P.type=T.type,w=P}}return y=D(s,y),(w.length>0||w.message)&&(y=k(s,y,w)),{values:f,errors:y}})}),Je=d(e+8,(s,n)=>{h(s,o=>[...o,n],o=>o)}),Le=d(e+9,(s,n)=>{h(s,o=>[n,...o],o=>[void 0,...o])}),ze=d(e+10,s=>{const n=()=>[];h(s,n,n)}),Ue=d(e+11,(s,n)=>{const o=i=>[...i].filter((f,y)=>y!==n);h(s,o,o)}),We=d(e+12,(s,n,o)=>{const i=f=>Te(f,n,o);h(s,i,i)}),Ye=d(e+13,s=>S.current.get(s)),ye=d(e+14,(s,n)=>{n&&S.current.set(s,n)}),je=s=>s&&ye(s.name,s),me=d(e+15,s=>de(s.target.name,Se(s))),ge=d(e+16,s=>{const{name:n}=s.target,o=v(n,l(x));o?(I(k(n,g,o)),a&&q(n)):I(fe(n))}),He=d(e+17,(s,n="")=>{const o=ie(s),i=N(s);return _.name=s,_[oe]=i,_.className=H(M,i?c:"",n),_.onChange=me,_.ref=je,_.onBlur=ae?ge:void 0,o===!0||o===!1?(_.checked=o,_.value=void 0):(_.value=`${o}`=="0"?o:o||"",_.checked=void 0),_}),Ke=d(e+18,(s=r,n=!0)=>{Z(s),V.current=!1,J.current=!1,n&&le("",s)}),Ge=s=>n=>{n&&n.preventDefault();const o=l(x);if(I(o),N("",o)){if(a){let i=!1;S.current.forEach((f,y)=>{!i&&N(y,o)&&(i=q(y))})}return L.current=!0,!1}return s(x),!0},Qe=d(e+19,({for:s,children:n})=>{const o=$(s,g);return(o==null?void 0:o.message)?ee(n)?n(o):K("span",{className:H(o,c),children:o.message}):!1}),Ee=!N(),Xe=d(e+20,({children:s,focusable:n=!1})=>{if(Ee)return!1;const i=Array.from(S.current).map(f=>f[0]).filter(f=>N(f,g)).sort().map(f=>{const y=$(f);return K("li",{className:H(y,c),children:n?K("a",{onClick:()=>q(f),children:y.message}):y.message},f)});return ee(s)?s(i):i});return{getValue:ie,setValue:de,register:He,onChange:me,onBlur:ge,getRef:Ye,setRef:ye,trigger:le,handleSubmit:Ge,hasError:N,getError:$,clearError:s=>I(fe(s)),setErrors:s=>{L.current=!0,I(s)},array:{clear:ze,append:Je,prepend:Le,remove:Ue,swap:We},key:Ae,Error:Qe,Errors:Xe,formState:{errors:g,isValid:Ee,isTouched:V.current,isDirty:J.current,hadError:L.current,reset:Ke}}};p.default=Fe,p.yupResolver=Ce,p.zodResolver=xe,Object.defineProperty(p,"__esModule",{value:!0}),p[Symbol.toStringTag]="Module"});
