var Ke=Object.defineProperty;var ie=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var ue=(y,u,v)=>u in y?Ke(y,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):y[u]=v,O=(y,u)=>{for(var v in u||(u={}))We.call(u,v)&&ue(y,v,u[v]);if(ie)for(var v of ie(u))Ue.call(u,v)&&ue(y,v,u[v]);return y};(function(y,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(y=typeof globalThis!="undefined"?globalThis:y||self,u(y["@rvision/use-form"]={},y.react))})(this,function(y,u){"use strict";function v(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var fe=v(u);const ae=()=>{throw new ReferenceError("useEvent called while rendering.")},_=e=>{const n=u.useRef(ae);return u.useLayoutEffect(()=>{n.current=e}),u.useCallback((...o)=>n.current(...o),[])},pe=["object","function"];let de=Date.now();const le=()=>{const e=u.useRef(new WeakMap);return u.useEffect(()=>()=>{(e==null?void 0:e.current)&&(e.current=new WeakMap)},[]),u.useCallback((n={})=>{const o=e.current;if(o.has(n))return o.get(n);if(!pe.includes(typeof n))return`key-${n}`;const s=(++de).toString(36);return o.set(n,s),s},[e])};var Q={exports:{}},I={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ye=fe.default,me=Symbol.for("react.element"),we=Symbol.for("react.fragment"),ve=Object.prototype.hasOwnProperty,Ee=ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_e={key:!0,ref:!0,__self:!0,__source:!0};function X(e,n,o){var s,i={},a=null,S=null;o!==void 0&&(a=""+o),n.key!==void 0&&(a=""+n.key),n.ref!==void 0&&(S=n.ref);for(s in n)ve.call(n,s)&&!_e.hasOwnProperty(s)&&(i[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps,n)i[s]===void 0&&(i[s]=n[s]);return{$$typeof:me,type:e,key:a,ref:S,props:i,_owner:Ee.current}}I.Fragment=we,I.jsx=X,I.jsxs=X,Q.exports=I;const K=Q.exports.jsx,W=e=>!Number.isNaN(e),Z=e=>parseInt(e,10),q=e=>typeof e=="function",{isArray:k}=Array,$=JSON.stringify,M=Object.keys,g={},T=()=>g,E={key:"",name:"","aria-invalid":!1,className:"",onChange:T,onBlur:T,ref:T,value:"",checked:!1},ke=/\[([^\]]+)\]/g;let L={};const J=e=>{if(!e)return[];if(L[e])return L[e];const n=e.replace(ke,".$1").split(".");return L[e]=n,n},U=e=>typeof e!="object"||e===null?e:e instanceof Date?new Date(e.getTime()):k(e)?e.reduce((n,o,s)=>(n[s]=U(o),n),[]):e instanceof Object?M(e).reduce((n,o)=>(n[o]=U(e[o]),n),{}):e,m=(e,n)=>{if(n!==void 0){if(!k(e))return m(J(e),n);switch(e.length){case 0:return n;default:return m(e.slice(1),n[e[0]])}}},R=(e,n,o)=>{if(!k(e)){R(J(e),n,o);return}if(e.length===0)return;const s=e[0];if(e.length===1){n[s]=o;return}const i=Z(e[1]);W(i)?(n[s]=n[s]===void 0?[]:n[s],n[s][i]=n[s][i]===void 0?{}:n[s][i],e.length===2?n[s][i]=o:R(e.slice(2),n[s][i],o)):(n[s]=n[s]===void 0?{}:O({},n[s]),R(e.slice(1),n[s],o))},A=(e,n)=>{if(!k(e)){A(J(e),n);return}if(e.length===0||n===void 0)return;const o=e[0];if(e.length===1){delete n[o];return}if(n[o]===void 0)return;const s=Z(e[1]);W(s)?e.length===2?delete n[o][s]:A(e.slice(2),n[o][s]):A(e.slice(1),n[o])},x=(e,n)=>{if(!k(e)){x(J(e),n);return}A(e,n);const o=e.map((s,i)=>i===0?[...e]:[...e].slice(0,-1*i));for(const s of o){const i=m(s,n);i!==void 0&&(k(i)?(i.length===0||i.every(a=>M(a||g).length===0))&&A(s,n):M(i||g).length===0&&A(s,n))}},Re=e=>{const{value:n,type:o,checked:s,options:i,files:a,multiple:S,valueAsNumber:l}=e.target;switch(o){case"checkbox":return s;case"range":return l;case"number":if(n==="")return null;const w=Number.parseFloat(n);return W(w)?w:void 0;case"file":return S?a:a.item(0);case"select-multiple":return[...i].filter(b=>b.selected).map(b=>b.value);default:return n}},Y=(e,n)=>{const o=m(e,n);if(o&&!k(o)){const s=O({},n);return x(e,s),s}return n},P=(e,n,o)=>{const s=m(e,n);if(s&&k(s)){const i=O({},n),a=o([...s]);return R(e,i,a),i}return n},ee=(e,n,o,s)=>{const i=m(n,e);if(k(i)){const a=[...i],S=a[o];return a[o]=a[s],a[s]=S,a}return i},h=(e,n,o)=>`${o||""} ${n||""} ${e.type?`error-${e.type}`:""}`.trim(),j=e=>e&&e.focus?(e.focus(),!0):!1,Ce=({defaultValues:e,mode:n="onSubmit",classNameError:o=null,shouldFocusError:s=!1,resolver:i=T})=>{const[a,S]=u.useState(e||g),[l,w]=u.useState({}),b=u.useRef(!1),z=u.useRef(!1),B=u.useRef(new Map),ne=u.useRef(""),G=le(),Oe=n==="onBlur",Se=n==="onChange",H=u.useCallback(r=>{const t=r||g;ne.current=$(t),S(U(t))},[]);u.useEffect(()=>(H(e),()=>{L={}}),[e,H]);const re=(r="")=>m(r,a),be=(r="",t=l)=>m(r,t),C=(r="",t=l)=>r===""?M(t).length>0:m(r,t)!==void 0,V=_((r,t=l)=>{if(C(r,t)){const c=O({},t);return x(r,c),w(c),c}return t}),ge=_(r=>{const t=O({},l);for(const c of M(r))C(c)&&x(c,t),R(c,t,r[c]);return w(t),t}),se=_((r="",t=a)=>new Promise((c=T)=>{const f=i(t);r===""&&(w(f),c(f));const p=k(r)?r:[r],d=O({},l);p.forEach(N=>{const F=m(N,f);x(N,d),F!==void 0&&R(N,d,F)}),w(d),c(d)})),D=_((r,t,c=!0)=>new Promise((f=T)=>{S(p=>{b.current=!0;const d=O({},r===""?t:p);R(r,d,t),z.current=ne.current!==$(d);let N=l;if(c&&(C(r)||Se)){N=V(r);const F=m(r,i(d));F&&(R(r,N,F),w(N))}return f({values:d,errors:N}),d})})),Te=_((r,t)=>{const c=[...m(r,a),t];D(r,c,!1);const f=Y(r,l);return w(f),c}),Ae=_((r,t)=>{const c=[t,...m(r,a)];D(r,c,!1);let f=Y(r,l);return f=P(r,f,p=>[void 0,...p]),w(f),c}),De=_((r,t)=>{const c=m(r,a).filter((p,d)=>t!==d);D(r,c,!1);let f=Y(r,l);return f=V(`${r}.${t}`,f),f=P(r,f,p=>(p.splice(t,1),p)),w(f),c}),Me=_((r,t,c)=>{const f=ee(a,r,t,c);D(r,f);const p=ee(l,r,t,c),d=O({},l);return R(r,d,p),w(d),f}),xe=u.useCallback(r=>B.current.get(r),[]),te=u.useCallback((r,t)=>{t&&B.current.set(r,t)},[]),Be=u.useCallback(r=>r&&te(r.name,r),[]),oe=_(r=>{D(r.target.name,Re(r))}),ce=_(r=>{const{name:t}=r.target,c=m(t,i(a));if(c){const f=O({},l);R(t,f,c),w(f),s&&j(B.current.get(t))}else V(t)}),Fe=(r,t="")=>{const c=re(r),f=C(r);return E.key=E.name=r,E["aria-invalid"]=f,E.className=h(g,f?o:!1,t),E.onChange=oe,E.onBlur=Oe?ce:void 0,E.ref=Be,c===!0||c===!1?(E.checked=c,E.value=void 0):(E.value=`${c}`=="0"?c:c||"",E.checked=void 0),E},Ie=r=>t=>{t&&(t==null||t.preventDefault());const c=i(a);if(w(c),C("",c)){if(s){let f=!1;B.current.forEach((p,d)=>{!f&&C(d,c)&&(f=j(p))})}return!1}return r(a),!0},Le=_((r=e,t=!0)=>{H(r),b.current=!1,z.current=!1,t&&se("",r)}),Je=u.useCallback(({for:r,children:t})=>{const c=m(r,l);return!c||k(c)?!1:q(t)?t(c):K("span",{className:h(c,o),children:c.message})},[l,o]),Ve=u.useCallback(({children:r,focusable:t=!1})=>{if(!C("",l))return!1;const c=Array.from(B.current).filter(p=>C(p[0])).map(p=>{const[d,N]=p;return{error:m(d,l),element:N}});if(c.length===0)return!1;const f=c.map(({error:p,element:d})=>K("li",{className:h(p,o),children:t?K("a",{onClick:()=>j(d),children:p.message}):p.message},G(p)));return q(r)?r(f):f},[l,o,G]);return{getValue:re,setValue:D,register:Fe,onChange:oe,onBlur:ce,getRef:xe,setRef:te,trigger:se,handleSubmit:Ie,hasError:C,getError:be,clearError:V,setErrors:ge,append:Te,prepend:Ae,remove:De,swap:Me,key:G,reset:Le,Error:Je,Errors:Ve,formState:{errors:l,isValid:!C(),isTouched:b.current,isDirty:z.current}}},Ne=e=>n=>{const o={};try{e.validateSync(n,{abortEarly:!1})}catch(s){for(const i of s.inner)R(i.path,o,{message:i.message,type:i.type})}return o};y.default=Ce,y.yupResolver=Ne,Object.defineProperty(y,"__esModule",{value:!0}),y[Symbol.toStringTag]="Module"});
