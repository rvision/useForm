var $e=Object.defineProperty,Pe=Object.defineProperties;var er=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var rr=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable;var Re=(l,a,w)=>a in l?$e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:w}):l[a]=w,N=(l,a)=>{for(var w in a||(a={}))rr.call(a,w)&&Re(l,w,a[w]);if(we)for(var w of we(a))tr.call(a,w)&&Re(l,w,a[w]);return l},P=(l,a)=>Pe(l,er(a));(function(l,a){typeof exports=="object"&&typeof module!="undefined"?a(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],a):(l=typeof globalThis!="undefined"?globalThis:l||self,a(l["@rvision/use-form"]={},l.react))})(this,function(l,a){"use strict";function w(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Se=w(a);const ee=e=>!Number.isNaN(e),Ne=e=>parseInt(e,10),re=e=>typeof e=="function",{isArray:F}=Array,te=e=>JSON.stringify(e,(t,o)=>o instanceof Set?[...o]:o),se=Object.keys,x={},A=()=>x;let ke=9999;const M=new WeakMap,Oe=e=>{let t=M.get(e);return t||(t=(++ke).toString(36).split("").reduce((o,c)=>c+o,""),M.set(e,t)),t},ne=e=>{let t;return e instanceof Set?t=new Set([...e]):t=F(e)?[...e]:N({},e),M.has(e)&&(M.set(t,M.get(e)),M.delete(e)),t},Te=/\[([^\]]+)\]/g;let J=new Map;const L=e=>{if(!e)return[];let t=J.get(e);return t||(t=e.replace(Te,".$1").split("."),J.set(e,t),t)},be=()=>{J=new Map},V=(e,t)=>{if(t!==void 0)return e.length===0?t:V(e.slice(1),t[e[0]])},v=(e,t)=>V(L(e),t),z=(e,t,o)=>{const{length:c}=e,i=e[0];switch(c){case 0:t=o;return;case 1:t[i]=o;return;default:{const _=t[i]===void 0,y=e[1],E=ee(Ne(y)),m=E?[]:{};t[i]=_?m:ne(t[i]),E?(t[i][y]=t[i][y]===void 0?{}:ne(t[i][y]),z(e.slice(2),t[i][y],o)):z(e.slice(1),t[i],o)}break}},k=(e,t,o)=>{const c=N({},t);return z(L(e),c,o),c},I=(e,t)=>{const{length:o}=e;if(o===0||t===void 0)return;const c=e[0];if(o===1){delete t[c];return}I(e.slice(1),t[c])},oe=e=>se(e||x).length===0,Ce=(e,t)=>{I(e,t),e.map((c,i)=>i===0?[...e]:[...e].slice(0,-1*i)).forEach(c=>{const i=V(c,t);i!==void 0&&(F(i)?(i.length===0||i.every(oe))&&(i.message||I(c,t)):oe(i)&&I(c,t))})},K=(e,t)=>{const o=N({},t);return Ce(L(e),o),o},Ae=e=>{const{value:t,type:o,checked:c,options:i,files:_,multiple:y,valueAsNumber:E,valueAsDate:m}=e.target;switch(o){case"checkbox":return c;case"range":return E;case"date":return m;case"number":{if(t==="")return null;const S=Number.parseFloat(t);return ee(S)?S:void 0}case"file":return y?_:_.item(0);case"select-multiple":return[...i].filter(S=>S.selected).map(S=>S.value);default:return t}},ce=(e,t,o)=>{const c=v(e,t);return F(c)?k(e,t,o(c)):t},ie=(e,t,o)=>{if(F(e)){const c=[...e];return[c[t],c[o]]=[c[o],c[t]],c}return e},U=(e,t,o)=>`${o||""} ${t||""} ${e.type?`error-${e.type}`:""}`.trim();var ae={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Me=Se.default,he=Symbol.for("react.element"),xe=Symbol.for("react.fragment"),De=Object.prototype.hasOwnProperty,Be=Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fe={key:!0,ref:!0,__self:!0,__source:!0};function ue(e,t,o){var c,i={},_=null,y=null;o!==void 0&&(_=""+o),t.key!==void 0&&(_=""+t.key),t.ref!==void 0&&(y=t.ref);for(c in t)De.call(t,c)&&!Fe.hasOwnProperty(c)&&(i[c]=t[c]);if(e&&e.defaultProps)for(c in t=e.defaultProps,t)i[c]===void 0&&(i[c]=t[c]);return{$$typeof:he,type:e,key:_,ref:y,props:i,_owner:Be.current}}j.Fragment=xe,j.jsx=ue,j.jsxs=ue,ae.exports=j;const W=ae.exports.jsx,p=e=>{const t=a.useRef(e);return t.current=e,a.useCallback((...o)=>t.current(...o),[])},R={key:"",name:"","aria-invalid":!1,className:"",onChange:A,onBlur:A,ref:A,value:"",checked:!1},Ie=({defaultValues:e,mode:t,classNameError:o,shouldFocusError:c=!1,resolver:i=A})=>{const[_,y]=a.useState({values:e||x,errors:{}}),{values:E,errors:m}=_,S=a.useRef(!1),Y=a.useRef(!1),H=a.useRef(!1),T=a.useRef(new Map),fe=a.useRef(),G=t==="onSubmit",de=t==="onBlur",pe=t==="onChange",Le=!G&&!de&&!pe,b=r=>y(s=>P(N({},s),{errors:r})),Q=a.useCallback(r=>{const s=r||x;fe.current=te(s),y(n=>P(N({},n),{values:N({},s)}))},[]);a.useEffect(()=>(Q(e),be),[e,Q]);const X=r=>{const s=T.current.get(r);return s&&s.focus?(s.focus(),!0):!1},Z=p((r="")=>(T.current.has(r)||T.current.set(r,null),v(r,E))),le=p((r="",s=m)=>v(r,s)),O=p((r="",s=m)=>r===""?se(s).length>0:v(r,s)!==void 0),q=p((r,s=m)=>{let n=s;return O(r,s)&&(n=K(r,s)),n}),me=p((r="",s=E)=>new Promise((n=A)=>{const u=i(s);if(r===""){b(u),n(u);return}const f=isArray(r)?r:[r];let d=N({},m);f.forEach(g=>{const B=v(g,u);d=K(g,d),B!==void 0&&(d=k(g,d,B))}),b(d),n(d)})),ye=pe||H.current&&Le,D=ye&&!G,h=p((r,s)=>{let n=m;if((ye||O(r))&&(n=K(r,n),!G)){const u=v(r,i(s));u&&(n=k(r,n,u))}return n}),$=p((r,s,n)=>{const u=v(r,i(n)),f=v(r,s);return f&&(delete f.message,delete f.type,(u==null?void 0:u.message)&&(f.message=u.message,f.type=u.type)),s}),C=p((r,s,n=h)=>new Promise((u=A)=>{y(f=>{const d=k(r,E,s);S.current=!0,Y.current=fe.current!==te(d);const g=n(r,d),B={values:d,errors:g};return u(B),B})})),Ve=p(r=>C(r,[],D?h:()=>[])),ze=p((r,s)=>{const n=D?h:()=>m;return C(r,[...v(r,E),s],n)}),Ke=p((r,s)=>{const n=D?h:(u,f)=>{let d=ce(r,m,g=>[void 0,...g]);return $(r,d,f)};return C(r,[s,...v(r,E)],n)}),Ue=p((r,s)=>{const n=D?h:(u,f)=>{let d=q(`${r}.${s}`,N({},m));return d=ce(r,d,g=>(g.splice(s,1),g)),$(r,d,f)};return C(r,v(r,E).filter((u,f)=>f!==s),n)}),We=p((r,s,n)=>{const u=D?h:(f,d)=>{let g=ie(v(r,m),s,n);return g=g?k(r,m,g):m,$(r,g,d)};return C(r,ie(Z(r),s,n),u)}),Ye=p(r=>T.current.get(r)),_e=p((r,s)=>{s&&T.current.set(r,s)}),He=p(r=>r&&_e(r.name,r)),ve=p(r=>C(r.target.name,Ae(r))),ge=p(r=>{const{name:s}=r.target,n=v(s,i(E));n?(b(k(s,m,n)),c&&X(s)):b(q(s))}),Ge=p((r,s="")=>{const n=Z(r),u=O(r);return R.name=r,R["aria-invalid"]=u,R.className=U(x,u?o:"",s),R.onChange=ve,R.ref=He,R.onBlur=de?ge:void 0,n===!0||n===!1?(R.checked=n,R.value=void 0):(R.value=`${n}`=="0"?n:n||"",R.checked=void 0),R}),Qe=r=>s=>{s&&(s==null||s.preventDefault());const n=i(E);if(b(n),O("",n)){if(c){let u=!1;T.current.forEach((f,d)=>{!u&&O(d,n)&&(u=X(d))})}return H.current=!0,!1}return r(E),!0},Xe=p((r=e,s=!0)=>{Q(r),S.current=!1,Y.current=!1,s&&me("",r)}),Ze=p(({for:r,children:s})=>{const n=le(r,m);return(n==null?void 0:n.message)?re(s)?s(n):W("span",{className:U(n,o),children:n.message}):!1}),Ee=!O(),qe=p(({children:r,focusable:s=!1})=>{if(Ee)return!1;const u=Array.from(T.current).filter(f=>!!f[1]).map(f=>f[0]).filter(f=>O(f,m)).sort().map(f=>{const d=v(f,m);return W("li",{className:U(d,o),children:s?W("a",{onClick:()=>X(f),children:d.message}):d.message},f)});return re(r)?r(u):u});return{getValue:Z,setValue:C,register:Ge,onChange:ve,onBlur:ge,getRef:Ye,setRef:_e,trigger:me,handleSubmit:Qe,hasError:O,getError:le,clearError:r=>b(q(r)),setErrors:r=>{H.current=!0,b(r)},array:{append:ze,prepend:Ke,remove:Ue,swap:We,clear:Ve},key:Oe,reset:Xe,Error:Ze,Errors:qe,formState:{errors:m,isValid:Ee,isTouched:S.current,isDirty:Y.current}}},je=e=>t=>{let o={};try{e.validateSync(t,{abortEarly:!1})}catch(c){for(const i of c.inner){const _=v(i.path,o)||{};_.message=i.message,_.type=i.type,o=k(i.path,o,_)}}return o},Je=e=>t=>{let o={};const c=e.safeParse(t);return c.success||c.error.errors.forEach(i=>{const _=i.path.join("."),y=v(_,o)||{};y.message=i.message,y.type=i.type,o=k(_,o,y)}),o};l.default=Ie,l.yupResolver=je,l.zodResolver=Je,Object.defineProperty(l,"__esModule",{value:!0}),l[Symbol.toStringTag]="Module"});
