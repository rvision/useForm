var qe=Object.defineProperty,$e=Object.defineProperties;var Pe=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var er=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable;var _e=(p,u,m)=>u in p?qe(p,u,{enumerable:!0,configurable:!0,writable:!0,value:m}):p[u]=m,R=(p,u)=>{for(var m in u||(u={}))er.call(u,m)&&_e(p,m,u[m]);if(ve)for(var m of ve(u))rr.call(u,m)&&_e(p,m,u[m]);return p},V=(p,u)=>$e(p,Pe(u));(function(p,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(p=typeof globalThis!="undefined"?globalThis:p||self,u(p["@rvision/use-form"]={},p.react))})(this,function(p,u){"use strict";function m(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var we=m(u);const $=r=>typeof r=="function",{isArray:C}=Array,P=r=>JSON.stringify(r,(s,o)=>o instanceof Set?[...o].sort():o),Re=Object.keys,M={},h=()=>M;let Ne=9999;const A=new WeakMap,Se=r=>{let s=A.get(r);return s||(s=(++Ne).toString(36).split("").reduce((o,c)=>c+o,""),A.set(r,s)),s},ee=r=>{let s;return r instanceof Set?s=new Set([...r]):s=C(r)?[...r]:R({},r),A.has(r)&&(A.set(s,A.get(r)),A.delete(r)),s},ke=/\[([^\]]+)\]/g;let z=new Map;const K=r=>{if(!r)return[];let s=z.get(r);return s||(s=r.replace(ke,".$1").split(".").map(o=>isNaN(parseInt(o,10))?o:+o),z.set(r,s),s)},Oe=()=>{z=new Map},U=(r,s)=>{if(s!==void 0)return r.length===0?s:U(r.slice(1),s[r[0]])},N=(r,s)=>U(K(r),s),re=(r,s,o)=>{const{length:c}=r;if(c===0)return;const i=r[0];if(c===1){s[i]=o;return}const y=s[i]!==void 0,l=r[1],_=!isNaN(l);s[i]=y?ee(s[i]):_?[]:{},_&&(s[i][l]=s[i][l]===void 0?{}:ee(s[i][l])),re(r.slice(1),s[i],o)},k=(r,s,o)=>{const c=R({},s);return re(K(r),c,o),c},B=(r,s)=>{const{length:o}=r;if(o===0||s===void 0)return;const c=r[0];if(o===1){delete s[c];return}B(r.slice(1),s[c])},W=r=>Re(r||M).length===0,Te=(r,s)=>{B(r,s),r.map((c,i)=>i===0?[...r]:[...r].slice(0,-1*i)).forEach(c=>{const i=U(c,s);i!==void 0&&(C(i)?(i.length===0||i.every(W))&&(i.message||B(c,s)):W(i)&&B(c,s))})},F=(r,s)=>{const o=R({},s);return Te(K(r),o),o},Ae=r=>{const{value:s,type:o,checked:c,options:i,files:y,multiple:l,valueAsNumber:_,valueAsDate:g}=r.target;switch(o){case"checkbox":return c;case"range":return _;case"date":return g;case"number":{if(s==="")return null;const v=Number.parseFloat(s);return isNaN(v)?void 0:+v}case"file":return l?y:y.item(0);case"select-multiple":return[...i].filter(v=>v.selected).map(v=>v.value);default:return s}},se=(r,s,o)=>{if(C(r)){const c=[...r];return[c[s],c[o]]=[c[o],c[s]],c}return r},Y=(r,s,o)=>`${o||""} ${s||""} ${r.type?`error-${r.type}`:""}`.trim(),be=r=>s=>{let o={};try{r.validateSync(s,{abortEarly:!1})}catch(c){for(const i of c.inner){const y=N(i.path,o)||{};y.message=i.message,y.type=i.type,o=k(i.path,o,y)}}return o},Ce=r=>s=>{let o={};const c=r.safeParse(s);return c.success||c.error.errors.forEach(i=>{const y=i.path.join("."),l=N(y,o)||{};l.message=i.message,l.type=i.type,o=k(y,o,l)}),o};var ne={exports:{}},J={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Me=we.default,he=Symbol.for("react.element"),xe=Symbol.for("react.fragment"),De=Object.prototype.hasOwnProperty,Ie=Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Be={key:!0,ref:!0,__self:!0,__source:!0};function te(r,s,o){var c,i={},y=null,l=null;o!==void 0&&(y=""+o),s.key!==void 0&&(y=""+s.key),s.ref!==void 0&&(l=s.ref);for(c in s)De.call(s,c)&&!Be.hasOwnProperty(c)&&(i[c]=s[c]);if(r&&r.defaultProps)for(c in s=r.defaultProps,s)i[c]===void 0&&(i[c]=s[c]);return{$$typeof:he,type:r,key:y,ref:l,props:i,_owner:Ie.current}}J.Fragment=xe,J.jsx=te,J.jsxs=te,ne.exports=J;const H=ne.exports.jsx,oe="aria-invalid",d=r=>{const s=u.useRef(r);return s.current=r,u.useCallback((...o)=>s.current(...o),[])},E={name:"",[oe]:!1,className:"",onChange:h,onBlur:h,ref:h,value:"",checked:!1},Fe=({defaultValues:r,mode:s,classNameError:o,shouldFocusError:c=!1,resolver:i=h})=>{const[y,l]=u.useState({values:r||M,errors:{}}),{values:_,errors:g}=y,v=u.useRef(!1),G=u.useRef(!1),L=u.useRef(!1),O=u.useRef(new Map),ce=u.useRef(),Q=s==="onSubmit",ie=s==="onBlur",ae=s==="onChange",Je=!Q&&!ie&&!ae,x=e=>l(n=>V(R({},n),{errors:e})),X=u.useCallback(e=>{const n=e||M;ce.current=P(n),l(t=>V(R({},t),{values:R({},n)}))},[]);u.useEffect(()=>(X(r),Oe),[r,X]);const Z=e=>{const n=O.current.get(e);return n&&n.focus?(n.focus(),!0):!1},b=d((e="")=>(O.current.has(e)||O.current.set(e,null),N(e,_))),j=d((e="",n=g)=>N(e,n)),S=d((e="",n=g)=>e===""?!W(n):N(e,n)!==void 0),ue=d((e,n=g)=>{let t=n;return S(e,n)&&(t=F(e,n)),t}),fe=d((e="")=>new Promise((n=h)=>{l(t=>{let a=i(t.values);if(e!==""){const w=C(e)?e:[e];let I=R({},t.errors);w.forEach(q=>{const Ee=N(q,a);I=F(q,I),Ee!==void 0&&(I=k(q,I,Ee))}),a=I}const f=V(R({},t),{errors:a});return n(a,t.values),f})})),de=ae||L.current&&Je,Le=de&&!Q,pe=d((e,n)=>{let t=g;if((de||S(e))&&(t=F(e,t),!Q)){const a=N(e,i(n));a&&(t=k(e,t,a))}return t}),T=d((e,n,t=pe)=>l(a=>{const f=k(e,a.values,n);return v.current=!0,G.current=ce.current!==P(f),{values:f,errors:t(e,f)}})),D=d((e,n)=>Le?pe:()=>{let t=g;const a=j(e);if(C(a)){const f=n(a);a.message&&(f.message=a.message,f.type=a.type),t=f.length>0?k(e,g,f):F(e,t)}return t}),je=d(e=>T(e,[],D(e,()=>[]))),Ve=d((e,n)=>T(e,[...b(e),n],D(e,t=>t))),ze=d((e,n)=>T(e,[n,...b(e)],D(e,t=>[void 0,...t]))),Ke=d((e,n)=>T(e,b(e).filter((t,a)=>a!==n),D(e,t=>t.filter((a,f)=>f!==n)))),Ue=d((e,n,t)=>T(e,se(b(e),n,t),D(e,a=>se(a,n,t)))),We=d(e=>O.current.get(e)),le=d((e,n)=>{n&&O.current.set(e,n)}),Ye=d(e=>e&&le(e.name,e)),ye=d(e=>T(e.target.name,Ae(e))),me=d(e=>{const{name:n}=e.target,t=N(n,i(_));t?(x(k(n,g,t)),c&&Z(n)):x(ue(n))}),He=d((e,n="")=>{const t=b(e),a=S(e);return E.name=e,E[oe]=a,E.className=Y(M,a?o:"",n),E.onChange=ye,E.ref=Ye,E.onBlur=ie?me:void 0,t===!0||t===!1?(E.checked=t,E.value=void 0):(E.value=`${t}`=="0"?t:t||"",E.checked=void 0),E}),Ge=d((e=r,n=!0)=>{X(e),v.current=!1,G.current=!1,n&&fe("",e)}),Qe=e=>n=>{n&&n.preventDefault();const t=i(_);if(x(t),S("",t)){if(c){let a=!1;O.current.forEach((f,w)=>{!a&&S(w,t)&&(a=Z(w))})}return L.current=!0,!1}return e(_),!0},Xe=d(({for:e,children:n})=>{const t=j(e,g);return!t||!t.message?!1:$(n)?n(t):H("span",{className:Y(t,o),children:t.message})}),ge=!S(),Ze=d(({children:e,focusable:n=!1})=>{if(ge)return!1;const a=Array.from(O.current).filter(f=>!!f[1]).map(f=>f[0]).filter(f=>S(f,g)).sort().map(f=>{const w=j(f);return H("li",{className:Y(w,o),children:n?H("a",{onClick:()=>Z(f),children:w.message}):w.message},f)});return $(e)?e(a):a});return{getValue:b,setValue:T,register:He,onChange:ye,onBlur:me,getRef:We,setRef:le,trigger:fe,handleSubmit:Qe,hasError:S,getError:j,clearError:e=>x(ue(e)),setErrors:e=>{L.current=!0,x(e)},array:{clear:je,append:Ve,prepend:ze,remove:Ke,swap:Ue},key:Se,Error:Xe,Errors:Ze,formState:{errors:g,isValid:ge,isTouched:v.current,isDirty:G.current,hadError:L.current,reset:Ge}}};p.default=Fe,p.yupResolver=be,p.zodResolver=Ce,Object.defineProperty(p,"__esModule",{value:!0}),p[Symbol.toStringTag]="Module"});
