var qe=Object.defineProperty,$e=Object.defineProperties;var Pe=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var er=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable;var _e=(l,u,E)=>u in l?qe(l,u,{enumerable:!0,configurable:!0,writable:!0,value:E}):l[u]=E,N=(l,u)=>{for(var E in u||(u={}))er.call(u,E)&&_e(l,E,u[E]);if(ve)for(var E of ve(u))rr.call(u,E)&&_e(l,E,u[E]);return l},$=(l,u)=>$e(l,Pe(u));(function(l,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(l=typeof globalThis!="undefined"?globalThis:l||self,u(l["@rvision/use-form"]={},l.react))})(this,function(l,u){"use strict";function E(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var we=E(u);const z=r=>!isNaN(r),P=r=>typeof r=="function",{isArray:x}=Array,ee=r=>JSON.stringify(r,(s,n)=>n instanceof Set?[...n].sort():n),Re=Object.keys,h={},A=()=>h;let Se=9999;const C=new WeakMap,Ne=r=>{let s=C.get(r);return s||(s=(++Se).toString(36).split("").reduce((n,c)=>c+n,""),C.set(r,s)),s},re=r=>{let s;return r instanceof Set?s=new Set([...r]):s=x(r)?[...r]:N({},r),C.has(r)&&(C.set(s,C.get(r)),C.delete(r)),s},ke=/\[([^\]]+)\]/g;let K=new Map;const U=r=>{if(!r)return[];let s=K.get(r);return s||(s=r.replace(ke,".$1").split(".").map(n=>z(parseInt(n,10))?+n:n),K.set(r,s),s)},Oe=()=>{K=new Map},W=(r,s)=>{if(s!==void 0)return r.length===0?s:W(r.slice(1),s[r[0]])},R=(r,s)=>W(U(r),s),se=(r,s,n)=>{const{length:c}=r;if(c===0)return;const i=r[0];if(c===1){s[i]=n;return}const m=s[i]!==void 0,y=r[1],_=z(y);s[i]=m?re(s[i]):_?[]:{},_&&(s[i][y]=s[i][y]===void 0?{}:re(s[i][y])),se(r.slice(1),s[i],n)},k=(r,s,n)=>{const c=N({},s);return se(U(r),c,n),c},F=(r,s)=>{const{length:n}=r;if(n===0||s===void 0)return;const c=r[0];if(n===1){delete s[c];return}F(r.slice(1),s[c])},Y=r=>Re(r||h).length===0,Te=(r,s)=>{F(r,s),r.map((c,i)=>i===0?[...r]:[...r].slice(0,-1*i)).forEach(c=>{const i=W(c,s);i!==void 0&&(x(i)?(i.length===0||i.every(Y))&&(i.message||F(c,s)):Y(i)&&F(c,s))})},J=(r,s)=>{const n=N({},s);return Te(U(r),n),n},be=r=>{const{value:s,type:n,checked:c,options:i,files:m,multiple:y,valueAsNumber:_,valueAsDate:g}=r.target;switch(n){case"checkbox":return c;case"range":return _;case"date":return g;case"number":{if(s==="")return null;const w=Number.parseFloat(s);return z(w)?+w:void 0}case"file":return y?m:m.item(0);case"select-multiple":return[...i].filter(w=>w.selected).map(w=>w.value);default:return s}},te=(r,s,n)=>{if(x(r)){const c=[...r];return[c[s],c[n]]=[c[n],c[s]],c}return r},H=(r,s,n)=>`${n||""} ${s||""} ${r.type?`error-${r.type}`:""}`.trim(),Ae=r=>s=>{let n={};try{r.validateSync(s,{abortEarly:!1})}catch(c){for(const i of c.inner){const m=R(i.path,n)||{};m.message=i.message,m.type=i.type,n=k(i.path,n,m)}}return n},Ce=r=>s=>{let n={};const c=r.safeParse(s);return c.success||c.error.errors.forEach(i=>{const m=i.path.join("."),y=R(m,n)||{};y.message=i.message,y.type=i.type,n=k(m,n,y)}),n};var ne={exports:{}},L={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Me=we.default,xe=Symbol.for("react.element"),he=Symbol.for("react.fragment"),De=Object.prototype.hasOwnProperty,Ie=Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Be={key:!0,ref:!0,__self:!0,__source:!0};function oe(r,s,n){var c,i={},m=null,y=null;n!==void 0&&(m=""+n),s.key!==void 0&&(m=""+s.key),s.ref!==void 0&&(y=s.ref);for(c in s)De.call(s,c)&&!Be.hasOwnProperty(c)&&(i[c]=s[c]);if(r&&r.defaultProps)for(c in s=r.defaultProps,s)i[c]===void 0&&(i[c]=s[c]);return{$$typeof:xe,type:r,key:m,ref:y,props:i,_owner:Ie.current}}L.Fragment=he,L.jsx=oe,L.jsxs=oe,ne.exports=L;const G=ne.exports.jsx,ce="aria-invalid",p=r=>{const s=u.useRef(r);return s.current=r,u.useCallback((...n)=>s.current(...n),[])},v={name:"",[ce]:!1,className:"",onChange:A,onBlur:A,ref:A,value:"",checked:!1},Fe=({defaultValues:r,mode:s,classNameError:n,shouldFocusError:c=!1,resolver:i=A})=>{const[m,y]=u.useState({values:r||h,errors:{}}),{values:_,errors:g}=m,w=u.useRef(!1),Q=u.useRef(!1),j=u.useRef(!1),O=u.useRef(new Map),ie=u.useRef(),X=s==="onSubmit",ae=s==="onBlur",ue=s==="onChange",Je=!X&&!ae&&!ue,T=e=>y(t=>$(N({},t),{errors:e})),Z=u.useCallback(e=>{const t=e||h;ie.current=ee(t),y(o=>$(N({},o),{values:N({},t)}))},[]);u.useEffect(()=>(Z(r),Oe),[r,Z]);const q=e=>{const t=O.current.get(e);return t&&t.focus?(t.focus(),!0):!1},M=p((e="")=>(O.current.has(e)||O.current.set(e,null),R(e,_))),V=p((e="",t=g)=>R(e,t)),S=p((e="",t=g)=>e===""?!Y(t):R(e,t)!==void 0),fe=p((e,t=g)=>{let o=t;return S(e,t)&&(o=J(e,t)),o}),de=p((e="",t=_)=>new Promise((o=A)=>{const a=i(t);if(e===""){T(a),o(a);return}const f=x(e)?e:[e];let d=N({},g);f.forEach(I=>{const B=R(I,a);d=J(I,d),B!==void 0&&(d=k(I,d,B))}),T(d),o(d)})),pe=ue||j.current&&Je,Le=pe&&!X,le=p((e,t)=>{let o=g;if((pe||S(e))&&(o=J(e,o),!X)){const a=R(e,i(t));a&&(o=k(e,o,a))}return o}),b=p((e,t,o=le)=>new Promise((a=A)=>{y(f=>{const d=k(e,f.values,t);w.current=!0,Q.current=ie.current!==ee(d);const I=o(e,d),B={values:d,errors:I};return a(B),B})})),D=p((e,t,o)=>Le&&t?le:()=>{let a=g;const f=V(e);if(x(f)){const d=o(f);f.message&&(d.message=f.message,d.type=f.type),a=d.length>0?k(e,g,d):J(e,a)}return a}),je=p((e,t=!1)=>b(e,[],D(e,t,()=>[]))),Ve=p((e,t,o=!1)=>b(e,[...M(e),t],D(e,o,a=>a))),ze=p((e,t,o=!1)=>b(e,[t,...M(e)],D(e,o,a=>[void 0,...a]))),Ke=p((e,t,o=!1)=>b(e,M(e).filter((a,f)=>f!==t),D(e,o,a=>a.filter((f,d)=>d!==t)))),Ue=p((e,t,o,a=!1)=>b(e,te(M(e),t,o),D(e,a,f=>te(f,t,o)))),We=p(e=>O.current.get(e)),me=p((e,t)=>{t&&O.current.set(e,t)}),Ye=p(e=>e&&me(e.name,e)),ye=p(e=>b(e.target.name,be(e))),ge=p(e=>{const{name:t}=e.target,o=R(t,i(_));o?(T(k(t,g,o)),c&&q(t)):T(fe(t))}),He=p((e,t="")=>{const o=M(e),a=S(e);return v.name=e,v[ce]=a,v.className=H(h,a?n:"",t),v.onChange=ye,v.ref=Ye,v.onBlur=ae?ge:void 0,o===!0||o===!1?(v.checked=o,v.value=void 0):(v.value=`${o}`=="0"?o:o||"",v.checked=void 0),v}),Ge=p((e=r,t=!0)=>{Z(e),w.current=!1,Q.current=!1,t&&de("",e)}),Qe=e=>t=>{t&&t.preventDefault();const o=i(_);if(T(o),S("",o)){if(c){let a=!1;O.current.forEach((f,d)=>{!a&&S(d,o)&&(a=q(d))})}return j.current=!0,!1}return e(_),!0},Xe=p(({for:e,children:t})=>{const o=V(e,g);return!o||!o.message?!1:P(t)?t(o):G("span",{className:H(o,n),children:o.message})}),Ee=!S(),Ze=p(({children:e,focusable:t=!1})=>{if(Ee)return!1;const a=Array.from(O.current).filter(f=>!!f[1]).map(f=>f[0]).filter(f=>S(f,g)).sort().map(f=>{const d=V(f);return G("li",{className:H(d,n),children:t?G("a",{onClick:()=>q(f),children:d.message}):d.message},f)});return P(e)?e(a):a});return{getValue:M,setValue:b,register:He,onChange:ye,onBlur:ge,getRef:We,setRef:me,trigger:de,handleSubmit:Qe,hasError:S,getError:V,clearError:e=>T(fe(e)),setErrors:e=>{j.current=!0,T(e)},array:{clear:je,append:Ve,prepend:ze,remove:Ke,swap:Ue},key:Ne,Error:Xe,Errors:Ze,formState:{errors:g,isValid:Ee,isTouched:w.current,isDirty:Q.current,hadError:j.current,reset:Ge}}};l.default=Fe,l.yupResolver=Ae,l.zodResolver=Ce,Object.defineProperty(l,"__esModule",{value:!0}),l[Symbol.toStringTag]="Module"});
