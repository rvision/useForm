var Ze=Object.defineProperty,qe=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,er=Object.prototype.propertyIsEnumerable;var ve=(p,u,m)=>u in p?Ze(p,u,{enumerable:!0,configurable:!0,writable:!0,value:m}):p[u]=m,R=(p,u)=>{for(var m in u||(u={}))Pe.call(u,m)&&ve(p,m,u[m]);if(Ee)for(var m of Ee(u))er.call(u,m)&&ve(p,m,u[m]);return p},j=(p,u)=>qe(p,$e(u));(function(p,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(p=typeof globalThis!="undefined"?globalThis:p||self,u(p["@rvision/use-form"]={},p.react))})(this,function(p,u){"use strict";function m(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var _e=m(u);const q=r=>typeof r=="function",we=Object.keys,C={},M=()=>C;let Re=9999;const T=new WeakMap,Ne=r=>{let s=T.get(r);return s||(s=(++Re).toString(36).split("").reduce((o,c)=>c+o,""),T.set(r,s)),s},$=r=>{let s;return r instanceof Set?s=new Set([...r]):s=Array.isArray(r)?[...r]:R({},r),T.has(r)&&(T.set(s,T.get(r)),T.delete(r)),s},Se=/\[([^\]]+)\]/g;let V=new Map;const z=r=>{if(!r)return[];let s=V.get(r);return s||(s=r.replace(Se,".$1").split(".").map(o=>isNaN(parseInt(o,10))?o:+o),V.set(r,s),s)},ke=()=>{V=new Map},K=(r,s)=>{if(s!==void 0)return r.length===0?s:K(r.slice(1),s[r[0]])},N=(r,s)=>K(z(r),s),P=(r,s,o)=>{const{length:c}=r;if(c===0)return;const i=r[0];if(c===1){s[i]=o;return}const y=s[i]!==void 0,l=r[1],_=!isNaN(l);s[i]=y?$(s[i]):_?[]:{},_&&(s[i][l]=s[i][l]===void 0?{}:$(s[i][l])),P(r.slice(1),s[i],o)},k=(r,s,o)=>{const c=R({},s);return P(z(r),c,o),c},I=(r,s)=>{const{length:o}=r;if(o===0||s===void 0)return;const c=r[0];if(o===1){delete s[c];return}I(r.slice(1),s[c])},U=r=>we(r||C).length===0,Ae=(r,s)=>{I(r,s),r.map((c,i)=>i===0?[...r]:[...r].slice(0,-1*i)).forEach(c=>{const i=K(c,s);i!==void 0&&(Array.isArray(i)?(i.length===0||i.every(U))&&(i.message||I(c,s)):U(i)&&I(c,s))})},B=(r,s)=>{const o=R({},s);return Ae(z(r),o),o},Oe=r=>{const{value:s,type:o,checked:c,options:i,files:y,multiple:l,valueAsNumber:_,valueAsDate:g}=r.target;switch(o){case"checkbox":return c;case"range":return _;case"date":return g;case"number":{if(s==="")return null;const v=Number.parseFloat(s);return isNaN(v)?void 0:+v}case"file":return l?y:y.item(0);case"select-multiple":return[...i].filter(v=>v.selected).map(v=>v.value);default:return s}},ee=(r,s,o)=>{if(Array.isArray(r)){const c=[...r];return[c[s],c[o]]=[c[o],c[s]],c}return r},W=(r,s,o)=>`${o||""} ${s||""} ${r.type?`error-${r.type}`:""}`.trim(),Te=r=>s=>{let o={};try{r.validateSync(s,{abortEarly:!1})}catch(c){for(const i of c.inner){const y=N(i.path,o)||{};y.message=i.message,y.type=i.type,o=k(i.path,o,y)}}return o},be=r=>s=>{let o={};const c=r.safeParse(s);return c.success||c.error.errors.forEach(i=>{const y=i.path.join("."),l=N(y,o)||{};l.message=i.message,l.type=i.type,o=k(y,o,l)}),o};var re={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ce=_e.default,Me=Symbol.for("react.element"),he=Symbol.for("react.fragment"),xe=Object.prototype.hasOwnProperty,De=Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ie={key:!0,ref:!0,__self:!0,__source:!0};function se(r,s,o){var c,i={},y=null,l=null;o!==void 0&&(y=""+o),s.key!==void 0&&(y=""+s.key),s.ref!==void 0&&(l=s.ref);for(c in s)xe.call(s,c)&&!Ie.hasOwnProperty(c)&&(i[c]=s[c]);if(r&&r.defaultProps)for(c in s=r.defaultProps,s)i[c]===void 0&&(i[c]=s[c]);return{$$typeof:Me,type:r,key:y,ref:l,props:i,_owner:De.current}}F.Fragment=he,F.jsx=se,F.jsxs=se,re.exports=F;const Y=re.exports.jsx,ne="aria-invalid",te=r=>JSON.stringify(r,(s,o)=>o instanceof Set?[...o].sort():o),d=r=>{const s=u.useRef(r);return s.current=r,u.useCallback((...o)=>s.current(...o),[])},E={name:"",[ne]:!1,className:"",onChange:M,onBlur:M,ref:M,value:"",checked:!1},Be=({defaultValues:r,mode:s,classNameError:o,shouldFocusError:c=!1,resolver:i=M})=>{const[y,l]=u.useState({values:r||C,errors:{}}),{values:_,errors:g}=y,v=u.useRef(!1),H=u.useRef(!1),J=u.useRef(!1),A=u.useRef(new Map),oe=u.useRef(),G=s==="onSubmit",ce=s==="onBlur",ie=s==="onChange",Fe=!G&&!ce&&!ie,h=e=>l(n=>j(R({},n),{errors:e})),Q=u.useCallback(e=>{const n=e||C;oe.current=te(n),l(t=>j(R({},t),{values:R({},n)}))},[]);u.useEffect(()=>(Q(r),ke),[r,Q]);const X=e=>{const n=A.current.get(e);return n&&n.focus?(n.focus(),!0):!1},b=d((e="")=>(A.current.has(e)||A.current.set(e,null),N(e,_))),L=d((e="",n=g)=>N(e,n)),S=d((e="",n=g)=>e===""?!U(n):N(e,n)!==void 0),ae=d((e,n=g)=>{let t=n;return S(e,n)&&(t=B(e,n)),t}),ue=d((e="")=>new Promise((n=M)=>{l(t=>{let a=i(t.values);if(e!==""){const w=Array.isArray(e)?e:[e];let D=R({},t.errors);w.forEach(Z=>{const ge=N(Z,a);D=B(Z,D),ge!==void 0&&(D=k(Z,D,ge))}),a=D}const f=j(R({},t),{errors:a});return n(a,t.values),f})})),fe=ie||J.current&&Fe,Je=fe&&!G,de=d((e,n)=>{let t=g;if((fe||S(e))&&(t=B(e,t),!G)){const a=N(e,i(n));a&&(t=k(e,t,a))}return t}),O=d((e,n,t=de)=>l(a=>{const f=k(e,a.values,n);return v.current=!0,H.current=oe.current!==te(f),{values:f,errors:t(e,f)}})),x=d((e,n)=>Je?de:()=>{let t=g;const a=L(e);if(Array.isArray(a)){const f=n(a);a.message&&(f.message=a.message,f.type=a.type),t=f.length>0?k(e,g,f):B(e,t)}return t}),Le=d(e=>O(e,[],x(e,()=>[]))),je=d((e,n)=>O(e,[...b(e),n],x(e,t=>t))),Ve=d((e,n)=>O(e,[n,...b(e)],x(e,t=>[void 0,...t]))),ze=d((e,n)=>O(e,b(e).filter((t,a)=>a!==n),x(e,t=>t.filter((a,f)=>f!==n)))),Ke=d((e,n,t)=>O(e,ee(b(e),n,t),x(e,a=>ee(a,n,t)))),Ue=d(e=>A.current.get(e)),pe=d((e,n)=>{n&&A.current.set(e,n)}),We=d(e=>e&&pe(e.name,e)),le=d(e=>O(e.target.name,Oe(e))),ye=d(e=>{const{name:n}=e.target,t=N(n,i(_));t?(h(k(n,g,t)),c&&X(n)):h(ae(n))}),Ye=d((e,n="")=>{const t=b(e),a=S(e);return E.name=e,E[ne]=a,E.className=W(C,a?o:"",n),E.onChange=le,E.ref=We,E.onBlur=ce?ye:void 0,t===!0||t===!1?(E.checked=t,E.value=void 0):(E.value=`${t}`=="0"?t:t||"",E.checked=void 0),E}),He=d((e=r,n=!0)=>{Q(e),v.current=!1,H.current=!1,n&&ue("",e)}),Ge=e=>n=>{n&&n.preventDefault();const t=i(_);if(h(t),S("",t)){if(c){let a=!1;A.current.forEach((f,w)=>{!a&&S(w,t)&&(a=X(w))})}return J.current=!0,!1}return e(_),!0},Qe=d(({for:e,children:n})=>{const t=L(e,g);return!t||!t.message?!1:q(n)?n(t):Y("span",{className:W(t,o),children:t.message})}),me=!S(),Xe=d(({children:e,focusable:n=!1})=>{if(me)return!1;const a=Array.from(A.current).filter(f=>!!f[1]).map(f=>f[0]).filter(f=>S(f,g)).sort().map(f=>{const w=L(f);return Y("li",{className:W(w,o),children:n?Y("a",{onClick:()=>X(f),children:w.message}):w.message},f)});return q(e)?e(a):a});return{getValue:b,setValue:O,register:Ye,onChange:le,onBlur:ye,getRef:Ue,setRef:pe,trigger:ue,handleSubmit:Ge,hasError:S,getError:L,clearError:e=>h(ae(e)),setErrors:e=>{J.current=!0,h(e)},array:{clear:Le,append:je,prepend:Ve,remove:ze,swap:Ke},key:Ne,Error:Qe,Errors:Xe,formState:{errors:g,isValid:me,isTouched:v.current,isDirty:H.current,hadError:J.current,reset:He}}};p.default=Be,p.yupResolver=Te,p.zodResolver=be,Object.defineProperty(p,"__esModule",{value:!0}),p[Symbol.toStringTag]="Module"});
