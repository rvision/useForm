var Ze=Object.defineProperty,qe=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,er=Object.prototype.propertyIsEnumerable;var _e=(l,u,E)=>u in l?Ze(l,u,{enumerable:!0,configurable:!0,writable:!0,value:E}):l[u]=E,N=(l,u)=>{for(var E in u||(u={}))Pe.call(u,E)&&_e(l,E,u[E]);if(ve)for(var E of ve(u))er.call(u,E)&&_e(l,E,u[E]);return l},q=(l,u)=>qe(l,$e(u));(function(l,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(l=typeof globalThis!="undefined"?globalThis:l||self,u(l["@rvision/use-form"]={},l.react))})(this,function(l,u){"use strict";function E(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var we=E(u);const z=r=>!Number.isNaN(r),$=r=>typeof r=="function",{isArray:h}=Array,P=r=>JSON.stringify(r,(s,t)=>t instanceof Set?[...t].sort():t),ee=Object.keys,x={},C=()=>x;let Re=9999;const M=new WeakMap,Se=r=>{let s=M.get(r);return s||(s=(++Re).toString(36).split("").reduce((t,c)=>c+t,""),M.set(r,s)),s},re=r=>{let s;return r instanceof Set?s=new Set([...r]):s=h(r)?[...r]:N({},r),M.has(r)&&(M.set(s,M.get(r)),M.delete(r)),s},Ne=/\[([^\]]+)\]/g;let K=new Map;const U=r=>{if(!r)return[];let s=K.get(r);return s||(s=r.replace(Ne,".$1").split(".").map(t=>z(parseInt(t,10))?+t:t),K.set(r,s),s)},ke=()=>{K=new Map},W=(r,s)=>{if(s!==void 0)return r.length===0?s:W(r.slice(1),s[r[0]])},R=(r,s)=>W(U(r),s),se=(r,s,t)=>{const{length:c}=r;if(c===0)return;const i=r[0];if(c===1){s[i]=t;return}const m=s[i]!==void 0,y=r[1],_=z(y);s[i]=m?re(s[i]):_?[]:{},_&&(s[i][y]=s[i][y]===void 0?{}:re(s[i][y])),se(r.slice(1),s[i],t)},k=(r,s,t)=>{const c=N({},s);return se(U(r),c,t),c},I=(r,s)=>{const{length:t}=r;if(t===0||s===void 0)return;const c=r[0];if(t===1){delete s[c];return}I(r.slice(1),s[c])},ne=r=>ee(r||x).length===0,Oe=(r,s)=>{I(r,s),r.map((c,i)=>i===0?[...r]:[...r].slice(0,-1*i)).forEach(c=>{const i=W(c,s);i!==void 0&&(h(i)?(i.length===0||i.every(ne))&&(i.message||I(c,s)):ne(i)&&I(c,s))})},J=(r,s)=>{const t=N({},s);return Oe(U(r),t),t},Te=r=>{const{value:s,type:t,checked:c,options:i,files:m,multiple:y,valueAsNumber:_,valueAsDate:g}=r.target;switch(t){case"checkbox":return c;case"range":return _;case"date":return g;case"number":{if(s==="")return null;const w=Number.parseFloat(s);return z(w)?w:void 0}case"file":return y?m:m.item(0);case"select-multiple":return[...i].filter(w=>w.selected).map(w=>w.value);default:return s}},te=(r,s,t)=>{if(h(r)){const c=[...r];return[c[s],c[t]]=[c[t],c[s]],c}return r},Y=(r,s,t)=>`${t||""} ${s||""} ${r.type?`error-${r.type}`:""}`.trim();var oe={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var be=we.default,Ce=Symbol.for("react.element"),Me=Symbol.for("react.fragment"),Ae=Object.prototype.hasOwnProperty,he=be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xe={key:!0,ref:!0,__self:!0,__source:!0};function ce(r,s,t){var c,i={},m=null,y=null;t!==void 0&&(m=""+t),s.key!==void 0&&(m=""+s.key),s.ref!==void 0&&(y=s.ref);for(c in s)Ae.call(s,c)&&!xe.hasOwnProperty(c)&&(i[c]=s[c]);if(r&&r.defaultProps)for(c in s=r.defaultProps,s)i[c]===void 0&&(i[c]=s[c]);return{$$typeof:Ce,type:r,key:m,ref:y,props:i,_owner:he.current}}j.Fragment=Me,j.jsx=ce,j.jsxs=ce,oe.exports=j;const H=oe.exports.jsx,p=r=>{const s=u.useRef(r);return s.current=r,u.useCallback((...t)=>s.current(...t),[])},v={key:"",name:"","aria-invalid":!1,className:"",onChange:C,onBlur:C,ref:C,value:"",checked:!1},De=({defaultValues:r,mode:s,classNameError:t,shouldFocusError:c=!1,resolver:i=C})=>{const[m,y]=u.useState({values:r||x,errors:{}}),{values:_,errors:g}=m,w=u.useRef(!1),G=u.useRef(!1),L=u.useRef(!1),O=u.useRef(new Map),ie=u.useRef(),Q=s==="onSubmit",ae=s==="onBlur",ue=s==="onChange",Ie=!Q&&!ae&&!ue,T=e=>y(n=>q(N({},n),{errors:e})),X=u.useCallback(e=>{const n=e||x;ie.current=P(n),y(o=>q(N({},o),{values:N({},n)}))},[]);u.useEffect(()=>(X(r),ke),[r,X]);const Z=e=>{const n=O.current.get(e);return n&&n.focus?(n.focus(),!0):!1},A=p((e="")=>(O.current.has(e)||O.current.set(e,null),R(e,_))),V=p((e="",n=g)=>R(e,n)),S=p((e="",n=g)=>e===""?ee(n).length>0:R(e,n)!==void 0),fe=p((e,n=g)=>{let o=n;return S(e,n)&&(o=J(e,n)),o}),de=p((e="",n=_)=>new Promise((o=C)=>{const a=i(n);if(e===""){T(a),o(a);return}const f=h(e)?e:[e];let d=N({},g);f.forEach(B=>{const F=R(B,a);d=J(B,d),F!==void 0&&(d=k(B,d,F))}),T(d),o(d)})),pe=ue||L.current&&Ie,Je=pe&&!Q,le=p((e,n)=>{let o=g;if((pe||S(e))&&(o=J(e,o),!Q)){const a=R(e,i(n));a&&(o=k(e,o,a))}return o}),b=p((e,n,o=le)=>new Promise((a=C)=>{y(f=>{const d=k(e,f.values,n);w.current=!0,G.current=ie.current!==P(d);const B=o(e,d),F={values:d,errors:B};return a(F),F})})),D=p((e,n,o)=>Je&&n?le:()=>{let a=g;const f=V(e);if(h(f)){const d=o(f);f.message&&(d.message=f.message,d.type=f.type),a=d.length>0?k(e,g,d):J(e,a)}return a}),je=p((e,n=!1)=>b(e,[],D(e,n,()=>[]))),Le=p((e,n,o=!1)=>b(e,[...A(e),n],D(e,o,a=>a))),Ve=p((e,n,o=!1)=>b(e,[n,...A(e)],D(e,o,a=>[void 0,...a]))),ze=p((e,n,o=!1)=>b(e,A(e).filter((a,f)=>f!==n),D(e,o,a=>a.filter((f,d)=>d!==n)))),Ke=p((e,n,o,a=!1)=>b(e,te(A(e),n,o),D(e,a,f=>te(f,n,o)))),Ue=p(e=>O.current.get(e)),me=p((e,n)=>{n&&O.current.set(e,n)}),We=p(e=>e&&me(e.name,e)),ye=p(e=>b(e.target.name,Te(e))),ge=p(e=>{const{name:n}=e.target,o=R(n,i(_));o?(T(k(n,g,o)),c&&Z(n)):T(fe(n))}),Ye=p((e,n="")=>{const o=A(e),a=S(e);return v.name=e,v["aria-invalid"]=a,v.className=Y(x,a?t:"",n),v.onChange=ye,v.ref=We,v.onBlur=ae?ge:void 0,o===!0||o===!1?(v.checked=o,v.value=void 0):(v.value=`${o}`=="0"?o:o||"",v.checked=void 0),v}),He=p((e=r,n=!0)=>{X(e),w.current=!1,G.current=!1,n&&de("",e)}),Ge=e=>n=>{n&&n.preventDefault();const o=i(_);if(T(o),S("",o)){if(c){let a=!1;O.current.forEach((f,d)=>{!a&&S(d,o)&&(a=Z(d))})}return L.current=!0,!1}return e(_),!0},Qe=p(({for:e,children:n})=>{const o=V(e,g);return!o||!o.message?!1:$(n)?n(o):H("span",{className:Y(o,t),children:o.message})}),Ee=!S(),Xe=p(({children:e,focusable:n=!1})=>{if(Ee)return!1;const a=Array.from(O.current).filter(f=>!!f[1]).map(f=>f[0]).filter(f=>S(f,g)).sort().map(f=>{const d=V(f);return H("li",{className:Y(d,t),children:n?H("a",{onClick:()=>Z(f),children:d.message}):d.message},f)});return $(e)?e(a):a});return{getValue:A,setValue:b,register:Ye,onChange:ye,onBlur:ge,getRef:Ue,setRef:me,trigger:de,handleSubmit:Ge,hasError:S,getError:V,clearError:e=>T(fe(e)),setErrors:e=>{L.current=!0,T(e)},array:{clear:je,append:Le,prepend:Ve,remove:ze,swap:Ke},key:Se,reset:He,Error:Qe,Errors:Xe,formState:{errors:g,isValid:Ee,isTouched:w.current,isDirty:G.current,hadError:L.current}}},Be=r=>s=>{let t={};try{r.validateSync(s,{abortEarly:!1})}catch(c){for(const i of c.inner){const m=R(i.path,t)||{};m.message=i.message,m.type=i.type,t=k(i.path,t,m)}}return t},Fe=r=>s=>{let t={};const c=r.safeParse(s);return c.success||c.error.errors.forEach(i=>{const m=i.path.join("."),y=R(m,t)||{};y.message=i.message,y.type=i.type,t=k(m,t,y)}),t};l.default=De,l.yupResolver=Be,l.zodResolver=Fe,Object.defineProperty(l,"__esModule",{value:!0}),l[Symbol.toStringTag]="Module"});
