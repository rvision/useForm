var Qe=Object.defineProperty,Xe=Object.defineProperties;var Ze=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var ve=(d,a,g)=>a in d?Qe(d,a,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[a]=g,k=(d,a)=>{for(var g in a||(a={}))qe.call(a,g)&&ve(d,g,a[g]);if(ge)for(var g of ge(a))$e.call(a,g)&&ve(d,g,a[g]);return d},L=(d,a)=>Xe(d,Ze(a));(function(d,a){typeof exports=="object"&&typeof module!="undefined"?a(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],a):(d=typeof globalThis!="undefined"?globalThis:d||self,a(d["@rvision/use-form"]={},d.react))})(this,function(d,a){"use strict";function g(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Ee=g(a);const $=e=>typeof e=="function",x={},M=()=>x;let _e=2e9;const C=new WeakMap,we=e=>{let r=C.get(e);return r||(r=(_e++).toString(36),C.set(e,r)),r},P=e=>{let r;if(e instanceof Set)r=new Set([...e]);else{const t=Array.isArray(e);r=t?[...e]:k({},e),t&&e.message&&(r.message=e.message,r.type=e.type)}return C.has(e)&&(C.set(r,C.get(e)),C.delete(e)),r},Re=/\[([^\]]+)\]/g;let z=new Map;const U=e=>{if(!e)return[];let r=z.get(e);return r||(r=e.replace(Re,".$1").split(".").map(t=>+t-+t===0?+t:t),z.set(e,r),r)},Ae=()=>{z=new Map},W=(e,r)=>{if(r!==void 0)return e.length===0?r:W(e.slice(1),r[e[0]])},E=(e,r)=>W(U(e),r),ee=(e,r,t)=>{const{length:c}=e;if(c===0)return;const i=e[0];if(c===1){r[i]=t;return}const m=r[i]!==void 0,p=e[1],A=+p-+p<1;r[i]=m?P(r[i]):A?[]:{},A&&(r[i][p]=r[i][p]===void 0?{}:P(r[i][p])),ee(e.slice(1),r[i],t)},N=(e,r,t)=>{const c=k({},r);return ee(U(e),c,t),c},B=(e,r)=>{const{length:t}=e;if(t===0||r===void 0)return;const c=e[0];if(t===1){delete r[c];return}B(e.slice(1),r[c])},Y=e=>Object.keys(e||x).length===0,ke=(e,r)=>{B(e,r),e.map((c,i)=>i===0?[...e]:[...e].slice(0,-1*i)).forEach(c=>{const i=W(c,r);i!==void 0&&(Array.isArray(i)?(i.length===0||i.every(Y))&&!i.message&&B(c,r):Y(i)&&B(c,r))})},D=(e,r)=>{const t=k({},r);return ke(U(e),t),t},Ne=e=>{const{value:r,type:t,checked:c,options:i,files:m,multiple:p,valueAsNumber:A,valueAsDate:R}=e.target;switch(t){case"checkbox":return c;case"range":return A;case"date":return R;case"number":{if(r==="")return null;const v=Number.parseFloat(r);return+v-+v<1?+v:void 0}case"file":return p?m:m.item(0);case"select-multiple":return[...i].filter(v=>v.selected).map(v=>v.value);default:return r}},Oe=(e,r,t)=>{if(Array.isArray(e)){const c=[...e];for(;c.length<r+1||c.length<t+1;)c.length++;return[c[r],c[t]]=[c[t],c[r]],c}return e},j=(e,r,t)=>`${t||""} ${r||""} ${e.type?`error-${e.type}`:""}`.trim(),Se=e=>r=>{let t={};try{e.validateSync(r,{abortEarly:!1})}catch(c){for(const i of c.inner){const m=E(i.path,t)||{};m.message=i.message,m.type=i.type,t=N(i.path,t,m)}}return t},he=e=>r=>{let t={};const c=e.safeParse(r);return c.success||c.error.errors.forEach(i=>{const m=i.path.join("."),p=E(m,t)||{};p.message=i.message,p.type=i.type,t=N(m,t,p)}),t};var re={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Te=Ee.default,Ce=Symbol.for("react.element"),xe=Symbol.for("react.fragment"),Me=Object.prototype.hasOwnProperty,be=Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ie={key:!0,ref:!0,__self:!0,__source:!0};function se(e,r,t){var c,i={},m=null,p=null;t!==void 0&&(m=""+t),r.key!==void 0&&(m=""+r.key),r.ref!==void 0&&(p=r.ref);for(c in r)Me.call(r,c)&&!Ie.hasOwnProperty(c)&&(i[c]=r[c]);if(e&&e.defaultProps)for(c in r=e.defaultProps,r)i[c]===void 0&&(i[c]=r[c]);return{$$typeof:Ce,type:e,key:m,ref:p,props:i,_owner:be.current}}F.Fragment=xe,F.jsx=se,F.jsxs=se,re.exports=F;const H=re.exports.jsx,ne="aria-invalid",K=e=>JSON.stringify(e,(r,t)=>t instanceof Set?[...t].sort():t),l=e=>{const r=a.useRef(e);return r.current=e,a.useCallback((...t)=>r.current(...t),[])},_={name:"",[ne]:!1,className:"",onChange:M,onBlur:M,ref:M,value:"",checked:!1},Be=({defaultValues:e,mode:r,classNameError:t,shouldFocusError:c=!1,resolver:i=M})=>{const[m,p]=a.useState({values:e||x,errors:{}}),{values:A,errors:R}=m,v=a.useRef(!1),V=a.useRef(!1),J=a.useRef(!1),h=a.useRef(new Map),G=a.useRef(),te=r==="onSubmit",oe=r==="onBlur",ce=r==="onChange",De=!te&&!oe&&!ce,b=s=>p(n=>L(k({},n),{errors:s})),Q=a.useCallback(s=>{const n=s||x;G.current=K(n),p(o=>L(k({},o),{values:k({},n)}))},[]);a.useEffect(()=>(Q(e),Ae),[e,Q]);const X=a.useCallback(s=>{const n=h.current.get(s);return n&&n.focus?(n.focus(),!0):!1},[]),ie=l((s="")=>(h.current.has(s)||h.current.set(s,null),E(s,A))),Z=l((s="",n=R)=>E(s,n)),O=l((s="",n=R)=>s===""?!Y(n):E(s,n)!==void 0),ae=l((s,n=R)=>{let o=n;return O(s,n)&&(o=D(s,n)),o}),ue=l((s="")=>new Promise((n=M)=>{p(o=>{let u=i(o.values);if(s!==""){const y=Array.isArray(s)?s:[s];let S=k({},o.errors);y.forEach(w=>{const T=E(w,u);S=D(w,S),T!==void 0&&(S=N(w,S,T))}),u=S}const f=L(k({},o),{errors:u});return n(f),f})})),fe=ce||J.current&&De,de=l((s,n)=>p(o=>{const u=N(s,o.values,n);v.current=!0,V.current=G.current!==K(u);let f=R;if((fe||O(s))&&(f=D(s,f),!te)){const y=E(s,i(u));y&&(f=N(s,f,y))}return{values:u,errors:f}})),I=l((s,n,o)=>{p(u=>{const f=N(s,u.values,n(E(s,u.values)));v.current=!0,V.current=G.current!==K(f);let y=u.errors;const S=E(s,y);let w=[];if(Array.isArray(S)&&(w=o(S)),fe){const T=E(s,i(f));if(T&&T.message){const q=w.length>0?w:{};q.message=T.message,q.type=T.type,w=q}}return y=D(s,y),(w.length>0||w.message)&&(y=N(s,y,w)),{values:f,errors:y}})}),Fe=l((s,n)=>{I(s,o=>[...o,n],o=>o)}),Ve=l((s,n)=>{I(s,o=>[n,...o],o=>[void 0,...o])}),Je=l(s=>{const n=()=>[];I(s,n,n)}),Le=l((s,n)=>{const o=u=>[...u].filter((f,y)=>y!==n);I(s,o,o)}),ze=l((s,n,o)=>{const u=f=>Oe(f,n,o);I(s,u,u)}),Ue=l(s=>h.current.get(s)),le=l((s,n)=>{n&&h.current.set(s,n)}),We=s=>s&&le(s.name,s),pe=l(s=>de(s.target.name,Ne(s))),ye=l(s=>{const{name:n}=s.target,o=E(n,i(A));o?(b(N(n,R,o)),c&&X(n)):b(ae(n))}),Ye=l((s,n="")=>{const o=ie(s),u=O(s);return _.name=s,_[ne]=u,_.className=j(x,u?t:"",n),_.onChange=pe,_.ref=We,_.onBlur=oe?ye:void 0,o===!0||o===!1?(_.checked=o,_.value=void 0):(_.value=`${o}`=="0"?o:o||"",_.checked=void 0),_}),je=l((s=e,n=!0)=>{Q(s),v.current=!1,V.current=!1,n&&ue("",s)}),He=s=>n=>{n&&n.preventDefault();const o=i(A);if(b(o),O("",o)){if(c){let u=!1;h.current.forEach((f,y)=>{!u&&O(y,o)&&(u=X(y))})}return J.current=!0,!1}return s(A),!0},Ke=l(({for:s,children:n})=>{const o=Z(s,R);return(o==null?void 0:o.message)?$(n)?n(o):H("span",{className:j(o,t),children:o.message}):!1}),me=!O(),Ge=l(({children:s,focusable:n=!1})=>{if(me)return!1;const u=Array.from(h.current).map(f=>f[0]).filter(f=>O(f,R)).sort().map(f=>{const y=Z(f);return H("li",{className:j(y,t),children:n?H("a",{onClick:()=>X(f),children:y.message}):y.message},f)});return $(s)?s(u):u});return{getValue:ie,setValue:de,register:Ye,onChange:pe,onBlur:ye,getRef:Ue,setRef:le,trigger:ue,handleSubmit:He,hasError:O,getError:Z,clearError:s=>b(ae(s)),setErrors:s=>{J.current=!0,b(s)},array:{clear:Je,append:Fe,prepend:Ve,remove:Le,swap:ze},key:we,Error:Ke,Errors:Ge,formState:{errors:R,isValid:me,isTouched:v.current,isDirty:V.current,hadError:J.current,reset:je}}};d.default=Be,d.yupResolver=Se,d.zodResolver=he,Object.defineProperty(d,"__esModule",{value:!0}),d[Symbol.toStringTag]="Module"});
