var Ke=Object.defineProperty;var oe=Object.getOwnPropertySymbols;var Ve=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var ce=(l,u,v)=>u in l?Ke(l,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):l[u]=v,N=(l,u)=>{for(var v in u||(u={}))Ve.call(u,v)&&ce(l,v,u[v]);if(oe)for(var v of oe(u))We.call(u,v)&&ce(l,v,u[v]);return l};(function(l,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(l=typeof globalThis!="undefined"?globalThis:l||self,u(l["@rvision/use-form"]={},l.react))})(this,function(l,u){"use strict";function v(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var ie=v(u);const ue=()=>{throw new ReferenceError("Callback was called directly while rendering, pass it as a callback prop instead.")},_=e=>{const n=u.useRef(ue);return u.useLayoutEffect(()=>{n.current=e}),u.useCallback((...c)=>n.current(...c),[])},fe=["object","function"];let ae=Date.now();const pe=()=>{const e=u.useRef(new WeakMap);return u.useEffect(()=>()=>{(e==null?void 0:e.current)&&(e.current=new WeakMap)},[]),u.useCallback((n={})=>{const c=e.current;if(c.has(n))return c.get(n);if(!fe.includes(typeof n))return`key-${n}`;const s=(++ae).toString(36);return c.set(n,s),s},[e])};var H={exports:{}},B={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var de=ie.default,ye=Symbol.for("react.element"),le=Symbol.for("react.fragment"),me=Object.prototype.hasOwnProperty,we=de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ve={key:!0,ref:!0,__self:!0,__source:!0};function Q(e,n,c){var s,i={},a=null,O=null;c!==void 0&&(a=""+c),n.key!==void 0&&(a=""+n.key),n.ref!==void 0&&(O=n.ref);for(s in n)me.call(n,s)&&!ve.hasOwnProperty(s)&&(i[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps,n)i[s]===void 0&&(i[s]=n[s]);return{$$typeof:ye,type:e,key:a,ref:O,props:i,_owner:we.current}}B.Fragment=le,B.jsx=Q,B.jsxs=Q,H.exports=B;const V=H.exports.jsx,W=e=>!Number.isNaN(e),X=e=>parseInt(e,10),Z=e=>typeof e=="function",{isArray:b}=Array,q=JSON.stringify,F=Object.keys,S={},A=()=>S,E={key:"",name:"","aria-invalid":!1,className:"",onChange:A,onBlur:A,ref:A,value:"",checked:!1},Ee=/\[([^\]]+)\]/g;let I={};const L=e=>{if(!e)return[];if(I[e])return I[e];const n=e.replace(Ee,".$1").split(".");return I[e]=n,n},m=(e,n)=>{if(!b(e))return m(L(e),n);if(n!==void 0)switch(e.length){case 0:return n;default:return m(e.slice(1),n[e[0]])}},k=(e,n,c)=>{if(!b(e)){k(L(e),n,c);return}if(e.length===0)return;const s=e[0];if(e.length===1){n[s]=c;return}const i=X(e[1]);W(i)?(n[s]=n[s]===void 0?[]:n[s],n[s][i]=n[s][i]===void 0?{}:n[s][i],e.length===2?n[s][i]=c:k(e.slice(2),n[s][i],c)):(n[s]=n[s]===void 0?{}:N({},n[s]),k(e.slice(1),n[s],c))},j=(e,n)=>{if(!b(e)){j(L(e),n);return}if(e.length===0||n===void 0)return;const c=e[0];if(e.length===1){delete n[c];return}if(n[c]===void 0)return;const s=X(e[1]);W(s)?e.length===2?delete n[c][s]:j(e.slice(2),n[c][s]):j(e.slice(1),n[c])},x=(e,n)=>{if(!b(e)){x(L(e),n);return}j(e,n);const c=e.map((s,i)=>i===0?[...e]:[...e].slice(0,-1*i));for(const s of c){const i=m(s,n);i!==void 0&&(b(i)?(i.length===0||i.every(a=>F(a||S).length===0))&&j(s,n):F(i||S).length===0&&j(s,n))}},_e=e=>{const{value:n,type:c,checked:s,options:i,files:a,multiple:O,valueAsNumber:y}=e.target;switch(c){case"checkbox":return s;case"range":return y;case"number":if(n==="")return null;const w=Number.parseFloat(n);return W(w)?w:void 0;case"file":return O?a:a.item(0);case"select-multiple":return[...i].filter(g=>g.selected).map(g=>g.value);default:return n}},U=(e,n)=>{const c=m(e,n);if(c&&!b(c)){const s=N({},n);return x(e,s),s}return n},$=(e,n,c)=>{const s=m(e,n);if(s&&b(s)){const i=N({},n),a=c([...s]);return k(e,i,a),i}return n},P=(e,n,c,s)=>{const i=m(n,e);if(b(i)){const a=[...i],O=a[c];return a[c]=a[s],a[s]=O,a}return i},Y=(e,n,c)=>`${c||""} ${n||""} ${e.type?`error-${e.type}`:""}`.trim(),J=e=>e&&e.focus?(e.focus(),!0):!1,ke=({defaultValues:e,mode:n="onSubmit",classNameError:c=null,shouldFocusError:s=!1,resolver:i=A})=>{const[a,O]=u.useState(e||S),[y,w]=u.useState({}),g=u.useRef(!1),h=u.useRef(!1),T=u.useRef(new Map),ee=u.useRef(""),z=pe(),Re=n==="onBlur",Ce=n==="onChange",G=u.useCallback(r=>{ee.current=q(r),O(r)},[]);u.useEffect(()=>(G(e||S),()=>{I={}}),[e,G]);const ne=(r="")=>m(r,a),Ne=(r="",t=y)=>m(r,t),R=(r="",t=y)=>r===""?F(t).length>0:m(r,t)!==void 0,K=_((r,t=y)=>{if(R(r,t)){const o=N({},t);return x(r,o),w(o),o}return t}),Oe=_(r=>{const t=N({},y);for(const o of F(r))R(o)&&x(o,t),k(o,t,r[o]);return w(t),t}),re=_((r="",t=a)=>new Promise((o=A)=>{const f=i(t);r===""&&(w(f),o(f));const p=b(r)?r:[r],d=N({},y);p.forEach(C=>{const D=m(C,f);x(C,d),D!==void 0&&k(C,d,D)}),w(d),o(d)})),M=_((r,t,o=!0)=>new Promise((f=A)=>{O(p=>{g.current=!0;const d=N({},r===""?t:p);k(r,d,t),h.current=ee.current!==q(d);let C=y;if(o&&(R(r)||Ce)){C=K(r);const D=m(r,i(d));D&&(k(r,C,D),w(C))}return f({values:d,errors:C}),d})})),Se=_((r,t)=>{const o=[...m(r,a),t];M(r,o,!1);const f=U(r,y);return w(f),o}),ge=_((r,t)=>{const o=[t,...m(r,a)];M(r,o,!1);let f=U(r,y);return f=$(r,f,p=>[void 0,...p]),w(f),o}),Te=_((r,t)=>{const o=m(r,a).filter((p,d)=>t!==d);M(r,o,!1);let f=U(r,y);return f=K(`${r}.${t}`,f),f=$(r,f,p=>(p.splice(t,1),p)),w(f),o}),Ae=_((r,t,o)=>{const f=P(a,r,t,o);M(r,f);const p=P(y,r,t,o),d=N({},y);return k(r,d,p),w(d),f}),je=u.useCallback(r=>{r&&T.current.set(r.name,r)},[]),Me=u.useCallback(r=>T.current.get(r),[]),xe=u.useCallback((r,t)=>{t&&T.current.set(r,t)},[]),se=_(r=>{M(r.target.name,_e(r))}),te=_(r=>{const{name:t}=r.target,o=m(t,i(a));if(o){const f=N({},y);k(t,f,o),w(f),s&&J(T.current.get(t))}else K(t)}),De=(r,t="")=>{const o=ne(r),f=R(r);return E.key=E.name=r,E["aria-invalid"]=f,E.className=Y(S,f?c:!1,t),E.onChange=se,E.onBlur=Re?te:void 0,E.ref=je,o===!0||o===!1?(E.checked=o,E.value=void 0):(E.value=`${o}`=="0"?o:o||"",E.checked=void 0),E},Be=(r="")=>J(T.current.get(r)),Fe=r=>t=>{t&&(t==null||t.preventDefault());const o=i(a);if(w(o),R("",o)){if(s){let f=!1;T.current.forEach((p,d)=>{!f&&R(d,o)&&(f=J(p))})}return!1}return r(a),!0},Ie=_((r=e,t=!0)=>{G(r||S),g.current=!1,h.current=!1,t&&re("",r)}),Le=u.useCallback(({for:r,children:t})=>{const o=m(r,y);return!o||b(o)?!1:Z(t)?t(o):V("span",{className:Y(o,c),children:o.message})},[y,c]),Je=u.useCallback(({children:r,focusable:t=!1})=>{if(!R("",y))return!1;const o=Array.from(T.current).filter(p=>R(p[0])).map(p=>{const[d,C]=p;return{error:m(d,y),element:C}});if(o.length===0)return!1;const f=o.map(({error:p,element:d})=>V("li",{className:Y(p,c),children:t?V("a",{onClick:()=>J(d),children:p.message}):p.message},z(p)));return Z(r)?r(f):f},[y,c,z]);return{getValue:ne,setValue:M,register:De,onChange:se,onBlur:te,getRef:Me,setRef:xe,trigger:re,focus:Be,handleSubmit:Fe,hasError:R,getError:Ne,clearError:K,setErrors:Oe,append:Se,prepend:ge,remove:Te,swap:Ae,key:z,reset:Ie,Error:Le,Errors:Je,formState:{errors:y,isValid:!R(),isTouched:g.current,isDirty:h.current}}},be=e=>n=>{const c={};try{e.validateSync(n,{abortEarly:!1})}catch(s){for(const i of s.inner)k(i.path,c,{message:i.message,type:i.type})}return c};l.default=ke,l.yupResolver=be,Object.defineProperty(l,"__esModule",{value:!0}),l[Symbol.toStringTag]="Module"});
