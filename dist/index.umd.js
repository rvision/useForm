var he=Object.defineProperty;var se=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var oe=(f,d,b)=>d in f?he(f,d,{enumerable:!0,configurable:!0,writable:!0,value:b}):f[d]=b,g=(f,d)=>{for(var b in d||(d={}))Je.call(d,b)&&oe(f,b,d[b]);if(se)for(var b of se(d))Le.call(d,b)&&oe(f,b,d[b]);return f};(function(f,d){typeof exports=="object"&&typeof module!="undefined"?module.exports=d(require("react")):typeof define=="function"&&define.amd?define(["react"],d):(f=typeof globalThis!="undefined"?globalThis:f||self,f["@rvision/use-form"]=d(f.react))})(this,function(f){"use strict";function d(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var b=d(f);const ce=["object","function"];let ie=Date.now();const ue=()=>{const e=f.useRef(new WeakMap);return f.useEffect(()=>()=>{e&&e.current&&(e.current=new WeakMap)},[]),f.useCallback((s={})=>{const t=e.current;if(t.has(s))return t.get(s);if(!ce.includes(typeof s))return`key-${s}`;const o=(++ie).toString(36);return t.set(s,o),o},[e])};var U={exports:{}},j={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var W=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;function pe(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function le(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var n={},s=0;s<10;s++)n["_"+String.fromCharCode(s)]=s;var t=Object.getOwnPropertyNames(n).map(function(u){return n[u]});if(t.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(u){o[u]=u}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}le();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var de=b.default,Y=60103;if(j.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var z=Symbol.for;Y=z("react.element"),j.Fragment=z("react.fragment")}var me=de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ye=Object.prototype.hasOwnProperty,we={key:!0,ref:!0,__self:!0,__source:!0};function G(e,n,s){var t,o={},u=null,w=null;s!==void 0&&(u=""+s),n.key!==void 0&&(u=""+n.key),n.ref!==void 0&&(w=n.ref);for(t in n)ye.call(n,t)&&!we.hasOwnProperty(t)&&(o[t]=n[t]);if(e&&e.defaultProps)for(t in n=e.defaultProps,n)o[t]===void 0&&(o[t]=n[t]);return{$$typeof:Y,type:e,key:u,ref:w,props:o,_owner:me.current}}j.jsx=G,j.jsxs=G,U.exports=j;const B=U.exports.jsx,M=e=>!Number.isNaN(e),H=e=>parseInt(e,10),Q=e=>typeof e=="function",{isArray:E}=Array,X=JSON.stringify,T=Object.keys,ve="true",be="false",_={key:"",name:"","aria-invalid":"",className:"",onChange:()=>{},onBlur:()=>{},ref:()=>{},value:"",checked:!1},_e=/\[([^\]]+)\]/g;let F={};const x=e=>{if(!e)return[];if(F[e])return F[e];const n=e.replace(_e,".$1").split(".");return F[e]=n,n},h=e=>typeof e!="object"||e===null?e:e instanceof Date?new Date(e.getTime()):E(e)?e.reduce((n,s,t)=>(n[t]=h(s),n),[]):e instanceof Object?T(e).reduce((n,s)=>(n[s]=h(e[s]),n),{}):e,m=(e,n)=>{if(!E(e))return m(x(e),n);if(n!==void 0)switch(e.length){case 0:return n;case 1:return n[e[0]];default:return m(e.slice(1),n[e[0]])}},O=(e,n,s)=>{if(!E(e)){O(x(e),n,s);return}if(e.length===0)return;const t=e[0];if(e.length===1){n[t]=s;return}const o=H(e[1]);M(o)?(n[t]=n[t]===void 0?[]:n[t],n[t][o]=n[t][o]===void 0?{}:n[t][o],e.length===2?n[t][o]=s:O(e.slice(2),n[t][o],s)):(n[t]=n[t]===void 0?{}:g({},n[t]),O(e.slice(1),n[t],s))},S=(e,n)=>{if(!E(e)){S(x(e),n);return}if(e.length===0||n===void 0)return;const s=e[0];if(e.length===1){delete n[s];return}if(n[s]===void 0)return;const t=e[1],o=H(t);M(o)?e.length===2?delete n[s][o]:S(e.slice(2),n[s][o]):S(e.slice(1),n[s][o])},A=(e,n)=>{if(!E(e)){A(x(e),n);return}S(e,n);const s=e.map((t,o)=>o===0?[...e]:[...e].slice(0,-1*o));for(const t of s){const o=m(t,n);o!==void 0&&(E(o)?(o.length===0||o.every(u=>T(u||{}).length===0))&&S(t,n):T(o||{}).length===0&&S(t,n))}},Ee=e=>{const{value:n,type:s,checked:t,options:o,files:u,multiple:w,valueAsNumber:l}=e.target;switch(s){default:return n;case"checkbox":return t;case"range":return l;case"number":if(n==="")return null;const y=Number.parseFloat(n);return M(y)?y:void 0;case"file":return w?u:u.item(0);case"select-multiple":return[...o].filter(N=>N.selected).map(N=>N.value)}},J=(e,n)=>{const s=m(e,n);if(s&&!E(s)){const t=g({},n);return A(e,t),t}return n},Z=(e,n,s)=>{const t=m(e,n);if(t&&E(t)){const o=g({},n),u=s([...t]);return O(e,o,u),o}return n},q=(e,n,s,t)=>{const o=m(n,e);if(E(o)){const u=[...o],w=u[s];return u[s]=u[t],u[t]=w,u}return o},L=(e,n,s)=>`${s||""} ${n||""} ${e.type?`error-${e.type}`:""}`.trim(),V=e=>e&&e.focus?(e.focus(),!0):!1;return({defaultValues:e={},mode:n="onSubmit",classNameError:s=null,shouldFocusError:t=!1,resolver:o=u=>({})})=>{const[u,w]=f.useState(e),[l,y]=f.useState({}),N=f.useRef(!1),K=f.useRef(!1),C=f.useRef(new Map),$=f.useRef(""),P=ue(),Oe=n==="onBlur",ke=n==="onChange",ee=f.useCallback(r=>{$.current=X(r),w(h(r))},[]);f.useEffect(()=>(ee(e),()=>{F={}}),[e]);const k=f.useCallback((r=null,i=l)=>r===null?T(i||{}).length>0:m(r,i)!==void 0,[l]),D=f.useCallback((r,i=l)=>{if(k(r)){const c=g({},i);return A(r,c),y(c),c}return i},[l]),ge=f.useCallback(r=>{const i=g({},l);for(const c of T(r))k(c)&&A(c,i),O(c,i,r[c]);return y(i),i},[l]),Ce=(r="",i=u)=>{const c=o(i),a=m(r,c),p=g({},c);return A(r,p),a!==void 0&&O(r,p,a),y(p),p},ne=(r="")=>m(r,u),R=(r,i,c=!0)=>{w(a=>{const p=g({},r===""?i:a);if(O(r,p,i),K.current=$.current!==X(p),c&&(k(r)||ke)){const v=D(r),I=m(r,o(p));I&&(O(r,v,I),y(v))}return p}),N.current=!0},Ne=(r,i)=>{const c=[...m(r,u),i];R(r,c,!1);const a=J(r,l);return y(a),c},Se=(r,i)=>{const c=[i,...m(r,u)];R(r,c,!1);let a=J(r,l);return a=Z(r,a,p=>[void 0,...p]),y(a),c},Re=(r,i)=>{const c=m(r,u).filter((p,v)=>i!==v);R(r,c,!1);let a=J(r,l);return a=D(`${r}.${i}`,a),a=Z(r,a,p=>(p.splice(i,1),p)),y(a),c},je=(r,i,c)=>{const a=q(u,r,i,c);R(r,a);const p=q(l,r,i,c),v=g({},l);return O(r,v,p),y(v),a},Te=f.useCallback(r=>{r&&C.current.set(r.name,r)},[C]),Ae=f.useCallback(r=>C.current.get(r),[C]),Fe=f.useCallback((r,i)=>{i&&C.current.set(r,i)},[C]),re=r=>{R(r.target.name,Ee(r))},te=r=>{const{name:i}=r.target,c=m(i,o(u));if(c){const a=g({},l);O(i,a,c),y(a),t&&V(C.current.get(i))}else D(i)},xe=(r,i="")=>{const c=ne(r),a=k(r);return _.key=_.name=r,_["aria-invalid"]=a?ve:be,_.className=L({},a?s:!1,i),_.onChange=re,_.onBlur=Oe?te:void 0,_.ref=Te,c===!0||c===!1?(_.checked=c,_.value=void 0):(_.value=`${c}`=="0"?c:c||"",_.checked=void 0),_},De=r=>i=>{i&&i.preventDefault&&i.preventDefault();const c=o(u);if(y(c),k(null,c)){if(t){let a=!1;C.current.forEach((p,v)=>{!a&&k(v,c)&&(a=V(p))})}return!1}return r(u),!0},Ie=f.useCallback((r=e,i=!0)=>{ee(r),N.current=!1,K.current=!1,i&&y(o(r))},[]),Be=f.useCallback(({for:r,children:i})=>{const c=m(r,l);return!c||E(c)?!1:Q(i)?i(c):B("span",{className:L(c,s),children:c.message})},[l]),Me=f.useCallback(({children:r,focusable:i=!1})=>{if(!k())return!1;const c=Array.from(C.current).filter(p=>k(p[0])).map(p=>{const[v,I]=p;return{error:m(v,l),element:I}});if(c.length===0)return!1;const a=c.map(({error:p,element:v})=>B("li",{className:L(p,s),children:i?B("a",{onClick:()=>V(v),children:p.message}):p.message},P(p)));return Q(r)?r(a):a},[l]);return{getValue:ne,setValue:R,register:xe,onChange:re,onBlur:te,getRef:Ae,setRef:Fe,trigger:Ce,handleSubmit:De,hasError:k,clearError:D,setErrors:ge,append:Ne,prepend:Se,remove:Re,swap:je,key:P,reset:Ie,Error:Be,Errors:Me,formState:{errors:l,isValid:!k(),isTouched:N.current,isDirty:K.current}}}});
