var Je=Object.defineProperty;var ie=Object.getOwnPropertySymbols;var Ve=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var ue=(m,u,v)=>u in m?Je(m,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):m[u]=v,S=(m,u)=>{for(var v in u||(u={}))Ve.call(u,v)&&ue(m,v,u[v]);if(ie)for(var v of ie(u))Ke.call(u,v)&&ue(m,v,u[v]);return m};(function(m,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(m=typeof globalThis!="undefined"?globalThis:m||self,u(m["@rvision/use-form"]={},m.react))})(this,function(m,u){"use strict";function v(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var fe=v(u);const ae=()=>{throw new ReferenceError("useEvent called while rendering.")},_=e=>{const r=u.useRef(ae);return u.useLayoutEffect(()=>{r.current=e}),u.useCallback((...o)=>r.current(...o),[])},pe=["object","function"];let de=Date.now();const me=()=>{const e=u.useRef(new WeakMap);return u.useEffect(()=>()=>{(e==null?void 0:e.current)&&(e.current=new WeakMap)},[]),u.useCallback((r={})=>{const o=e.current;if(o.has(r))return o.get(r);if(!pe.includes(typeof r))return`key-${r}`;const t=(++de).toString(36);return o.set(r,t),t},[e])};var X={exports:{}},I={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ye=fe.default,we=Symbol.for("react.element"),Ee=Symbol.for("react.fragment"),ve=Object.prototype.hasOwnProperty,le=ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_e={key:!0,ref:!0,__self:!0,__source:!0};function Z(e,r,o){var t,i={},a=null,C=null;o!==void 0&&(a=""+o),r.key!==void 0&&(a=""+r.key),r.ref!==void 0&&(C=r.ref);for(t in r)ve.call(r,t)&&!_e.hasOwnProperty(t)&&(i[t]=r[t]);if(e&&e.defaultProps)for(t in r=e.defaultProps,r)i[t]===void 0&&(i[t]=r[t]);return{$$typeof:we,type:e,key:a,ref:C,props:i,_owner:le.current}}I.Fragment=Ee,I.jsx=Z,I.jsxs=Z,X.exports=I;const W=X.exports.jsx,U=e=>!Number.isNaN(e),h=e=>parseInt(e,10),j=e=>typeof e=="function",{isArray:k}=Array,q=JSON.stringify,M=Object.keys,b={},g=()=>b,l={key:"",name:"","aria-invalid":!1,className:"",onChange:g,onBlur:g,ref:g,value:"",checked:!1},ke=/\[([^\]]+)\]/g;let L={};const J=e=>{if(!e)return[];if(L[e])return L[e];const r=e.replace(ke,".$1").split(".");return L[e]=r,r},V=e=>!e||typeof e!="object"?e:e instanceof Date?new Date(e.getTime()):k(e)?e.reduce((r,o,t)=>(r[t]=V(o),r),[]):e instanceof Object?M(e).reduce((r,o)=>(r[o]=V(e[o]),r),{}):e instanceof Set?new Set(V([...e])):e,y=(e,r)=>{if(r!==void 0){if(!k(e))return y(J(e),r);switch(e.length){case 0:return r;default:return y(e.slice(1),r[e[0]])}}},R=(e,r,o)=>{if(!k(e)){R(J(e),r,o);return}if(e.length===0)return;const t=e[0];if(e.length===1){r[t]=o;return}const i=h(e[1]);U(i)?(r[t]=r[t]===void 0?[]:r[t],r[t][i]=r[t][i]===void 0?{}:r[t][i],e.length===2?r[t][i]=o:R(e.slice(2),r[t][i],o)):(r[t]=r[t]===void 0?{}:S({},r[t]),R(e.slice(1),r[t],o))},A=(e,r)=>{if(!k(e)){A(J(e),r);return}if(e.length===0||r===void 0)return;const o=e[0];if(e.length===1){delete r[o];return}if(r[o]===void 0)return;const t=h(e[1]);U(t)?e.length===2?delete r[o][t]:A(e.slice(2),r[o][t]):A(e.slice(1),r[o])},x=(e,r)=>{if(!k(e)){x(J(e),r);return}A(e,r);const o=e.map((t,i)=>i===0?[...e]:[...e].slice(0,-1*i));for(const t of o){const i=y(t,r);i!==void 0&&(k(i)?(i.length===0||i.every(a=>M(a||b).length===0))&&A(t,r):M(i||b).length===0&&A(t,r))}},Re=e=>{const{value:r,type:o,checked:t,options:i,files:a,multiple:C,valueAsNumber:w}=e.target;switch(o){case"checkbox":return t;case"range":return w;case"number":if(r==="")return null;const E=Number.parseFloat(r);return U(E)?E:void 0;case"file":return C?a:a.item(0);case"select-multiple":return[...i].filter(T=>T.selected).map(T=>T.value);default:return r}},Y=(e,r)=>{const o=y(e,r);if(o&&!k(o)){const t=S({},r);return x(e,t),t}return r},$=(e,r,o)=>{const t=y(e,r);if(t&&k(t)){const i=S({},r),a=o([...t]);return R(e,i,a),i}return r},P=(e,r,o,t)=>{const i=y(r,e);if(k(i)){const a=[...i],C=a[o];return a[o]=a[t],a[t]=C,a}return i},z=(e,r,o)=>`${o||""} ${r||""} ${e.type?`error-${e.type}`:""}`.trim(),Ne=({defaultValues:e,mode:r="onSubmit",classNameError:o=null,shouldFocusError:t=!1,resolver:i=g})=>{const[a,C]=u.useState(e||b),[w,E]=u.useState({}),T=u.useRef(!1),G=u.useRef(!1),B=u.useRef(new Map),ee=u.useRef(""),re=me(),Ce=r==="onBlur",Oe=r==="onChange",H=u.useCallback(n=>{const s=n||b;ee.current=q(s),C(V(s))},[]);u.useEffect(()=>(H(e),()=>{L={}}),[e,H]);const Q=n=>{const s=B.current.get(n);return s&&s.focus?(s.focus(),!0):!1},ne=(n="")=>y(n,a),Te=(n="",s=w)=>y(n,s),N=(n="",s=w)=>n===""?M(s).length>0:y(n,s)!==void 0,K=_((n,s=w)=>{if(N(n,s)){const c=S({},s);return x(n,c),E(c),c}return s}),be=_(n=>{const s=S({},w);for(const c of M(n))N(c)&&x(c,s),R(c,s,n[c]);return E(s),s}),se=_((n="",s=a)=>new Promise((c=g)=>{const f=i(s);n===""&&(E(f),c(f));const d=k(n)?n:[n],p=S({},w);d.forEach(O=>{const F=y(O,f);x(O,p),F!==void 0&&R(O,p,F)}),E(p),c(p)})),D=_((n,s,c=!0)=>new Promise((f=g)=>{C(d=>{T.current=!0;const p=S({},n===""?s:d);R(n,p,s),G.current=ee.current!==q(p);let O=w;if(c&&(N(n)||Oe)){O=K(n);const F=y(n,i(p));F&&(R(n,O,F),E(O))}return f({values:p,errors:O}),p})})),ge=_((n,s)=>{const c=[...y(n,a),s];D(n,c,!1);const f=Y(n,w);return E(f),c}),Ae=_((n,s)=>{const c=[s,...y(n,a)];D(n,c,!1);let f=Y(n,w);return f=$(n,f,d=>[void 0,...d]),E(f),c}),De=_((n,s)=>{const c=y(n,a).filter((d,p)=>s!==p);D(n,c,!1);let f=Y(n,w);return f=K(`${n}.${s}`,f),f=$(n,f,d=>(d.splice(s,1),d)),E(f),c}),Me=_((n,s,c)=>{const f=P(a,n,s,c);D(n,f);const d=P(w,n,s,c),p=S({},w);return R(n,p,d),E(p),f}),xe=u.useCallback(n=>B.current.get(n),[]),te=u.useCallback((n,s)=>{s&&B.current.set(n,s)},[]),Be=u.useCallback(n=>n&&te(n.name,n),[]),oe=_(n=>{D(n.target.name,Re(n))}),ce=_(n=>{const{name:s}=n.target,c=y(s,i(a));if(c){const f=S({},w);R(s,f,c),E(f),t&&Q(s)}else K(s)}),Fe=(n,s="")=>{const c=ne(n),f=N(n);return l.key=l.name=n,l["aria-invalid"]=f,l.className=z(b,f?o:!1,s),l.onChange=oe,l.onBlur=Ce?ce:void 0,l.ref=Be,c===!0||c===!1?(l.checked=c,l.value=void 0):(l.value=`${c}`=="0"?c:c||"",l.checked=void 0),l},Ie=n=>s=>{s&&(s==null||s.preventDefault());const c=i(a);if(E(c),N("",c)){if(t){let f=!1;B.current.forEach((d,p)=>{!f&&N(p,c)&&(f=Q(p))})}return!1}return n(a),!0},Le=_((n=e,s=!0)=>{H(n),T.current=!1,G.current=!1,s&&se("",n)});return{getValue:ne,setValue:D,register:Fe,onChange:oe,onBlur:ce,getRef:xe,setRef:te,trigger:se,handleSubmit:Ie,hasError:N,getError:Te,clearError:K,setErrors:be,append:ge,prepend:Ae,remove:De,swap:Me,key:re,reset:Le,Error:({for:n,children:s})=>{const c=y(n,w);return!c||k(c)?!1:j(s)?s(c):W("span",{className:z(c,o),children:c.message})},Errors:({children:n,focusable:s=!1})=>{if(!N())return!1;const f=Array.from(B.current).map(d=>d[0]).filter(d=>N(d)).sort().map(d=>{const p=y(d,w);return W("li",{className:z(p,o),children:s?W("a",{onClick:()=>Q(d),children:p.message}):p.message},re(p))});return j(n)?n(f):f},formState:{errors:w,isValid:!N(),isTouched:T.current,isDirty:G.current}}},Se=e=>r=>{const o={};try{e.validateSync(r,{abortEarly:!1})}catch(t){for(const i of t.inner)R(i.path,o,{message:i.message,type:i.type})}return o};m.default=Ne,m.yupResolver=Se,Object.defineProperty(m,"__esModule",{value:!0}),m[Symbol.toStringTag]="Module"});
