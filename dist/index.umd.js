var er=Object.defineProperty,rr=Object.defineProperties;var sr=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var nr=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable;var Re=(d,u,E)=>u in d?er(d,u,{enumerable:!0,configurable:!0,writable:!0,value:E}):d[u]=E,k=(d,u)=>{for(var E in u||(u={}))nr.call(u,E)&&Re(d,E,u[E]);if(we)for(var E of we(u))tr.call(u,E)&&Re(d,E,u[E]);return d},z=(d,u)=>rr(d,sr(u));(function(d,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(d=typeof globalThis!="undefined"?globalThis:d||self,u(d["@rvision/use-form"]={},d.react))})(this,function(d,u){"use strict";function E(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var ke=E(u);const se=r=>typeof r=="function",I={},C=()=>I;let Ae=2e9;const b=new WeakMap,Oe=r=>{let s=b.get(r);return s||(s=(Ae++).toString(36),b.set(r,s)),s},ne=r=>{let s;if(r instanceof Set)s=new Set([...r]);else{const t=Array.isArray(r);s=t?[...r]:k({},r),t&&r.message&&(s.message=r.message,s.type=r.type)}return b.has(r)&&(b.set(s,b.get(r)),b.delete(r)),s},Se=/\[([^\]]+)\]/g;let U=new Map;const W=r=>{if(!r)return[];let s=U.get(r);return s||(s=r.replace(Se,".$1").split(".").map(t=>+t-+t<1?+t:t),U.set(r,s),s)},Ne=()=>{U=new Map},Y=(r,s)=>{if(s!==void 0)return r.length===0?s:Y(r.slice(1),s[r[0]])},v=(r,s)=>Y(W(r),s),te=(r,s,t)=>{const{length:o}=r;if(o===0)return;const i=r[0];if(o===1){s[i]=t;return}const l=s[i]!==void 0,m=r[1],R=+m-+m<1;s[i]=l?ne(s[i]):R?[]:{},R&&(s[i][m]=s[i][m]===void 0?{}:ne(s[i][m])),te(r.slice(1),s[i],t)},A=(r,s,t)=>{const o=k({},s);return te(W(r),o,t),o},B=(r,s)=>{const{length:t}=r;if(t===0||s===void 0)return;const o=r[0];if(t===1){delete s[o];return}B(r.slice(1),s[o])},H=r=>Object.keys(r||I).length===0,Te=(r,s)=>{B(r,s),r.map((o,i)=>i===0?[...r]:[...r].slice(0,-1*i)).forEach(o=>{const i=Y(o,s);i!==void 0&&(Array.isArray(i)?(i.length===0||i.every(H))&&!i.message&&B(o,s):H(i)&&B(o,s))})},D=(r,s)=>{const t=k({},s);return Te(W(r),t),t},be=r=>{const{value:s,type:t,checked:o,options:i,files:l,multiple:m,valueAsNumber:R,valueAsDate:x}=r.target;switch(t){case"checkbox":return o;case"range":return R;case"date":return x;case"number":{if(s==="")return null;const g=Number.parseFloat(s);return+g-+g<1?+g:void 0}case"file":return m?l:l.item(0);case"select-multiple":return[...i].filter(g=>g.selected).map(g=>g.value);default:return s}},xe=(r,s,t)=>{const o=[...r];return[o[s],o[t]]=[o[t],o[s]],o},oe=(r,s,t)=>{const o=[...r];return o.splice(s,0,t),o},K=(r,s,t)=>[t,s,r].filter(o=>!!o).map(o=>`${o.type?`error-${o.type}`:o}`).join(" "),Ce=r=>s=>{let t={};try{r.validateSync(s,{abortEarly:!1})}catch(o){for(const i of o.inner){const l=v(i.path,t)||{};l.message=i.message,l.type=i.type,t=A(i.path,t,l)}}return t},Me=r=>s=>{let t={};const o=r.safeParse(s);return o.success||o.error.errors.forEach(i=>{const l=i.path.join("."),m=v(l,t)||{};m.message=i.message,m.type=i.type,t=A(l,t,m)}),t};var ce={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ie=ke.default,Be=Symbol.for("react.element"),De=Symbol.for("react.fragment"),Fe=Object.prototype.hasOwnProperty,Ve=Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,he={key:!0,ref:!0,__self:!0,__source:!0};function ie(r,s,t){var o,i={},l=null,m=null;t!==void 0&&(l=""+t),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(m=s.ref);for(o in s)Fe.call(s,o)&&!he.hasOwnProperty(o)&&(i[o]=s[o]);if(r&&r.defaultProps)for(o in s=r.defaultProps,s)i[o]===void 0&&(i[o]=s[o]);return{$$typeof:Be,type:r,key:l,ref:m,props:i,_owner:Ve.current}}F.Fragment=De,F.jsx=ie,F.jsxs=ie,ce.exports=F;const G=ce.exports.jsx,ae="aria-invalid",Q=r=>JSON.stringify(r,(s,t)=>t instanceof Set?[...t].sort():t),X=new Map,Je=(r,s)=>(X.set(r,s),u.useEffect(()=>()=>X.delete(r),[r]),u.useCallback((...t)=>X.get(r)(...t),[r])),_={name:"",[ae]:!1,className:"",onChange:C,onBlur:C,ref:C,value:"",checked:!1},Le=({id:r,defaultValues:s,mode:t,classNameError:o,shouldFocusError:i=!1,resolver:l=C})=>{const[m,R]=u.useState({values:s||I,errors:{}}),{values:x,errors:g}=m,V=u.useRef(!1),h=u.useRef(!1),J=u.useRef(!1),S=u.useRef(new Map),Z=u.useRef(),ue=t==="onSubmit",fe=t==="onBlur",le=t==="onChange",je=!ue&&!fe&&!le;let ze=1;const y=e=>Je(`${r}!${ze++}`,e),M=e=>R(n=>z(k({},n),{errors:e})),q=u.useCallback(e=>{const n=e||I;Z.current=Q(n),R(c=>z(k({},c),{values:k({},n)}))},[]);u.useEffect(()=>(q(s),()=>{Ne()}),[s,q]);const $=u.useCallback(e=>{const n=S.current.get(e);return n&&n.focus?(n.focus(),!0):!1},[]),P=y((e="")=>(S.current.has(e)||S.current.set(e,null),v(e,x))),L=y((e="",n=g)=>v(e,n)),N=y((e="",n=g)=>e===""?!H(n):v(e,n)!==void 0),de=y((e,n=g)=>{let c=n;return N(e,n)&&(c=D(e,n)),c}),pe=y((e="")=>new Promise((n=C)=>{R(c=>{let a=l(c.values);if(e!==""){const p=Array.isArray(e)?e:[e];let O=k({},c.errors);p.forEach(w=>{const T=v(w,a);O=D(w,O),T!==void 0&&(O=A(w,O,T))}),a=O}const f=z(k({},c),{errors:a});return n(f),f})})),ye=le||J.current&&je,me=y((e,n)=>R(c=>{const a=A(e,c.values,n);V.current=!0,h.current=Z.current!==Q(a);let f=g;if((ye||N(e))&&(f=D(e,f),!ue)){const p=v(e,l(a));p&&(f=A(e,f,p))}return{values:a,errors:f}})),j=y((e,n,c)=>{R(a=>{const f=A(e,a.values,n(v(e,a.values)));V.current=!0,h.current=Z.current!==Q(f);let p=a.errors;const O=v(e,p);let w=[];if(Array.isArray(O)&&(w=c(O)),ye){const T=v(e,l(f));if(T&&T.message){const re=w.length>0?w:{};re.message=T.message,re.type=T.type,w=re}}return p=D(e,p),(w.length>0||w.message)&&(p=A(e,p,w)),{values:f,errors:p}})}),ee=y((e,n,c)=>{j(e,a=>oe(a,n,c),a=>oe(a,n,void 0))}),Ue=(e,n)=>ee(e,P(e).length,n),We=(e,n)=>ee(e,0,n),Ye=y(e=>{const n=()=>[];j(e,n,n)}),He=y((e,n)=>{const c=a=>[...a].filter((f,p)=>p!==n);j(e,c,c)}),Ke=y((e,n,c)=>{const a=f=>xe(f,n,c);j(e,a,a)}),Ge=y(e=>S.current.get(e)),ge=y((e,n)=>{n&&S.current.set(e,n)}),Qe=e=>e&&ge(e.name,e),Ee=y(e=>me(e.target.name,be(e))),ve=y(e=>{const{name:n}=e.target,c=v(n,l(x));c?(M(A(n,g,c)),i&&$(n)):M(de(n))}),Xe=y((e,n="")=>{const c=P(e),a=L(e);return _.name=e,_[ae]=!!a,_.className=K(a,a?o:"",n),_.onChange=Ee,_.ref=Qe,_.onBlur=fe?ve:void 0,c===!0||c===!1?(_.checked=c,_.value=void 0):(_.value=`${c}`=="0"?c:c||"",_.checked=void 0),_}),Ze=y((e=s,n=!0)=>{q(e),V.current=!1,h.current=!1,n&&pe("",e)}),qe=e=>n=>{n&&n.preventDefault();const c=l(x);if(M(c),N("",c)){if(i){let a=!1;S.current.forEach((f,p)=>{!a&&N(p,c)&&(a=$(p))})}return J.current=!0,!1}return e(x),!0},$e=y(({for:e,children:n})=>{const c=L(e,g);return(c==null?void 0:c.message)?se(n)?n(c):G("span",{className:K(c,o),children:c.message}):!1}),_e=!N(),Pe=y(({children:e,focusable:n=!1})=>{if(_e)return!1;const a=Array.from(S.current).map(f=>f[0]).filter(f=>f!=="").filter(f=>N(f,g)).sort().map(f=>{const p=L(f);return G("li",{className:K(p,o),children:n?G("a",{onClick:()=>$(f),children:p.message}):p.message},f)});return se(e)?e(a):a});return{getValue:P,setValue:me,register:Xe,onChange:Ee,onBlur:ve,getRef:Ge,setRef:ge,trigger:pe,handleSubmit:qe,hasError:N,getError:L,clearError:e=>M(de(e)),setErrors:e=>{J.current=!0,M(e)},array:{clear:Ye,append:Ue,prepend:We,remove:He,swap:Ke,insert:ee},key:Oe,Error:$e,Errors:Pe,formState:{errors:g,isValid:_e,isTouched:V.current,isDirty:h.current,hadError:J.current,reset:Ze}}};d.default=Le,d.yupResolver=Ce,d.zodResolver=Me,Object.defineProperty(d,"__esModule",{value:!0}),d[Symbol.toStringTag]="Module"});
