var Le=Object.defineProperty;var se=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var te=(l,u,v)=>u in l?Le(l,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):l[u]=v,b=(l,u)=>{for(var v in u||(u={}))Je.call(u,v)&&te(l,v,u[v]);if(se)for(var v of se(u))Ke.call(u,v)&&te(l,v,u[v]);return l};(function(l,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(l=typeof globalThis!="undefined"?globalThis:l||self,u(l["@rvision/use-form"]={},l.react))})(this,function(l,u){"use strict";function v(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var oe=v(u);const ce=()=>{throw new ReferenceError("Callback was called directly while rendering, pass it as a callback prop instead.")},_=e=>{const n=u.useRef(ce);return u.useLayoutEffect(()=>{n.current=e}),u.useCallback((...t)=>n.current(...t),[])},ie=["object","function"];let ue=Date.now();const fe=()=>{const e=u.useRef(new WeakMap);return u.useEffect(()=>()=>{e&&e.current&&(e.current=new WeakMap)},[]),u.useCallback((t={})=>{const s=e.current;if(s.has(t))return s.get(t);if(!ie.includes(typeof t))return`key-${t}`;const c=(++ue).toString(36);return s.set(t,c),c},[e])};var G={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ae=oe.default,pe=Symbol.for("react.element"),de=Symbol.for("react.fragment"),le=Object.prototype.hasOwnProperty,ye=ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,me={key:!0,ref:!0,__self:!0,__source:!0};function H(e,n,t){var s,c={},a=null,N=null;t!==void 0&&(a=""+t),n.key!==void 0&&(a=""+n.key),n.ref!==void 0&&(N=n.ref);for(s in n)le.call(n,s)&&!me.hasOwnProperty(s)&&(c[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps,n)c[s]===void 0&&(c[s]=n[s]);return{$$typeof:pe,type:e,key:a,ref:N,props:c,_owner:ye.current}}F.Fragment=de,F.jsx=H,F.jsxs=H,G.exports=F;const J=G.exports.jsx,K=e=>!Number.isNaN(e),Q=e=>parseInt(e,10),X=e=>typeof e=="function",{isArray:k}=Array,Z=JSON.stringify,M=Object.keys,T={},E={key:"",name:"","aria-invalid":!1,className:"",onChange:()=>{},onBlur:()=>{},ref:()=>{},value:"",checked:!1},we=/\[([^\]]+)\]/g;let B={};const I=e=>{if(!e)return[];if(B[e])return B[e];const n=e.replace(we,".$1").split(".");return B[e]=n,n},V=e=>typeof e!="object"||e===null?e:e instanceof Date?new Date(e.getTime()):k(e)?e.reduce((n,t,s)=>(n[s]=V(t),n),[]):e instanceof Object?M(e).reduce((n,t)=>(n[t]=V(e[t]),n),{}):e,m=(e,n)=>{if(!k(e))return m(I(e),n);if(n!==void 0)switch(e.length){case 0:return n;case 1:return n[e[0]];default:return m(e.slice(1),n[e[0]])}},R=(e,n,t)=>{if(!k(e)){R(I(e),n,t);return}if(e.length===0)return;const s=e[0];if(e.length===1){n[s]=t;return}const c=Q(e[1]);K(c)?(n[s]=n[s]===void 0?[]:n[s],n[s][c]=n[s][c]===void 0?{}:n[s][c],e.length===2?n[s][c]=t:R(e.slice(2),n[s][c],t)):(n[s]=n[s]===void 0?{}:b({},n[s]),R(e.slice(1),n[s],t))},g=(e,n)=>{if(!k(e)){g(I(e),n);return}if(e.length===0||n===void 0)return;const t=e[0];if(e.length===1){delete n[t];return}if(n[t]===void 0)return;const s=e[1],c=Q(s);K(c)?e.length===2?delete n[t][c]:g(e.slice(2),n[t][c]):g(e.slice(1),n[t][c])},x=(e,n)=>{if(!k(e)){x(I(e),n);return}g(e,n);const t=e.map((s,c)=>c===0?[...e]:[...e].slice(0,-1*c));for(const s of t){const c=m(s,n);c!==void 0&&(k(c)?(c.length===0||c.every(a=>M(a||T).length===0))&&g(s,n):M(c||T).length===0&&g(s,n))}},ve=e=>{const{value:n,type:t,checked:s,options:c,files:a,multiple:N,valueAsNumber:d}=e.target;switch(t){case"checkbox":return s;case"range":return d;case"number":if(n==="")return null;const w=Number.parseFloat(n);return K(w)?w:void 0;case"file":return N?a:a.item(0);case"select-multiple":return[...c].filter(S=>S.selected).map(S=>S.value);default:return n}},W=(e,n)=>{const t=m(e,n);if(t&&!k(t)){const s=b({},n);return x(e,s),s}return n},q=(e,n,t)=>{const s=m(e,n);if(s&&k(s)){const c=b({},n),a=t([...s]);return R(e,c,a),c}return n},$=(e,n,t,s)=>{const c=m(n,e);if(k(c)){const a=[...c],N=a[t];return a[t]=a[s],a[s]=N,a}return c},U=(e,n,t)=>`${t||""} ${n||""} ${e.type?`error-${e.type}`:""}`.trim(),Y=e=>e&&e.focus?(e.focus(),!0):!1,_e=({defaultValues:e=T,mode:n="onSubmit",classNameError:t=null,shouldFocusError:s=!1,resolver:c=()=>T})=>{const[a,N]=u.useState(e),[d,w]=u.useState({}),S=u.useRef(!1),h=u.useRef(!1),A=u.useRef(new Map),P=u.useRef(""),j=fe(),ke=n==="onBlur",Re=n==="onChange",z=u.useCallback(r=>{P.current=Z(r),N(V(r))},[]);u.useEffect(()=>(z(e),()=>{B={}}),[e,z]);const C=u.useCallback((r=null,o=d)=>r===null?M(o||T).length>0:m(r,o)!==void 0,[d]),L=_((r,o=d)=>{if(C(r,o)){const i=b({},o);return x(r,i),w(i),i}return o}),Ce=_(r=>{const o=b({},d);for(const i of M(r))C(i)&&x(i,o),R(i,o,r[i]);return w(o),o}),be=_((r="",o=a)=>{const i=c(o),f=k(r)?r:[r],p=b({},d);return f.forEach(y=>{const O=m(y,i);x(y,p),O!==void 0&&R(y,p,O)}),w(p),p}),ee=(r="")=>m(r,a),D=_((r,o,i=!0)=>{N(f=>{const p=b({},r===""?o:f);if(R(r,p,o),h.current=P.current!==Z(p),i&&(C(r)||Re)){const y=L(r),O=m(r,c(p));O&&(R(r,y,O),w(y))}return p}),S.current=!0}),Ne=_((r,o)=>{const i=[...m(r,a),o];D(r,i,!1);const f=W(r,d);return w(f),i}),Se=_((r,o)=>{const i=[o,...m(r,a)];D(r,i,!1);let f=W(r,d);return f=q(r,f,p=>[void 0,...p]),w(f),i}),Oe=_((r,o)=>{const i=m(r,a).filter((p,y)=>o!==y);D(r,i,!1);let f=W(r,d);return f=L(`${r}.${o}`,f),f=q(r,f,p=>(p.splice(o,1),p)),w(f),i}),Te=_((r,o,i)=>{const f=$(a,r,o,i);D(r,f);const p=$(d,r,o,i),y=b({},d);return R(r,y,p),w(y),f}),ge=u.useCallback(r=>{r&&A.current.set(r.name,r)},[]),Ae=u.useCallback(r=>A.current.get(r),[]),De=u.useCallback((r,o)=>{o&&A.current.set(r,o)},[]),ne=_(r=>{D(r.target.name,ve(r))}),re=_(r=>{const{name:o}=r.target,i=m(o,c(a));if(i){const f=b({},d);R(o,f,i),w(f),s&&Y(A.current.get(o))}else L(o)}),Me=(r,o="")=>{const i=ee(r),f=C(r);return E.key=E.name=r,E["aria-invalid"]=f,E.className=U(T,f?t:!1,o),E.onChange=ne,E.onBlur=ke?re:void 0,E.ref=ge,i===!0||i===!1?(E.checked=i,E.value=void 0):(E.value=`${i}`=="0"?i:i||"",E.checked=void 0),E},xe=r=>_(o=>{o&&o.preventDefault&&o.preventDefault();const i=c(a);if(w(i),C(null,i)){if(s){let f=!1;A.current.forEach((p,y)=>{!f&&C(y,i)&&(f=Y(p))})}return!1}return r(a),!0}),Fe=_((r=e,o=!0)=>{z(r),S.current=!1,h.current=!1,o&&w(c(r))}),Be=u.useCallback(({for:r,children:o})=>{const i=m(r,d);return!i||k(i)?!1:X(o)?o(i):J("span",{className:U(i,t),children:i.message})},[d,t]),Ie=u.useCallback(({children:r,focusable:o=!1})=>{if(!C())return!1;const i=Array.from(A.current).filter(p=>C(p[0])).map(p=>{const[y,O]=p;return{error:m(y,d),element:O}});if(i.length===0)return!1;const f=i.map(({error:p,element:y})=>J("li",{className:U(p,t),children:o?J("a",{onClick:()=>Y(y),children:p.message}):p.message},j(p)));return X(r)?r(f):f},[d,C,t,j]);return{getValue:ee,setValue:D,register:Me,onChange:ne,onBlur:re,getRef:Ae,setRef:De,trigger:be,handleSubmit:xe,hasError:C,clearError:L,setErrors:Ce,append:Ne,prepend:Se,remove:Oe,swap:Te,key:j,reset:Fe,Error:Be,Errors:Ie,formState:{errors:d,isValid:!C(),isTouched:S.current,isDirty:h.current}}},Ee=e=>n=>{const t={};try{e.validateSync(n,{abortEarly:!1})}catch(s){for(const c of s.inner){const a={message:c.message,type:c.type};R(c.path,t,a)}}return t};l.default=_e,l.yupResolver=Ee,Object.defineProperty(l,"__esModule",{value:!0}),l[Symbol.toStringTag]="Module"});
