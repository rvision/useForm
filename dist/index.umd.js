var er=Object.defineProperty,rr=Object.defineProperties;var sr=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var tr=Object.prototype.hasOwnProperty,nr=Object.prototype.propertyIsEnumerable;var _e=(y,a,E)=>a in y?er(y,a,{enumerable:!0,configurable:!0,writable:!0,value:E}):y[a]=E,k=(y,a)=>{for(var E in a||(a={}))tr.call(a,E)&&_e(y,E,a[E]);if(we)for(var E of we(a))nr.call(a,E)&&_e(y,E,a[E]);return y},z=(y,a)=>rr(y,sr(a));(function(y,a){typeof exports=="object"&&typeof module!="undefined"?a(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],a):(y=typeof globalThis!="undefined"?globalThis:y||self,a(y["@rvision/use-form"]={},y.react))})(this,function(y,a){"use strict";function E(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var Re=E(a);const ee=e=>typeof e=="function",b={},x=()=>b;let ke=2e9;const C=new WeakMap,Ae=e=>{let r=C.get(e);return r||(r=(ke++).toString(36),C.set(e,r)),r},re=e=>{let r;if(e instanceof Set)r=new Set([...e]);else{const n=Array.isArray(e);r=n?[...e]:k({},e),n&&e.message&&(r.message=e.message,r.type=e.type)}return C.has(e)&&(C.set(r,C.get(e)),C.delete(e)),r},Se=/\[([^\]]+)\]/g;let U=new Map;const W=e=>{if(!e)return[];let r=U.get(e);return r||(r=e.replace(Se,".$1").split(".").map(n=>+n-+n===0?+n:n),U.set(e,r),r)},Ne=()=>{U=new Map},Y=(e,r)=>{if(r!==void 0)return e.length===0?r:Y(e.slice(1),r[e[0]])},v=(e,r)=>Y(W(e),r),se=(e,r,n)=>{const{length:c}=e;if(c===0)return;const i=e[0];if(c===1){r[i]=n;return}const d=r[i]!==void 0,m=e[1],R=+m-+m<1;r[i]=d?re(r[i]):R?[]:{},R&&(r[i][m]=r[i][m]===void 0?{}:re(r[i][m])),se(e.slice(1),r[i],n)},A=(e,r,n)=>{const c=k({},r);return se(W(e),c,n),c},B=(e,r)=>{const{length:n}=e;if(n===0||r===void 0)return;const c=e[0];if(n===1){delete r[c];return}B(e.slice(1),r[c])},j=e=>Object.keys(e||b).length===0,Oe=(e,r)=>{B(e,r),e.map((c,i)=>i===0?[...e]:[...e].slice(0,-1*i)).forEach(c=>{const i=Y(c,r);i!==void 0&&(Array.isArray(i)?(i.length===0||i.every(j))&&!i.message&&B(c,r):j(i)&&B(c,r))})},D=(e,r)=>{const n=k({},r);return Oe(W(e),n),n},Te=e=>{const{value:r,type:n,checked:c,options:i,files:d,multiple:m,valueAsNumber:R,valueAsDate:I}=e.target;switch(n){case"checkbox":return c;case"range":return R;case"date":return I;case"number":{if(r==="")return null;const g=Number.parseFloat(r);return+g-+g<1?+g:void 0}case"file":return m?d:d.item(0);case"select-multiple":return[...i].filter(g=>g.selected).map(g=>g.value);default:return r}},Ce=(e,r,n)=>{const c=[...e];for(;c.length<Math.max(r,n);)c.push(void 0);return[c[r],c[n]]=[c[n],c[r]],c},te=(e,r,n)=>{const c=[...e];for(;c.length<r;)c.push(void 0);return c.splice(r,0,n),c},H=(e,r,n)=>`${n||""} ${r||""} ${e.type?`error-${e.type}`:""}`.trim(),Ie=e=>r=>{let n={};try{e.validateSync(r,{abortEarly:!1})}catch(c){for(const i of c.inner){const d=v(i.path,n)||{};d.message=i.message,d.type=i.type,n=A(i.path,n,d)}}return n},Me=e=>r=>{let n={};const c=e.safeParse(r);return c.success||c.error.errors.forEach(i=>{const d=i.path.join("."),m=v(d,n)||{};m.message=i.message,m.type=i.type,n=A(d,n,m)}),n};var ne={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var be=Re.default,xe=Symbol.for("react.element"),he=Symbol.for("react.fragment"),Be=Object.prototype.hasOwnProperty,De=be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fe={key:!0,ref:!0,__self:!0,__source:!0};function oe(e,r,n){var c,i={},d=null,m=null;n!==void 0&&(d=""+n),r.key!==void 0&&(d=""+r.key),r.ref!==void 0&&(m=r.ref);for(c in r)Be.call(r,c)&&!Fe.hasOwnProperty(c)&&(i[c]=r[c]);if(e&&e.defaultProps)for(c in r=e.defaultProps,r)i[c]===void 0&&(i[c]=r[c]);return{$$typeof:xe,type:e,key:d,ref:m,props:i,_owner:De.current}}F.Fragment=he,F.jsx=oe,F.jsxs=oe,ne.exports=F;const K=ne.exports.jsx,ce="aria-invalid",G=e=>JSON.stringify(e,(r,n)=>n instanceof Set?[...n].sort():n),Q=new Map,Ve=(e,r)=>(Q.set(e,r),a.useEffect(()=>()=>Q.delete(e),[e]),a.useCallback((...n)=>Q.get(e)(...n),[e])),w={name:"",[ce]:!1,className:"",onChange:x,onBlur:x,ref:x,value:"",checked:!1},Je=({id:e="",defaultValues:r,mode:n,classNameError:c,shouldFocusError:i=!1,resolver:d=x})=>{const[m,R]=a.useState({values:r||b,errors:{}}),{values:I,errors:g}=m,V=a.useRef(!1),J=a.useRef(!1),L=a.useRef(!1),O=a.useRef(new Map),X=a.useRef(),ie=n==="onSubmit",ae=n==="onBlur",ue=n==="onChange",Le=!ie&&!ae&&!ue;let ze=1;const p=s=>Ve(e+ze++,s),h=s=>R(t=>z(k({},t),{errors:s})),Z=a.useCallback(s=>{const t=s||b;X.current=G(t),R(o=>z(k({},o),{values:k({},t)}))},[]);a.useEffect(()=>(Z(r),()=>{Ne()}),[r,Z]);const q=a.useCallback(s=>{const t=O.current.get(s);return t&&t.focus?(t.focus(),!0):!1},[]),fe=p((s="")=>(O.current.has(s)||O.current.set(s,null),v(s,I))),$=p((s="",t=g)=>v(s,t)),S=p((s="",t=g)=>s===""?!j(t):v(s,t)!==void 0),le=p((s,t=g)=>{let o=t;return S(s,t)&&(o=D(s,t)),o}),de=p((s="")=>new Promise((t=x)=>{R(o=>{let u=d(o.values);if(s!==""){const l=Array.isArray(s)?s:[s];let N=k({},o.errors);l.forEach(_=>{const T=v(_,u);N=D(_,N),T!==void 0&&(N=A(_,N,T))}),u=N}const f=z(k({},o),{errors:u});return t(f),f})})),pe=ue||L.current&&Le,ye=p((s,t)=>R(o=>{const u=A(s,o.values,t);V.current=!0,J.current=X.current!==G(u);let f=g;if((pe||S(s))&&(f=D(s,f),!ie)){const l=v(s,d(u));l&&(f=A(s,f,l))}return{values:u,errors:f}})),M=p((s,t,o)=>{R(u=>{const f=A(s,u.values,t(v(s,u.values)));V.current=!0,J.current=X.current!==G(f);let l=u.errors;const N=v(s,l);let _=[];if(Array.isArray(N)&&(_=o(N)),pe){const T=v(s,d(f));if(T&&T.message){const P=_.length>0?_:{};P.message=T.message,P.type=T.type,_=P}}return l=D(s,l),(_.length>0||_.message)&&(l=A(s,l,_)),{values:f,errors:l}})}),Ue=p((s,t)=>{M(s,o=>[...o,t],o=>o)}),We=p((s,t)=>{M(s,o=>[t,...o],o=>[void 0,...o])}),Ye=p(s=>{const t=()=>[];M(s,t,t)}),je=p((s,t)=>{const o=u=>[...u].filter((f,l)=>l!==t);M(s,o,o)}),He=p((s,t,o)=>{const u=f=>Ce(f,t,o);M(s,u,u)}),Ke=p((s,t,o)=>{M(s,l=>te(l,t,o),l=>te(l,t,void 0))}),Ge=p(s=>O.current.get(s)),me=p((s,t)=>{t&&O.current.set(s,t)}),Qe=s=>s&&me(s.name,s),ge=p(s=>ye(s.target.name,Te(s))),Ee=p(s=>{const{name:t}=s.target,o=v(t,d(I));o?(h(A(t,g,o)),i&&q(t)):h(le(t))}),Xe=p((s,t="")=>{const o=fe(s),u=S(s);return w.name=s,w[ce]=u,w.className=H(b,u?c:"",t),w.onChange=ge,w.ref=Qe,w.onBlur=ae?Ee:void 0,o===!0||o===!1?(w.checked=o,w.value=void 0):(w.value=`${o}`=="0"?o:o||"",w.checked=void 0),w}),Ze=p((s=r,t=!0)=>{Z(s),V.current=!1,J.current=!1,t&&de("",s)}),qe=s=>t=>{t&&t.preventDefault();const o=d(I);if(h(o),S("",o)){if(i){let u=!1;O.current.forEach((f,l)=>{!u&&S(l,o)&&(u=q(l))})}return L.current=!0,!1}return s(I),!0},$e=p(({for:s,children:t})=>{const o=$(s,g);return(o==null?void 0:o.message)?ee(t)?t(o):K("span",{className:H(o,c),children:o.message}):!1}),ve=!S(),Pe=p(({children:s,focusable:t=!1})=>{if(ve)return!1;const u=Array.from(O.current).map(f=>f[0]).filter(f=>S(f,g)).sort().map(f=>{const l=$(f);return K("li",{className:H(l,c),children:t?K("a",{onClick:()=>q(f),children:l.message}):l.message},f)});return ee(s)?s(u):u});return{getValue:fe,setValue:ye,register:Xe,onChange:ge,onBlur:Ee,getRef:Ge,setRef:me,trigger:de,handleSubmit:qe,hasError:S,getError:$,clearError:s=>h(le(s)),setErrors:s=>{L.current=!0,h(s)},array:{clear:Ye,append:Ue,prepend:We,remove:je,swap:He,insert:Ke},key:Ae,Error:$e,Errors:Pe,formState:{errors:g,isValid:ve,isTouched:V.current,isDirty:J.current,hadError:L.current,reset:Ze}}};y.default=Je,y.yupResolver=Ie,y.zodResolver=Me,Object.defineProperty(y,"__esModule",{value:!0}),y[Symbol.toStringTag]="Module"});
