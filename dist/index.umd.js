var Le=Object.defineProperty;var se=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var te=(l,u,v)=>u in l?Le(l,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):l[u]=v,N=(l,u)=>{for(var v in u||(u={}))Je.call(u,v)&&te(l,v,u[v]);if(se)for(var v of se(u))Ke.call(u,v)&&te(l,v,u[v]);return l};(function(l,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],u):(l=typeof globalThis!="undefined"?globalThis:l||self,u(l["@rvision/use-form"]={},l.react))})(this,function(l,u){"use strict";function v(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var oe=v(u);const ce=()=>{throw new ReferenceError("Callback was called directly while rendering, pass it as a callback prop instead.")},_=e=>{const n=u.useRef(ce);return u.useLayoutEffect(()=>{n.current=e}),u.useCallback((...o)=>n.current(...o),[])},ie=["object","function"];let ue=Date.now();const fe=()=>{const e=u.useRef(new WeakMap);return u.useEffect(()=>()=>{(e==null?void 0:e.current)&&(e.current=new WeakMap)},[]),u.useCallback((n={})=>{const o=e.current;if(o.has(n))return o.get(n);if(!ie.includes(typeof n))return`key-${n}`;const s=(++ue).toString(36);return o.set(n,s),s},[e])};var G={exports:{}},x={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ae=oe.default,pe=Symbol.for("react.element"),de=Symbol.for("react.fragment"),le=Object.prototype.hasOwnProperty,ye=ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,me={key:!0,ref:!0,__self:!0,__source:!0};function H(e,n,o){var s,i={},a=null,S=null;o!==void 0&&(a=""+o),n.key!==void 0&&(a=""+n.key),n.ref!==void 0&&(S=n.ref);for(s in n)le.call(n,s)&&!me.hasOwnProperty(s)&&(i[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps,n)i[s]===void 0&&(i[s]=n[s]);return{$$typeof:pe,type:e,key:a,ref:S,props:i,_owner:ye.current}}x.Fragment=de,x.jsx=H,x.jsxs=H,G.exports=x;const J=G.exports.jsx,K=e=>!Number.isNaN(e),Q=e=>parseInt(e,10),X=e=>typeof e=="function",{isArray:k}=Array,Z=JSON.stringify,D=Object.keys,R={},E={key:"",name:"","aria-invalid":!1,className:"",onChange:()=>R,onBlur:()=>R,ref:()=>R,value:"",checked:!1},we=/\[([^\]]+)\]/g;let B={};const F=e=>{if(!e)return[];if(B[e])return B[e];const n=e.replace(we,".$1").split(".");return B[e]=n,n},V=e=>typeof e!="object"||e===null?e:e instanceof Date?new Date(e.getTime()):k(e)?e.reduce((n,o,s)=>(n[s]=V(o),n),[]):e instanceof Object?D(e).reduce((n,o)=>(n[o]=V(e[o]),n),{}):e,m=(e,n)=>{if(!k(e))return m(F(e),n);if(n!==void 0)switch(e.length){case 0:return n;default:return m(e.slice(1),n[e[0]])}},C=(e,n,o)=>{if(!k(e)){C(F(e),n,o);return}if(e.length===0)return;const s=e[0];if(e.length===1){n[s]=o;return}const i=Q(e[1]);K(i)?(n[s]=n[s]===void 0?[]:n[s],n[s][i]=n[s][i]===void 0?{}:n[s][i],e.length===2?n[s][i]=o:C(e.slice(2),n[s][i],o)):(n[s]=n[s]===void 0?{}:N({},n[s]),C(e.slice(1),n[s],o))},T=(e,n)=>{if(!k(e)){T(F(e),n);return}if(e.length===0||n===void 0)return;const o=e[0];if(e.length===1){delete n[o];return}if(n[o]===void 0)return;const s=e[1],i=Q(s);K(i)?e.length===2?delete n[o][i]:T(e.slice(2),n[o][i]):T(e.slice(1),n[o][i])},M=(e,n)=>{if(!k(e)){M(F(e),n);return}T(e,n);const o=e.map((s,i)=>i===0?[...e]:[...e].slice(0,-1*i));for(const s of o){const i=m(s,n);i!==void 0&&(k(i)?(i.length===0||i.every(a=>D(a||R).length===0))&&T(s,n):D(i||R).length===0&&T(s,n))}},ve=e=>{const{value:n,type:o,checked:s,options:i,files:a,multiple:S,valueAsNumber:d}=e.target;switch(o){case"checkbox":return s;case"range":return d;case"number":if(n==="")return null;const w=Number.parseFloat(n);return K(w)?w:void 0;case"file":return S?a:a.item(0);case"select-multiple":return[...i].filter(O=>O.selected).map(O=>O.value);default:return n}},W=(e,n)=>{const o=m(e,n);if(o&&!k(o)){const s=N({},n);return M(e,s),s}return n},q=(e,n,o)=>{const s=m(e,n);if(s&&k(s)){const i=N({},n),a=o([...s]);return C(e,i,a),i}return n},$=(e,n,o,s)=>{const i=m(n,e);if(k(i)){const a=[...i],S=a[o];return a[o]=a[s],a[s]=S,a}return i},U=(e,n,o)=>`${o||""} ${n||""} ${e.type?`error-${e.type}`:""}`.trim(),Y=e=>e&&e.focus?(e.focus(),!0):!1,_e=({defaultValues:e,mode:n="onSubmit",classNameError:o=null,shouldFocusError:s=!1,resolver:i=()=>R})=>{const[a,S]=u.useState(e||R),[d,w]=u.useState({}),O=u.useRef(!1),h=u.useRef(!1),g=u.useRef(new Map),P=u.useRef(""),j=fe(),ke=n==="onBlur",Re=n==="onChange",z=u.useCallback(r=>{P.current=Z(r),S(V(r))},[]);u.useEffect(()=>(z(e||R),()=>{B={}}),[e,z]);const b=u.useCallback((r=null,c=d)=>r===null?D(c||R).length>0:m(r,c)!==void 0,[d]),I=_((r,c=d)=>{if(b(r,c)){const t=N({},c);return M(r,t),w(t),t}return c}),Ce=_(r=>{const c=N({},d);for(const t of D(r))b(t)&&M(t,c),C(t,c,r[t]);return w(c),c}),be=_((r="",c=a)=>{const t=i(c);if(r==="")return w(t),t;const f=k(r)?r:[r],p=N({},d);return f.forEach(y=>{const L=m(y,t);M(y,p),L!==void 0&&C(y,p,L)}),w(p),p}),ee=(r="")=>m(r,a),A=_((r,c,t=!0)=>{const f=N({},r===""?c:a);if(C(r,f,c),h.current=P.current!==Z(f),t&&(b(r)||Re)){const p=I(r),y=m(r,i(f));y&&(C(r,p,y),w(p))}return S(f),O.current=!0,f}),Ne=_((r,c)=>{const t=[...m(r,a),c];A(r,t,!1);const f=W(r,d);return w(f),t}),Se=_((r,c)=>{const t=[c,...m(r,a)];A(r,t,!1);let f=W(r,d);return f=q(r,f,p=>[void 0,...p]),w(f),t}),Oe=_((r,c)=>{const t=m(r,a).filter((p,y)=>c!==y);A(r,t,!1);let f=W(r,d);return f=I(`${r}.${c}`,f),f=q(r,f,p=>(p.splice(c,1),p)),w(f),t}),Te=_((r,c,t)=>{const f=$(a,r,c,t);A(r,f);const p=$(d,r,c,t),y=N({},d);return C(r,y,p),w(y),f}),ge=u.useCallback(r=>{r&&g.current.set(r.name,r)},[]),Ae=u.useCallback(r=>g.current.get(r),[]),De=u.useCallback((r,c)=>{c&&g.current.set(r,c)},[]),ne=_(r=>{A(r.target.name,ve(r))}),re=_(r=>{const{name:c}=r.target,t=m(c,i(a));if(t){const f=N({},d);C(c,f,t),w(f),s&&Y(g.current.get(c))}else I(c)}),Me=(r,c="")=>{const t=ee(r),f=b(r);return E.key=E.name=r,E["aria-invalid"]=f,E.className=U(R,f?o:!1,c),E.onChange=ne,E.onBlur=ke?re:void 0,E.ref=ge,t===!0||t===!1?(E.checked=t,E.value=void 0):(E.value=`${t}`=="0"?t:t||"",E.checked=void 0),E},xe=r=>_(c=>{c&&c.preventDefault&&c.preventDefault();const t=i(a);if(w(t),b(null,t)){if(s){let f=!1;g.current.forEach((p,y)=>{!f&&b(y,t)&&(f=Y(p))})}return!1}return r(a),!0}),Be=_((r=e,c=!0)=>{z(r||R),O.current=!1,h.current=!1,c&&w(i(r))}),Fe=u.useCallback(({for:r,children:c})=>{const t=m(r,d);return!t||k(t)?!1:X(c)?c(t):J("span",{className:U(t,o),children:t.message})},[d,o]),Ie=u.useCallback(({children:r,focusable:c=!1})=>{if(!b())return!1;const t=Array.from(g.current).filter(p=>b(p[0])).map(p=>{const[y,L]=p;return{error:m(y,d),element:L}});if(t.length===0)return!1;const f=t.map(({error:p,element:y})=>J("li",{className:U(p,o),children:c?J("a",{onClick:()=>Y(y),children:p.message}):p.message},j(p)));return X(r)?r(f):f},[d,b,o,j]);return{getValue:ee,setValue:A,register:Me,onChange:ne,onBlur:re,getRef:Ae,setRef:De,trigger:be,handleSubmit:xe,hasError:b,clearError:I,setErrors:Ce,append:Ne,prepend:Se,remove:Oe,swap:Te,key:j,reset:Be,Error:Fe,Errors:Ie,formState:{errors:d,isValid:!b(),isTouched:O.current,isDirty:h.current}}},Ee=e=>n=>{const o={};try{e.validateSync(n,{abortEarly:!1})}catch(s){for(const i of s.inner){const a={message:i.message,type:i.type};C(i.path,o,a)}}return o};l.default=_e,l.yupResolver=Ee,Object.defineProperty(l,"__esModule",{value:!0}),l[Symbol.toStringTag]="Module"});
